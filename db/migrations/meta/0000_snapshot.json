{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.conversion_events": {
      "name": "conversion_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_data": {
          "name": "event_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "days_since_registration": {
          "name": "days_since_registration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "registration_source": {
          "name": "registration_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plan_type": {
          "name": "plan_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_conversion_created_at": {
          "name": "idx_conversion_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversion_event_type": {
          "name": "idx_conversion_event_type",
          "columns": [
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversion_limit_reached_user": {
          "name": "idx_conversion_limit_reached_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(event_type = 'limit_reached'::text)",
          "with": {}
        },
        "idx_conversion_source": {
          "name": "idx_conversion_source",
          "columns": [
            {
              "expression": "registration_source",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_conversion_user_id": {
          "name": "idx_conversion_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "conversion_events_user_id_fkey": {
          "name": "conversion_events_user_id_fkey",
          "tableFrom": "conversion_events",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view own conversion events": {
          "name": "Users can view own conversion events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Service can insert conversion events": {
          "name": "Service can insert conversion events",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Admins can view all conversion events": {
          "name": "Admins can view all conversion events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.topics": {
      "name": "topics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "position_type": {
          "name": "position_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "topic_number": {
          "name": "topic_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "estimated_hours": {
          "name": "estimated_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 10
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "topics_position_type_topic_number_key": {
          "columns": [
            "position_type",
            "topic_number"
          ],
          "nullsNotDistinct": false,
          "name": "topics_position_type_topic_number_key"
        }
      },
      "checkConstraints": {
        "topics_difficulty_check": {
          "name": "topics_difficulty_check",
          "value": "difficulty = ANY (ARRAY['easy'::text, 'medium'::text, 'hard'::text, 'extreme'::text])"
        }
      },
      "policies": {
        "Enable read access for topics": {
          "name": "Enable read access for topics",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.problematic_questions_tracking": {
      "name": "problematic_questions_tracking",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "detection_type": {
          "name": "detection_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "failure_rate": {
          "name": "failure_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "abandonment_rate": {
          "name": "abandonment_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "users_affected": {
          "name": "users_affected",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_attempts": {
          "name": "total_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "resolved_by": {
          "name": "resolved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "admin_notes": {
          "name": "admin_notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_action": {
          "name": "resolution_action",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "redetection_threshold_users": {
          "name": "redetection_threshold_users",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 5
        },
        "detected_at": {
          "name": "detected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "problematic_questions_tracking_question_id_fkey": {
          "name": "problematic_questions_tracking_question_id_fkey",
          "tableFrom": "problematic_questions_tracking",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "problematic_questions_tracking_resolved_by_fkey": {
          "name": "problematic_questions_tracking_resolved_by_fkey",
          "tableFrom": "problematic_questions_tracking",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "resolved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_profiles": {
      "name": "user_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_language": {
          "name": "preferred_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'es'"
        },
        "study_goal": {
          "name": "study_goal",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 25
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "target_oposicion": {
          "name": "target_oposicion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "target_oposicion_data": {
          "name": "target_oposicion_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "first_oposicion_detected_at": {
          "name": "first_oposicion_detected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active_student": {
          "name": "is_active_student",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "first_test_completed_at": {
          "name": "first_test_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "plan_type": {
          "name": "plan_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'free'"
        },
        "registration_date": {
          "name": "registration_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "trial_end_date": {
          "name": "trial_end_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registration_source": {
          "name": "registration_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'organic'"
        },
        "requires_payment": {
          "name": "requires_payment",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "nickname": {
          "name": "nickname",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "age": {
          "name": "age",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "gender": {
          "name": "gender",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "daily_study_hours": {
          "name": "daily_study_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "onboarding_completed_at": {
          "name": "onboarding_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "ciudad": {
          "name": "ciudad",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "onboarding_skip_count": {
          "name": "onboarding_skip_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "onboarding_last_skip_at": {
          "name": "onboarding_last_skip_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "registration_ip": {
          "name": "registration_ip",
          "type": "varchar(45)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_user_profiles_active_student": {
          "name": "idx_user_profiles_active_student",
          "columns": [
            {
              "expression": "is_active_student",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active_student = true)",
          "with": {}
        },
        "idx_user_profiles_ciudad": {
          "name": "idx_user_profiles_ciudad",
          "columns": [
            {
              "expression": "ciudad",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_profiles_onboarding": {
          "name": "idx_user_profiles_onboarding",
          "columns": [
            {
              "expression": "onboarding_completed_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(onboarding_completed_at IS NOT NULL)",
          "with": {}
        },
        "idx_user_profiles_onboarding_skip": {
          "name": "idx_user_profiles_onboarding_skip",
          "columns": [
            {
              "expression": "onboarding_skip_count",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_profiles_target_oposicion": {
          "name": "idx_user_profiles_target_oposicion",
          "columns": [
            {
              "expression": "target_oposicion",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(target_oposicion IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_profiles_id_fkey": {
          "name": "user_profiles_id_fkey",
          "tableFrom": "user_profiles",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_profiles_email_key": {
          "columns": [
            "email"
          ],
          "nullsNotDistinct": false,
          "name": "user_profiles_email_key"
        }
      },
      "checkConstraints": {
        "user_profiles_daily_study_hours_check": {
          "name": "user_profiles_daily_study_hours_check",
          "value": "(daily_study_hours >= 0) AND (daily_study_hours <= 12)"
        },
        "user_profiles_gender_check": {
          "name": "user_profiles_gender_check",
          "value": "gender = ANY (ARRAY['male'::text, 'female'::text, 'other'::text, 'prefer_not_say'::text])"
        },
        "user_profiles_preferred_language_check": {
          "name": "user_profiles_preferred_language_check",
          "value": "preferred_language = ANY (ARRAY['es'::text, 'en'::text])"
        }
      },
      "policies": {
        "Users can insert their own profile": {
          "name": "Users can insert their own profile",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ],
          "withCheck": "(auth.uid() = id)"
        },
        "Users can update own profile": {
          "name": "Users can update own profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        },
        "Users can view own profile": {
          "name": "Users can view own profile",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Admins can view all profiles": {
          "name": "Admins can view all profiles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.telegram_session": {
      "name": "telegram_session",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "session_string": {
          "name": "session_string",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "phone_number": {
          "name": "phone_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "telegram_session_user_id_fkey": {
          "name": "telegram_session_user_id_fkey",
          "tableFrom": "telegram_session",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "telegram_session_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "telegram_session_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_progress": {
      "name": "user_progress",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "topic_id": {
          "name": "topic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_attempts": {
          "name": "total_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "correct_attempts": {
          "name": "correct_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_attempt_date": {
          "name": "last_attempt_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "accuracy_percentage": {
          "name": "accuracy_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "needs_review": {
          "name": "needs_review",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_progress_accuracy": {
          "name": "idx_user_progress_accuracy",
          "columns": [
            {
              "expression": "accuracy_percentage",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_progress_user_topic": {
          "name": "idx_user_progress_user_topic",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "topic_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_progress_article_id_fkey": {
          "name": "user_progress_article_id_fkey",
          "tableFrom": "user_progress",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_progress_law_id_fkey": {
          "name": "user_progress_law_id_fkey",
          "tableFrom": "user_progress",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_progress_topic_id_fkey": {
          "name": "user_progress_topic_id_fkey",
          "tableFrom": "user_progress",
          "tableTo": "topics",
          "schemaTo": "public",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_progress_user_id_fkey": {
          "name": "user_progress_user_id_fkey",
          "tableFrom": "user_progress",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_progress_user_id_topic_id_law_id_article_id_key": {
          "columns": [
            "user_id",
            "topic_id",
            "law_id",
            "article_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_progress_user_id_topic_id_law_id_article_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view own progress": {
          "name": "Users can view own progress",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own progress": {
          "name": "Users can insert own progress",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own progress": {
          "name": "Users can update own progress",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_recommendations": {
      "name": "user_recommendations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "recommendation_type": {
          "name": "recommendation_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "topic_id": {
          "name": "topic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "is_dismissed": {
          "name": "is_dismissed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_recommendations_article_id_fkey": {
          "name": "user_recommendations_article_id_fkey",
          "tableFrom": "user_recommendations",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_recommendations_topic_id_fkey": {
          "name": "user_recommendations_topic_id_fkey",
          "tableFrom": "user_recommendations",
          "tableTo": "topics",
          "schemaTo": "public",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_recommendations_user_id_fkey": {
          "name": "user_recommendations_user_id_fkey",
          "tableFrom": "user_recommendations",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "user_recommendations_priority_check": {
          "name": "user_recommendations_priority_check",
          "value": "priority = ANY (ARRAY[1, 2, 3, 4, 5])"
        },
        "user_recommendations_recommendation_type_check": {
          "name": "user_recommendations_recommendation_type_check",
          "value": "recommendation_type = ANY (ARRAY['review_topic'::text, 'review_article'::text, 'practice_more'::text, 'take_break'::text])"
        }
      },
      "policies": {
        "Users can view own recommendations": {
          "name": "Users can view own recommendations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can update own recommendations": {
          "name": "Users can update own recommendations",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.test_configurations": {
      "name": "test_configurations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "topic_id": {
          "name": "topic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_questions": {
          "name": "total_questions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 25
        },
        "question_distribution": {
          "name": "question_distribution",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"failed\":0,\"random\":25,\"correct\":0}'::jsonb"
        },
        "only_unseen_questions": {
          "name": "only_unseen_questions",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "times_used": {
          "name": "times_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_test_configs_user": {
          "name": "idx_test_configs_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "topic_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "test_configurations_topic_id_fkey": {
          "name": "test_configurations_topic_id_fkey",
          "tableFrom": "test_configurations",
          "tableTo": "topics",
          "schemaTo": "public",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "test_configurations_user_id_fkey": {
          "name": "test_configurations_user_id_fkey",
          "tableFrom": "test_configurations",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can manage own test configs": {
          "name": "Users can manage own test configs",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        }
      },
      "isRLSEnabled": true
    },
    "public.articles": {
      "name": "articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "section": {
          "name": "section",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "title_number": {
          "name": "title_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "chapter_number": {
          "name": "chapter_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "section_number": {
          "name": "section_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_modification_date": {
          "name": "last_modification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "verification_date": {
          "name": "verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "default": "CURRENT_DATE"
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_articles_structure": {
          "name": "idx_articles_structure",
          "columns": [
            {
              "expression": "law_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "title_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "chapter_number",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "articles_law_id_fkey": {
          "name": "articles_law_id_fkey",
          "tableFrom": "articles",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "articles_law_id_article_number_key": {
          "columns": [
            "law_id",
            "article_number"
          ],
          "nullsNotDistinct": false,
          "name": "articles_law_id_article_number_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Enable read access for articles": {
          "name": "Enable read access for articles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.topic_scope": {
      "name": "topic_scope",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "topic_id": {
          "name": "topic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_numbers": {
          "name": "article_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "title_numbers": {
          "name": "title_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "chapter_numbers": {
          "name": "chapter_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "include_full_title": {
          "name": "include_full_title",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "include_full_chapter": {
          "name": "include_full_chapter",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "weight": {
          "name": "weight",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_topic_scope_topic": {
          "name": "idx_topic_scope_topic",
          "columns": [
            {
              "expression": "topic_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "topic_scope_law_id_fkey": {
          "name": "topic_scope_law_id_fkey",
          "tableFrom": "topic_scope",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "topic_scope_topic_id_fkey": {
          "name": "topic_scope_topic_id_fkey",
          "tableFrom": "topic_scope",
          "tableTo": "topics",
          "schemaTo": "public",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Anyone can read topic scope": {
          "name": "Anyone can read topic scope",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        },
        "Enable read access for topic_scope": {
          "name": "Enable read access for topic_scope",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.ai_verification_results": {
      "name": "ai_verification_results",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "explanation": {
          "name": "explanation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "article_quote": {
          "name": "article_quote",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "suggested_fix": {
          "name": "suggested_fix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "correct_option_should_be": {
          "name": "correct_option_should_be",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_provider": {
          "name": "ai_provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ai_model": {
          "name": "ai_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "verified_by": {
          "name": "verified_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "fix_applied": {
          "name": "fix_applied",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "fix_applied_at": {
          "name": "fix_applied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "new_explanation": {
          "name": "new_explanation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "discarded": {
          "name": "discarded",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "discarded_at": {
          "name": "discarded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "article_ok": {
          "name": "article_ok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "answer_ok": {
          "name": "answer_ok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "explanation_ok": {
          "name": "explanation_ok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "correct_article_suggestion": {
          "name": "correct_article_suggestion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "explanation_fix": {
          "name": "explanation_fix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_ai_verification_article": {
          "name": "idx_ai_verification_article",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_verification_law": {
          "name": "idx_ai_verification_law",
          "columns": [
            {
              "expression": "law_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_verification_question": {
          "name": "idx_ai_verification_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_verification_results_article_id_fkey": {
          "name": "ai_verification_results_article_id_fkey",
          "tableFrom": "ai_verification_results",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_verification_results_law_id_fkey": {
          "name": "ai_verification_results_law_id_fkey",
          "tableFrom": "ai_verification_results",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_verification_results_question_id_fkey": {
          "name": "ai_verification_results_question_id_fkey",
          "tableFrom": "ai_verification_results",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "ai_verification_results_verified_by_fkey": {
          "name": "ai_verification_results_verified_by_fkey",
          "tableFrom": "ai_verification_results",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "verified_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ai_verification_results_question_id_ai_provider_key": {
          "columns": [
            "question_id",
            "ai_provider"
          ],
          "nullsNotDistinct": false,
          "name": "ai_verification_results_question_id_ai_provider_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_feedback": {
      "name": "user_feedback",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "url": {
          "name": "url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "viewport": {
          "name": "viewport",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer": {
          "name": "referrer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screenshot_url": {
          "name": "screenshot_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "priority": {
          "name": "priority",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "admin_response": {
          "name": "admin_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_user_id": {
          "name": "admin_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "wants_response": {
          "name": "wants_response",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_feedback_admin_user_id_fkey": {
          "name": "user_feedback_admin_user_id_fkey",
          "tableFrom": "user_feedback",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "admin_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_feedback_user_id_fkey": {
          "name": "user_feedback_user_id_fkey",
          "tableFrom": "user_feedback",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.question_articles": {
      "name": "question_articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "relevance": {
          "name": "relevance",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'primary'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "is_primary": {
          "name": "is_primary",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_question_articles_primary": {
          "name": "idx_question_articles_primary",
          "columns": [
            {
              "expression": "is_primary",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "question_articles_article_id_fkey": {
          "name": "question_articles_article_id_fkey",
          "tableFrom": "question_articles",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "question_articles_question_id_fkey": {
          "name": "question_articles_question_id_fkey",
          "tableFrom": "question_articles",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "question_articles_question_id_article_id_key": {
          "columns": [
            "question_id",
            "article_id"
          ],
          "nullsNotDistinct": false,
          "name": "question_articles_question_id_article_id_key"
        }
      },
      "checkConstraints": {
        "question_articles_relevance_check": {
          "name": "question_articles_relevance_check",
          "value": "relevance = ANY (ARRAY['primary'::text, 'secondary'::text, 'reference'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.convocatorias": {
      "name": "convocatorias",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "oposicion_id": {
          "name": "oposicion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "ao": {
          "name": "ao",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "fecha_examen": {
          "name": "fecha_examen",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "tipo_examen": {
          "name": "tipo_examen",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'ordinaria'"
        },
        "boe_numero": {
          "name": "boe_numero",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "boe_fecha": {
          "name": "boe_fecha",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "plazas_convocadas": {
          "name": "plazas_convocadas",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "observaciones": {
          "name": "observaciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_convocatorias_oposicion_ao": {
          "name": "idx_convocatorias_oposicion_ao",
          "columns": [
            {
              "expression": "oposicion_id",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "ao",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "convocatorias_oposicion_id_fkey": {
          "name": "convocatorias_oposicion_id_fkey",
          "tableFrom": "convocatorias",
          "tableTo": "oposiciones",
          "schemaTo": "public",
          "columnsFrom": [
            "oposicion_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "convocatorias_oposicion_id_ao_tipo_examen_key": {
          "columns": [
            "oposicion_id",
            "ao",
            "tipo_examen"
          ],
          "nullsNotDistinct": false,
          "name": "convocatorias_oposicion_id_ao_tipo_examen_key"
        }
      },
      "checkConstraints": {
        "convocatorias_ao_check": {
          "name": "convocatorias_ao_check",
          "value": "(\"ao\" >= 2000) AND (\"ao\" <= 2030)"
        },
        "convocatorias_tipo_examen_check": {
          "name": "convocatorias_tipo_examen_check",
          "value": "tipo_examen = ANY (ARRAY['ordinaria'::text, 'extraordinaria'::text, 'estabilizacion'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_roles": {
      "name": "user_roles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "granted_at": {
          "name": "granted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "granted_by": {
          "name": "granted_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_roles_granted_at": {
          "name": "idx_user_roles_granted_at",
          "columns": [
            {
              "expression": "granted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_roles_role_active": {
          "name": "idx_user_roles_role_active",
          "columns": [
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_roles_unique_active": {
          "name": "idx_user_roles_unique_active",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "role",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_user_roles_user_id_active": {
          "name": "idx_user_roles_user_id_active",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_roles_granted_by_fkey": {
          "name": "user_roles_granted_by_fkey",
          "tableFrom": "user_roles",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "granted_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_roles_user_id_fkey": {
          "name": "user_roles_user_id_fkey",
          "tableFrom": "user_roles",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "user_roles_role_check": {
          "name": "user_roles_role_check",
          "value": "role = ANY (ARRAY['user'::text, 'admin'::text, 'super_admin'::text])"
        }
      },
      "policies": {
        "Users can view their own roles": {
          "name": "Users can view their own roles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(user_id = auth.uid())"
        },
        "Admins can view all roles": {
          "name": "Admins can view all roles",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        },
        "Only admins can manage roles": {
          "name": "Only admins can manage roles",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.articulos_examenes": {
      "name": "articulos_examenes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "convocatoria_id": {
          "name": "convocatoria_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "frecuencia_aparicion": {
          "name": "frecuencia_aparicion",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "tipo_pregunta": {
          "name": "tipo_pregunta",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "puntos_pregunta": {
          "name": "puntos_pregunta",
          "type": "numeric(4, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "observaciones": {
          "name": "observaciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_articulos_examenes_article": {
          "name": "idx_articulos_examenes_article",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_articulos_examenes_convocatoria": {
          "name": "idx_articulos_examenes_convocatoria",
          "columns": [
            {
              "expression": "convocatoria_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "articulos_examenes_article_id_fkey": {
          "name": "articulos_examenes_article_id_fkey",
          "tableFrom": "articulos_examenes",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "articulos_examenes_convocatoria_id_fkey": {
          "name": "articulos_examenes_convocatoria_id_fkey",
          "tableFrom": "articulos_examenes",
          "tableTo": "convocatorias",
          "schemaTo": "public",
          "columnsFrom": [
            "convocatoria_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "articulos_examenes_convocatoria_id_article_id_key": {
          "columns": [
            "convocatoria_id",
            "article_id"
          ],
          "nullsNotDistinct": false,
          "name": "articulos_examenes_convocatoria_id_article_id_key"
        }
      },
      "checkConstraints": {
        "articulos_examenes_tipo_pregunta_check": {
          "name": "articulos_examenes_tipo_pregunta_check",
          "value": "tipo_pregunta = ANY (ARRAY['teorica'::text, 'practica'::text, 'caso'::text, 'test'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.oposicion_topics": {
      "name": "oposicion_topics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "oposicion_id": {
          "name": "oposicion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "topic_id": {
          "name": "topic_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "peso_examen": {
          "name": "peso_examen",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "es_tema_principal": {
          "name": "es_tema_principal",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "observaciones": {
          "name": "observaciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "oposicion_topics_oposicion_id_fkey": {
          "name": "oposicion_topics_oposicion_id_fkey",
          "tableFrom": "oposicion_topics",
          "tableTo": "oposiciones",
          "schemaTo": "public",
          "columnsFrom": [
            "oposicion_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oposicion_topics_topic_id_fkey": {
          "name": "oposicion_topics_topic_id_fkey",
          "tableFrom": "oposicion_topics",
          "tableTo": "topics",
          "schemaTo": "public",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "oposicion_topics_oposicion_id_topic_id_key": {
          "columns": [
            "oposicion_id",
            "topic_id"
          ],
          "nullsNotDistinct": false,
          "name": "oposicion_topics_oposicion_id_topic_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.oposicion_articles": {
      "name": "oposicion_articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "oposicion_id": {
          "name": "oposicion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "importancia": {
          "name": "importancia",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'media'"
        },
        "observaciones": {
          "name": "observaciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "oposicion_articles_article_id_fkey": {
          "name": "oposicion_articles_article_id_fkey",
          "tableFrom": "oposicion_articles",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "oposicion_articles_oposicion_id_fkey": {
          "name": "oposicion_articles_oposicion_id_fkey",
          "tableFrom": "oposicion_articles",
          "tableTo": "oposiciones",
          "schemaTo": "public",
          "columnsFrom": [
            "oposicion_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "oposicion_articles_oposicion_id_article_id_key": {
          "columns": [
            "oposicion_id",
            "article_id"
          ],
          "nullsNotDistinct": false,
          "name": "oposicion_articles_oposicion_id_article_id_key"
        }
      },
      "checkConstraints": {
        "oposicion_articles_importancia_check": {
          "name": "oposicion_articles_importancia_check",
          "value": "importancia = ANY (ARRAY['baja'::text, 'media'::text, 'alta'::text, 'critica'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.preguntas_examenes_oficiales": {
      "name": "preguntas_examenes_oficiales",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "convocatoria_id": {
          "name": "convocatoria_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "numero_pregunta": {
          "name": "numero_pregunta",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "parte_examen": {
          "name": "parte_examen",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pregunta_text": {
          "name": "pregunta_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "opcion_a": {
          "name": "opcion_a",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "opcion_b": {
          "name": "opcion_b",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "opcion_c": {
          "name": "opcion_c",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "opcion_d": {
          "name": "opcion_d",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "respuesta_correcta": {
          "name": "respuesta_correcta",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "topic_estimado": {
          "name": "topic_estimado",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "explicacion": {
          "name": "explicacion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fue_anulada": {
          "name": "fue_anulada",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "observaciones": {
          "name": "observaciones",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_preguntas_oficiales_article": {
          "name": "idx_preguntas_oficiales_article",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_preguntas_oficiales_convocatoria": {
          "name": "idx_preguntas_oficiales_convocatoria",
          "columns": [
            {
              "expression": "convocatoria_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_preguntas_oficiales_parte": {
          "name": "idx_preguntas_oficiales_parte",
          "columns": [
            {
              "expression": "parte_examen",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "preguntas_examenes_oficiales_article_id_fkey": {
          "name": "preguntas_examenes_oficiales_article_id_fkey",
          "tableFrom": "preguntas_examenes_oficiales",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "preguntas_examenes_oficiales_convocatoria_id_fkey": {
          "name": "preguntas_examenes_oficiales_convocatoria_id_fkey",
          "tableFrom": "preguntas_examenes_oficiales",
          "tableTo": "convocatorias",
          "schemaTo": "public",
          "columnsFrom": [
            "convocatoria_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "preguntas_examenes_oficiales_convocatoria_id_parte_examen_n_key": {
          "columns": [
            "convocatoria_id",
            "numero_pregunta",
            "parte_examen"
          ],
          "nullsNotDistinct": false,
          "name": "preguntas_examenes_oficiales_convocatoria_id_parte_examen_n_key"
        }
      },
      "checkConstraints": {
        "preguntas_examenes_oficiales_parte_examen_check": {
          "name": "preguntas_examenes_oficiales_parte_examen_check",
          "value": "parte_examen = ANY (ARRAY['organizacion_publica'::text, 'ofimatica'::text, 'psicotecnico'::text])"
        },
        "preguntas_examenes_oficiales_respuesta_correcta_check": {
          "name": "preguntas_examenes_oficiales_respuesta_correcta_check",
          "value": "respuesta_correcta = ANY (ARRAY['a'::text, 'b'::text, 'c'::text, 'd'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.law_versions": {
      "name": "law_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version_number": {
          "name": "version_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "consolidation_date": {
          "name": "consolidation_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "boe_number": {
          "name": "boe_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "boe_url": {
          "name": "boe_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "modification_type": {
          "name": "modification_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_verification_date": {
          "name": "source_verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "is_current_version": {
          "name": "is_current_version",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "law_versions_law_id_fkey": {
          "name": "law_versions_law_id_fkey",
          "tableFrom": "law_versions",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "law_versions_modification_type_check": {
          "name": "law_versions_modification_type_check",
          "value": "modification_type = ANY (ARRAY['promulgacion'::text, 'reforma'::text, 'consolidacion'::text, 'correccion'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.article_versions": {
      "name": "article_versions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "law_version_id": {
          "name": "law_version_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "version_number": {
          "name": "version_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "previous_content": {
          "name": "previous_content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "change_description": {
          "name": "change_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_date": {
          "name": "verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true,
          "default": "CURRENT_DATE"
        },
        "is_current_version": {
          "name": "is_current_version",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "article_versions_article_id_fkey": {
          "name": "article_versions_article_id_fkey",
          "tableFrom": "article_versions",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "article_versions_law_version_id_fkey": {
          "name": "article_versions_law_version_id_fkey",
          "tableFrom": "article_versions",
          "tableTo": "law_versions",
          "schemaTo": "public",
          "columnsFrom": [
            "law_version_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.legal_modifications": {
      "name": "legal_modifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_version_id": {
          "name": "law_version_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_numbers": {
          "name": "article_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "modification_date": {
          "name": "modification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "modification_law": {
          "name": "modification_law",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "boe_reference": {
          "name": "boe_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "impact_level": {
          "name": "impact_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "full_description": {
          "name": "full_description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "legal_modifications_law_version_id_fkey": {
          "name": "legal_modifications_law_version_id_fkey",
          "tableFrom": "legal_modifications",
          "tableTo": "law_versions",
          "schemaTo": "public",
          "columnsFrom": [
            "law_version_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "legal_modifications_impact_level_check": {
          "name": "legal_modifications_impact_level_check",
          "value": "impact_level = ANY (ARRAY['mayor'::text, 'menor'::text, 'tecnica'::text, 'correccion'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.test_questions": {
      "name": "test_questions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "test_id": {
          "name": "test_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "question_order": {
          "name": "question_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_answer": {
          "name": "user_answer",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "correct_answer": {
          "name": "correct_answer",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "confidence_level": {
          "name": "confidence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "time_spent_seconds": {
          "name": "time_spent_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "time_to_first_interaction": {
          "name": "time_to_first_interaction",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "time_hesitation": {
          "name": "time_hesitation",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "interaction_count": {
          "name": "interaction_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "law_name": {
          "name": "law_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tema_number": {
          "name": "tema_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "question_type": {
          "name": "question_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "previous_attempts_this_article": {
          "name": "previous_attempts_this_article",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "historical_accuracy_this_article": {
          "name": "historical_accuracy_this_article",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "knowledge_retention_score": {
          "name": "knowledge_retention_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "learning_efficiency_score": {
          "name": "learning_efficiency_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screen_resolution": {
          "name": "screen_resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_type": {
          "name": "device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_language": {
          "name": "browser_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_question_context": {
          "name": "full_question_context",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "user_behavior_data": {
          "name": "user_behavior_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "learning_analytics": {
          "name": "learning_analytics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_test_questions_article_performance": {
          "name": "idx_test_questions_article_performance",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_confidence_accuracy": {
          "name": "idx_test_questions_confidence_accuracy",
          "columns": [
            {
              "expression": "confidence_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_created_at": {
          "name": "idx_test_questions_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_difficulty_time": {
          "name": "idx_test_questions_difficulty_time",
          "columns": [
            {
              "expression": "difficulty",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "time_spent_seconds",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_question_user": {
          "name": "idx_test_questions_question_user",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "test_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_tema_stats": {
          "name": "idx_test_questions_tema_stats",
          "columns": [
            {
              "expression": "tema_number",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_test_questions_test_id": {
          "name": "idx_test_questions_test_id",
          "columns": [
            {
              "expression": "test_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "test_questions_article_id_fkey": {
          "name": "test_questions_article_id_fkey",
          "tableFrom": "test_questions",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "test_questions_question_id_fkey": {
          "name": "test_questions_question_id_fkey",
          "tableFrom": "test_questions",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "test_questions_test_id_fkey": {
          "name": "test_questions_test_id_fkey",
          "tableFrom": "test_questions",
          "tableTo": "tests",
          "schemaTo": "public",
          "columnsFrom": [
            "test_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_test_question": {
          "columns": [
            "test_id",
            "question_order"
          ],
          "nullsNotDistinct": false,
          "name": "unique_test_question"
        }
      },
      "checkConstraints": {
        "check_confidence_level": {
          "name": "check_confidence_level",
          "value": "confidence_level = ANY (ARRAY['very_sure'::text, 'sure'::text, 'unsure'::text, 'guessing'::text, 'unknown'::text])"
        },
        "check_device_type": {
          "name": "check_device_type",
          "value": "device_type = ANY (ARRAY['mobile'::text, 'tablet'::text, 'desktop'::text, 'unknown'::text])"
        },
        "check_difficulty": {
          "name": "check_difficulty",
          "value": "difficulty = ANY (ARRAY['easy'::text, 'medium'::text, 'hard'::text, 'extreme'::text])"
        }
      },
      "policies": {
        "Users can insert their own test answers": {
          "name": "Users can insert their own test answers",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(test_id IN ( SELECT tests.id\n   FROM tests\n  WHERE (tests.user_id = auth.uid())))"
        },
        "Users can view their own test answers": {
          "name": "Users can view their own test answers",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can update their own test answers": {
          "name": "Users can update their own test answers",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.verification_schedule": {
      "name": "verification_schedule",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "verification_frequency": {
          "name": "verification_frequency",
          "type": "interval",
          "primaryKey": false,
          "notNull": true,
          "default": "'3 mons'"
        },
        "last_verification_date": {
          "name": "last_verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "next_verification_date": {
          "name": "next_verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "verification_source": {
          "name": "verification_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verification_status": {
          "name": "verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notes": {
          "name": "notes",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "verification_schedule_law_id_fkey": {
          "name": "verification_schedule_law_id_fkey",
          "tableFrom": "verification_schedule",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "verification_schedule_verification_status_check": {
          "name": "verification_schedule_verification_status_check",
          "value": "verification_status = ANY (ARRAY['pendiente'::text, 'en_proceso'::text, 'completada'::text, 'error'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_test_sessions": {
      "name": "user_test_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "tema_number": {
          "name": "tema_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "test_number": {
          "name": "test_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "score": {
          "name": "score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "total_questions": {
          "name": "total_questions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "time_seconds": {
          "name": "time_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "questions_answered": {
          "name": "questions_answered",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "failed_questions": {
          "name": "failed_questions",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{RAY}'"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_test_sessions_completed": {
          "name": "idx_user_test_sessions_completed",
          "columns": [
            {
              "expression": "completed_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_test_sessions_tema": {
          "name": "idx_user_test_sessions_tema",
          "columns": [
            {
              "expression": "tema_number",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_test_sessions_user_id": {
          "name": "idx_user_test_sessions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_test_sessions_user_id_fkey": {
          "name": "user_test_sessions_user_id_fkey",
          "tableFrom": "user_test_sessions",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view their own test sessions": {
          "name": "Users can view their own test sessions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert their own test sessions": {
          "name": "Users can insert their own test sessions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update their own test sessions": {
          "name": "Users can update their own test sessions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.feedback_conversations": {
      "name": "feedback_conversations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "feedback_id": {
          "name": "feedback_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "admin_user_id": {
          "name": "admin_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'open'"
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "admin_viewed_at": {
          "name": "admin_viewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_feedback_conversations_admin_viewed": {
          "name": "idx_feedback_conversations_admin_viewed",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "admin_viewed_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(admin_viewed_at IS NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "feedback_conversations_admin_user_id_fkey": {
          "name": "feedback_conversations_admin_user_id_fkey",
          "tableFrom": "feedback_conversations",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "admin_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "feedback_conversations_feedback_id_fkey": {
          "name": "feedback_conversations_feedback_id_fkey",
          "tableFrom": "feedback_conversations",
          "tableTo": "user_feedback",
          "schemaTo": "public",
          "columnsFrom": [
            "feedback_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "feedback_conversations_user_id_fkey": {
          "name": "feedback_conversations_user_id_fkey",
          "tableFrom": "feedback_conversations",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.article_exam_stats": {
      "name": "article_exam_stats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "oposicion_id": {
          "name": "oposicion_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_appearances": {
          "name": "total_appearances",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "years_appeared": {
          "name": "years_appeared",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{RAY}'"
        },
        "first_appearance": {
          "name": "first_appearance",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "last_appearance": {
          "name": "last_appearance",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "classification": {
          "name": "classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_message": {
          "name": "user_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_table": {
          "name": "source_table",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'migrated'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_article_exam_stats_article": {
          "name": "idx_article_exam_stats_article",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_article_exam_stats_classification": {
          "name": "idx_article_exam_stats_classification",
          "columns": [
            {
              "expression": "classification",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_article_exam_stats_oposicion": {
          "name": "idx_article_exam_stats_oposicion",
          "columns": [
            {
              "expression": "oposicion_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "article_exam_stats_article_id_fkey": {
          "name": "article_exam_stats_article_id_fkey",
          "tableFrom": "article_exam_stats",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "article_exam_stats_oposicion_id_fkey": {
          "name": "article_exam_stats_oposicion_id_fkey",
          "tableFrom": "article_exam_stats",
          "tableTo": "oposiciones",
          "schemaTo": "public",
          "columnsFrom": [
            "oposicion_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "article_exam_stats_article_id_oposicion_id_key": {
          "columns": [
            "article_id",
            "oposicion_id"
          ],
          "nullsNotDistinct": false,
          "name": "article_exam_stats_article_id_oposicion_id_key"
        }
      },
      "checkConstraints": {
        "article_exam_stats_classification_check": {
          "name": "article_exam_stats_classification_check",
          "value": "classification = ANY (ARRAY['VERY_FREQUENT'::text, 'FREQUENT'::text, 'OCCASIONAL'::text, 'NEVER'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_sessions": {
      "name": "user_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "session_token": {
          "name": "session_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_fingerprint": {
          "name": "device_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screen_resolution": {
          "name": "screen_resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "viewport_size": {
          "name": "viewport_size",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_name": {
          "name": "browser_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_version": {
          "name": "browser_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "operating_system": {
          "name": "operating_system",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_model": {
          "name": "device_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_language": {
          "name": "browser_language",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color_depth": {
          "name": "color_depth",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "pixel_ratio": {
          "name": "pixel_ratio",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "region": {
          "name": "region",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "city": {
          "name": "city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coordinates": {
          "name": "coordinates",
          "type": "point",
          "primaryKey": false,
          "notNull": false
        },
        "isp": {
          "name": "isp",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "connection_type": {
          "name": "connection_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_start": {
          "name": "session_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "session_end": {
          "name": "session_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "total_duration_minutes": {
          "name": "total_duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "active_time_minutes": {
          "name": "active_time_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "idle_time_minutes": {
          "name": "idle_time_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "pages_visited": {
          "name": "pages_visited",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "page_view_count": {
          "name": "page_view_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "tests_attempted": {
          "name": "tests_attempted",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "tests_completed": {
          "name": "tests_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "questions_answered": {
          "name": "questions_answered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "questions_correct": {
          "name": "questions_correct",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "topics_studied": {
          "name": "topics_studied",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "time_spent_studying_minutes": {
          "name": "time_spent_studying_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "entry_page": {
          "name": "entry_page",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exit_page": {
          "name": "exit_page",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer_url": {
          "name": "referrer_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_source": {
          "name": "utm_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_campaign": {
          "name": "utm_campaign",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "utm_medium": {
          "name": "utm_medium",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "search_queries": {
          "name": "search_queries",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "navigation_pattern": {
          "name": "navigation_pattern",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "click_count": {
          "name": "click_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "scroll_depth_max": {
          "name": "scroll_depth_max",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "form_interactions": {
          "name": "form_interactions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "search_interactions": {
          "name": "search_interactions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "download_actions": {
          "name": "download_actions",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "engagement_score": {
          "name": "engagement_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "interaction_rate": {
          "name": "interaction_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "content_consumption_rate": {
          "name": "content_consumption_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "bounce_indicator": {
          "name": "bounce_indicator",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "conversion_events": {
          "name": "conversion_events",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "learning_session_type": {
          "name": "learning_session_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_goal": {
          "name": "session_goal",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_outcome": {
          "name": "session_outcome",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "satisfaction_indicator": {
          "name": "satisfaction_indicator",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "technical_details": {
          "name": "technical_details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "interaction_events": {
          "name": "interaction_events",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "performance_metrics": {
          "name": "performance_metrics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "accessibility_data": {
          "name": "accessibility_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_sessions_behavior": {
          "name": "idx_user_sessions_behavior",
          "columns": [
            {
              "expression": "navigation_pattern",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_user_sessions_date": {
          "name": "idx_user_sessions_date",
          "columns": [
            {
              "expression": "session_start",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_sessions_device": {
          "name": "idx_user_sessions_device",
          "columns": [
            {
              "expression": "device_model",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "operating_system",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_sessions_duration": {
          "name": "idx_user_sessions_duration",
          "columns": [
            {
              "expression": "total_duration_minutes",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_sessions_engagement": {
          "name": "idx_user_sessions_engagement",
          "columns": [
            {
              "expression": "engagement_score",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_sessions_learning_type": {
          "name": "idx_user_sessions_learning_type",
          "columns": [
            {
              "expression": "learning_session_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_sessions_performance": {
          "name": "idx_user_sessions_performance",
          "columns": [
            {
              "expression": "performance_metrics",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_user_sessions_user_id": {
          "name": "idx_user_sessions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_sessions_session_token_key": {
          "columns": [
            "session_token"
          ],
          "nullsNotDistinct": false,
          "name": "user_sessions_session_token_key"
        }
      },
      "checkConstraints": {
        "check_engagement_score": {
          "name": "check_engagement_score",
          "value": "(engagement_score >= (0)::numeric) AND (engagement_score <= (100)::numeric)"
        },
        "check_learning_session_type": {
          "name": "check_learning_session_type",
          "value": "learning_session_type = ANY (ARRAY['practice'::text, 'review'::text, 'exploration'::text, 'focused_study'::text, 'exam_prep'::text])"
        },
        "check_satisfaction_indicator": {
          "name": "check_satisfaction_indicator",
          "value": "satisfaction_indicator = ANY (ARRAY['positive'::text, 'neutral'::text, 'negative'::text, 'unknown'::text])"
        },
        "check_scroll_depth": {
          "name": "check_scroll_depth",
          "value": "(scroll_depth_max >= (0)::numeric) AND (scroll_depth_max <= (100)::numeric)"
        }
      },
      "policies": {
        "Users can view their own sessions": {
          "name": "Users can view their own sessions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(user_id = auth.uid())"
        },
        "Users can insert their own sessions": {
          "name": "Users can insert their own sessions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update their own sessions": {
          "name": "Users can update their own sessions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.user_learning_analytics": {
      "name": "user_learning_analytics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "total_tests_completed": {
          "name": "total_tests_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_questions_answered": {
          "name": "total_questions_answered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "overall_accuracy": {
          "name": "overall_accuracy",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "total_study_time_hours": {
          "name": "total_study_time_hours",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "current_streak_days": {
          "name": "current_streak_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "longest_streak_days": {
          "name": "longest_streak_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "law_name": {
          "name": "law_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tema_number": {
          "name": "tema_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "oposicion_type": {
          "name": "oposicion_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "mastery_level": {
          "name": "mastery_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'beginner'"
        },
        "mastery_score": {
          "name": "mastery_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "confidence_score": {
          "name": "confidence_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "consistency_score": {
          "name": "consistency_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "learning_style": {
          "name": "learning_style",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'unknown'"
        },
        "optimal_session_duration_minutes": {
          "name": "optimal_session_duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 25
        },
        "retention_rate": {
          "name": "retention_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "improvement_velocity": {
          "name": "improvement_velocity",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "fatigue_threshold_minutes": {
          "name": "fatigue_threshold_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 60
        },
        "peak_performance_hours": {
          "name": "peak_performance_hours",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'"
        },
        "worst_performance_hours": {
          "name": "worst_performance_hours",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'"
        },
        "optimal_study_frequency_days": {
          "name": "optimal_study_frequency_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 3
        },
        "best_day_of_week": {
          "name": "best_day_of_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "current_weak_areas": {
          "name": "current_weak_areas",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "recommended_focus_articles": {
          "name": "recommended_focus_articles",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "predicted_exam_readiness": {
          "name": "predicted_exam_readiness",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "estimated_hours_to_mastery": {
          "name": "estimated_hours_to_mastery",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "next_review_date": {
          "name": "next_review_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "article_performance_history": {
          "name": "article_performance_history",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "difficulty_progression": {
          "name": "difficulty_progression",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "time_efficiency_trends": {
          "name": "time_efficiency_trends",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "error_pattern_analysis": {
          "name": "error_pattern_analysis",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "last_analysis_date": {
          "name": "last_analysis_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "analysis_confidence": {
          "name": "analysis_confidence",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "data_points_count": {
          "name": "data_points_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "algorithm_version": {
          "name": "algorithm_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_analytics_article": {
          "name": "idx_user_analytics_article",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "mastery_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_analytics_learning_style": {
          "name": "idx_user_analytics_learning_style",
          "columns": [
            {
              "expression": "learning_style",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_analytics_mastery": {
          "name": "idx_user_analytics_mastery",
          "columns": [
            {
              "expression": "mastery_level",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            },
            {
              "expression": "predicted_exam_readiness",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_analytics_performance": {
          "name": "idx_user_analytics_performance",
          "columns": [
            {
              "expression": "article_performance_history",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_user_analytics_tema": {
          "name": "idx_user_analytics_tema",
          "columns": [
            {
              "expression": "tema_number",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "oposicion_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_analytics_user_id": {
          "name": "idx_user_analytics_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_learning_analytics_article_id_fkey": {
          "name": "user_learning_analytics_article_id_fkey",
          "tableFrom": "user_learning_analytics",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_user_article_oposicion": {
          "columns": [
            "user_id",
            "article_id",
            "oposicion_type"
          ],
          "nullsNotDistinct": false,
          "name": "unique_user_article_oposicion"
        }
      },
      "checkConstraints": {
        "check_exam_readiness": {
          "name": "check_exam_readiness",
          "value": "(predicted_exam_readiness >= (0)::numeric) AND (predicted_exam_readiness <= (100)::numeric)"
        },
        "check_learning_style": {
          "name": "check_learning_style",
          "value": "learning_style = ANY (ARRAY['visual'::text, 'analytical'::text, 'repetitive'::text, 'mixed'::text, 'unknown'::text])"
        },
        "check_mastery_level": {
          "name": "check_mastery_level",
          "value": "mastery_level = ANY (ARRAY['beginner'::text, 'intermediate'::text, 'advanced'::text, 'expert'::text])"
        }
      },
      "policies": {
        "Users can view their own analytics": {
          "name": "Users can view their own analytics",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(user_id = auth.uid())"
        },
        "Users can manage their own analytics": {
          "name": "Users can manage their own analytics",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": false
    },
    "public.feedback_messages": {
      "name": "feedback_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "conversation_id": {
          "name": "conversation_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "sender_id": {
          "name": "sender_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "is_admin": {
          "name": "is_admin",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "read_at": {
          "name": "read_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "feedback_messages_conversation_id_fkey": {
          "name": "feedback_messages_conversation_id_fkey",
          "tableFrom": "feedback_messages",
          "tableTo": "feedback_conversations",
          "schemaTo": "public",
          "columnsFrom": [
            "conversation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "feedback_messages_sender_id_fkey": {
          "name": "feedback_messages_sender_id_fkey",
          "tableFrom": "feedback_messages",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "sender_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.email_logs": {
      "name": "email_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'sent'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_email_logs_sent_at": {
          "name": "idx_email_logs_sent_at",
          "columns": [
            {
              "expression": "sent_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_logs_type": {
          "name": "idx_email_logs_type",
          "columns": [
            {
              "expression": "email_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_logs_user_id": {
          "name": "idx_email_logs_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_logs_user_id_fkey": {
          "name": "email_logs_user_id_fkey",
          "tableFrom": "email_logs",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "email_logs_status_check": {
          "name": "email_logs_status_check",
          "value": "status = ANY (ARRAY['sent'::text, 'delivered'::text, 'opened'::text, 'clicked'::text, 'bounced'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.trigger_logs": {
      "name": "trigger_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "old_difficulty": {
          "name": "old_difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "new_difficulty": {
          "name": "new_difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "success_rate": {
          "name": "success_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "total_attempts": {
          "name": "total_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty_score": {
          "name": "difficulty_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_time": {
          "name": "trigger_time",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.hot_articles": {
      "name": "hot_articles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "target_oposicion": {
          "name": "target_oposicion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "oposicion_level": {
          "name": "oposicion_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_official_appearances": {
          "name": "total_official_appearances",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "unique_exams_count": {
          "name": "unique_exams_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "hotness_score": {
          "name": "hotness_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "frequency_trend": {
          "name": "frequency_trend",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "priority_level": {
          "name": "priority_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "law_name": {
          "name": "law_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "article_title": {
          "name": "article_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "first_appearance_date": {
          "name": "first_appearance_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "last_appearance_date": {
          "name": "last_appearance_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "entities_breakdown": {
          "name": "entities_breakdown",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_calculation_date": {
          "name": "last_calculation_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "hot_articles_article_oposicion_unique": {
          "name": "hot_articles_article_oposicion_unique",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "target_oposicion",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hot_articles_article_id": {
          "name": "idx_hot_articles_article_id",
          "columns": [
            {
              "expression": "article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hot_articles_hotness_score": {
          "name": "idx_hot_articles_hotness_score",
          "columns": [
            {
              "expression": "hotness_score",
              "asc": false,
              "nulls": "first",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hot_articles_oposicion": {
          "name": "idx_hot_articles_oposicion",
          "columns": [
            {
              "expression": "target_oposicion",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "hot_articles_article_id_fkey": {
          "name": "hot_articles_article_id_fkey",
          "tableFrom": "hot_articles",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "hot_articles_law_id_fkey": {
          "name": "hot_articles_law_id_fkey",
          "tableFrom": "hot_articles",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "hot_articles_priority_level_check": {
          "name": "hot_articles_priority_level_check",
          "value": "priority_level = ANY (ARRAY['critical'::text, 'high'::text, 'medium'::text, 'low'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.email_preferences": {
      "name": "email_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email_reactivacion": {
          "name": "email_reactivacion",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "email_urgente": {
          "name": "email_urgente",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "email_bienvenida_motivacional": {
          "name": "email_bienvenida_motivacional",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "unsubscribed_all": {
          "name": "unsubscribed_all",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "unsubscribed_at": {
          "name": "unsubscribed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "email_bienvenida_inmediato": {
          "name": "email_bienvenida_inmediato",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "email_resumen_semanal": {
          "name": "email_resumen_semanal",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "email_preferences_user_id_fkey": {
          "name": "email_preferences_user_id_fkey",
          "tableFrom": "email_preferences",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "email_preferences_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "email_preferences_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can manage their own email preferences": {
          "name": "Users can manage their own email preferences",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        }
      },
      "isRLSEnabled": true
    },
    "public.email_unsubscribe_tokens": {
      "name": "email_unsubscribe_tokens",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "(now() + '30 days'::interval)"
        },
        "used_at": {
          "name": "used_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_email_unsubscribe_tokens_expires": {
          "name": "idx_email_unsubscribe_tokens_expires",
          "columns": [
            {
              "expression": "expires_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_unsubscribe_tokens_token": {
          "name": "idx_email_unsubscribe_tokens_token",
          "columns": [
            {
              "expression": "token",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_unsubscribe_tokens_user_id": {
          "name": "idx_email_unsubscribe_tokens_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_unsubscribe_tokens_user_id_fkey": {
          "name": "email_unsubscribe_tokens_user_id_fkey",
          "tableFrom": "email_unsubscribe_tokens",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "email_unsubscribe_tokens_token_key": {
          "columns": [
            "token"
          ],
          "nullsNotDistinct": false,
          "name": "email_unsubscribe_tokens_token_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_subscriptions": {
      "name": "user_subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "plan_type": {
          "name": "plan_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trial_start": {
          "name": "trial_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "trial_end": {
          "name": "trial_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "current_period_start": {
          "name": "current_period_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "current_period_end": {
          "name": "current_period_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cancel_at_period_end": {
          "name": "cancel_at_period_end",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_subscriptions_status": {
          "name": "idx_user_subscriptions_status",
          "columns": [
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_subscriptions_stripe_customer": {
          "name": "idx_user_subscriptions_stripe_customer",
          "columns": [
            {
              "expression": "stripe_customer_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_subscriptions_stripe_subscription": {
          "name": "idx_user_subscriptions_stripe_subscription",
          "columns": [
            {
              "expression": "stripe_subscription_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_subscriptions_user_id": {
          "name": "idx_user_subscriptions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_subscriptions_user_id_fkey": {
          "name": "user_subscriptions_user_id_fkey",
          "tableFrom": "user_subscriptions",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "user_subscriptions_plan_type_check": {
          "name": "user_subscriptions_plan_type_check",
          "value": "plan_type = ANY (ARRAY['trial'::text, 'premium_semester'::text, 'premium_annual'::text])"
        },
        "user_subscriptions_status_check": {
          "name": "user_subscriptions_status_check",
          "value": "status = ANY (ARRAY['trialing'::text, 'active'::text, 'canceled'::text, 'past_due'::text, 'unpaid'::text])"
        }
      },
      "policies": {
        "Users can view own subscriptions": {
          "name": "Users can view own subscriptions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(user_id = auth.uid())"
        },
        "Service role can manage subscriptions": {
          "name": "Service role can manage subscriptions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_question_history": {
      "name": "user_question_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "total_attempts": {
          "name": "total_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "correct_attempts": {
          "name": "correct_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "success_rate": {
          "name": "success_rate",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "personal_difficulty": {
          "name": "personal_difficulty",
          "type": "difficulty_level",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "first_attempt_at": {
          "name": "first_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "trend": {
          "name": "trend",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false,
          "default": "'stable'"
        },
        "trend_calculated_at": {
          "name": "trend_calculated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_question_history_difficulty": {
          "name": "idx_user_question_history_difficulty",
          "columns": [
            {
              "expression": "personal_difficulty",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_question_history_question_id": {
          "name": "idx_user_question_history_question_id",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_question_history_success_rate": {
          "name": "idx_user_question_history_success_rate",
          "columns": [
            {
              "expression": "success_rate",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_question_history_trend": {
          "name": "idx_user_question_history_trend",
          "columns": [
            {
              "expression": "trend",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_question_history_user_id": {
          "name": "idx_user_question_history_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_question_history_question_id_fkey": {
          "name": "user_question_history_question_id_fkey",
          "tableFrom": "user_question_history",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_question_history_user_id_fkey": {
          "name": "user_question_history_user_id_fkey",
          "tableFrom": "user_question_history",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_question_history_user_id_question_id_key": {
          "columns": [
            "user_id",
            "question_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_question_history_user_id_question_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view their own question history": {
          "name": "Users can view their own question history",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Allow trigger inserts for question history": {
          "name": "Allow trigger inserts for question history",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Allow trigger updates for question history": {
          "name": "Allow trigger updates for question history",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_difficulty_metrics": {
      "name": "user_difficulty_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "avg_personal_difficulty": {
          "name": "avg_personal_difficulty",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'2.50'"
        },
        "total_questions_attempted": {
          "name": "total_questions_attempted",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "questions_mastered": {
          "name": "questions_mastered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "questions_struggling": {
          "name": "questions_struggling",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "difficulty_improved_this_week": {
          "name": "difficulty_improved_this_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "difficulty_declined_this_week": {
          "name": "difficulty_declined_this_week",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_calculated_at": {
          "name": "last_calculated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_difficulty_metrics_user_id_fkey": {
          "name": "user_difficulty_metrics_user_id_fkey",
          "tableFrom": "user_difficulty_metrics",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_difficulty_metrics_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_difficulty_metrics_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view their own difficulty metrics": {
          "name": "Users can view their own difficulty metrics",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        }
      },
      "isRLSEnabled": true
    },
    "public.pwa_sessions": {
      "name": "pwa_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "session_start": {
          "name": "session_start",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "session_end": {
          "name": "session_end",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "session_duration_minutes": {
          "name": "session_duration_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "is_standalone": {
          "name": "is_standalone",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "pages_visited": {
          "name": "pages_visited",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "actions_performed": {
          "name": "actions_performed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        }
      },
      "indexes": {
        "idx_pwa_sessions_standalone": {
          "name": "idx_pwa_sessions_standalone",
          "columns": [
            {
              "expression": "is_standalone",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pwa_sessions_start": {
          "name": "idx_pwa_sessions_start",
          "columns": [
            {
              "expression": "session_start",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pwa_sessions_user_id": {
          "name": "idx_pwa_sessions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "pwa_sessions_user_id_fkey": {
          "name": "pwa_sessions_user_id_fkey",
          "tableFrom": "pwa_sessions",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view own PWA sessions": {
          "name": "Users can view own PWA sessions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own PWA sessions": {
          "name": "Users can insert own PWA sessions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own PWA sessions": {
          "name": "Users can update own PWA sessions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Service role can manage all PWA sessions": {
          "name": "Service role can manage all PWA sessions",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.pwa_events": {
      "name": "pwa_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "browser_info": {
          "name": "browser_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer": {
          "name": "referrer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "displaymode": {
          "name": "displaymode",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'browser'"
        },
        "confidence": {
          "name": "confidence",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'low'"
        },
        "displayMode": {
          "name": "displayMode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "detectionMethod": {
          "name": "detectionMethod",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "isStandalone": {
          "name": "isStandalone",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "installMethod": {
          "name": "installMethod",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_pwa_events_created_at": {
          "name": "idx_pwa_events_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamp_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pwa_events_type": {
          "name": "idx_pwa_events_type",
          "columns": [
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pwa_events_user_id": {
          "name": "idx_pwa_events_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "pwa_events_user_id_fkey": {
          "name": "pwa_events_user_id_fkey",
          "tableFrom": "pwa_events",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view own PWA events": {
          "name": "Users can view own PWA events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own PWA events": {
          "name": "Users can insert own PWA events",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Service role can manage all PWA events": {
          "name": "Service role can manage all PWA events",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_streaks": {
      "name": "user_streaks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "current_streak": {
          "name": "current_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "longest_streak": {
          "name": "longest_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_activity_date": {
          "name": "last_activity_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "streak_updated_at": {
          "name": "streak_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_streaks_current_streak": {
          "name": "idx_user_streaks_current_streak",
          "columns": [
            {
              "expression": "current_streak",
              "asc": false,
              "nulls": "first",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_streaks_user_id": {
          "name": "idx_user_streaks_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_streaks_user_id_fkey": {
          "name": "user_streaks_user_id_fkey",
          "tableFrom": "user_streaks",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_streaks_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_streaks_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view own streaks": {
          "name": "Users can view own streaks",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own streaks": {
          "name": "Users can insert own streaks",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own streaks": {
          "name": "Users can update own streaks",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Anyone can view all streaks for ranking": {
          "name": "Anyone can view all streaks for ranking",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can update own streak only": {
          "name": "Users can update own streak only",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.psychometric_categories": {
      "name": "psychometric_categories",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category_key": {
          "name": "category_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "has_sections": {
          "name": "has_sections",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "section_count": {
          "name": "section_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "psychometric_categories_category_key_key": {
          "columns": [
            "category_key"
          ],
          "nullsNotDistinct": false,
          "name": "psychometric_categories_category_key_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.psychometric_sections": {
      "name": "psychometric_sections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "section_key": {
          "name": "section_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "psychometric_sections_category_id_fkey": {
          "name": "psychometric_sections_category_id_fkey",
          "tableFrom": "psychometric_sections",
          "tableTo": "psychometric_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "psychometric_sections_category_id_section_key_key": {
          "columns": [
            "category_id",
            "section_key"
          ],
          "nullsNotDistinct": false,
          "name": "psychometric_sections_category_id_section_key_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.psychometric_questions": {
      "name": "psychometric_questions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "section_id": {
          "name": "section_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "question_subtype": {
          "name": "question_subtype",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_a": {
          "name": "option_a",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "option_b": {
          "name": "option_b",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "option_c": {
          "name": "option_c",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "option_d": {
          "name": "option_d",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "correct_option": {
          "name": "correct_option",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "content_data": {
          "name": "content_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "explanation": {
          "name": "explanation",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "solution_steps": {
          "name": "solution_steps",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "time_limit_seconds": {
          "name": "time_limit_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 120
        },
        "cognitive_skills": {
          "name": "cognitive_skills",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_verified": {
          "name": "is_verified",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "global_difficulty": {
          "name": "global_difficulty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty_sample_size": {
          "name": "difficulty_sample_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_difficulty_update": {
          "name": "last_difficulty_update",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_psychometric_questions_active": {
          "name": "idx_psychometric_questions_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_psychometric_questions_category": {
          "name": "idx_psychometric_questions_category",
          "columns": [
            {
              "expression": "category_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_questions_content_gin": {
          "name": "idx_psychometric_questions_content_gin",
          "columns": [
            {
              "expression": "content_data",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_psychometric_questions_difficulty": {
          "name": "idx_psychometric_questions_difficulty",
          "columns": [
            {
              "expression": "difficulty",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_questions_section": {
          "name": "idx_psychometric_questions_section",
          "columns": [
            {
              "expression": "section_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_questions_subtype": {
          "name": "idx_psychometric_questions_subtype",
          "columns": [
            {
              "expression": "question_subtype",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "psychometric_questions_category_id_fkey": {
          "name": "psychometric_questions_category_id_fkey",
          "tableFrom": "psychometric_questions",
          "tableTo": "psychometric_categories",
          "schemaTo": "public",
          "columnsFrom": [
            "category_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "psychometric_questions_section_id_fkey": {
          "name": "psychometric_questions_section_id_fkey",
          "tableFrom": "psychometric_questions",
          "tableTo": "psychometric_sections",
          "schemaTo": "public",
          "columnsFrom": [
            "section_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "psychometric_questions_correct_option_check": {
          "name": "psychometric_questions_correct_option_check",
          "value": "correct_option = ANY (ARRAY[0, 1, 2, 3])"
        },
        "psychometric_questions_difficulty_check": {
          "name": "psychometric_questions_difficulty_check",
          "value": "difficulty = ANY (ARRAY['easy'::text, 'medium'::text, 'hard'::text, 'expert'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_notification_settings": {
      "name": "user_notification_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "push_enabled": {
          "name": "push_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "push_subscription": {
          "name": "push_subscription",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_times": {
          "name": "preferred_times",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[\"09:00\",\"14:00\",\"20:00\"]'::jsonb"
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'Europe/Madrid'"
        },
        "frequency": {
          "name": "frequency",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'smart'"
        },
        "oposicion_type": {
          "name": "oposicion_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'auxiliar-administrativo'"
        },
        "exam_date": {
          "name": "exam_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "motivation_level": {
          "name": "motivation_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_notification_settings_push_enabled": {
          "name": "idx_user_notification_settings_push_enabled",
          "columns": [
            {
              "expression": "push_enabled",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_notification_settings_user_id": {
          "name": "idx_user_notification_settings_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_notification_settings_user_id_fkey": {
          "name": "user_notification_settings_user_id_fkey",
          "tableFrom": "user_notification_settings",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_notification_settings_user_id_unique": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_notification_settings_user_id_unique"
        }
      },
      "checkConstraints": {
        "user_notification_settings_frequency_check": {
          "name": "user_notification_settings_frequency_check",
          "value": "frequency = ANY (ARRAY['daily'::text, 'smart'::text, 'minimal'::text, 'off'::text])"
        },
        "user_notification_settings_motivation_level_check": {
          "name": "user_notification_settings_motivation_level_check",
          "value": "motivation_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'extreme'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_activity_patterns": {
      "name": "user_activity_patterns",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_hours": {
          "name": "preferred_hours",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{RAY[9,14,2}'"
        },
        "active_days": {
          "name": "active_days",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{RAY[1,2,3,4,5,6,}'"
        },
        "avg_session_duration": {
          "name": "avg_session_duration",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 15
        },
        "peak_performance_time": {
          "name": "peak_performance_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "streak_pattern": {
          "name": "streak_pattern",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_calculated": {
          "name": "last_calculated",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_activity_patterns_user_id": {
          "name": "idx_user_activity_patterns_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_activity_patterns_user_id_fkey": {
          "name": "user_activity_patterns_user_id_fkey",
          "tableFrom": "user_activity_patterns",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.notification_logs": {
      "name": "notification_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "message_sent": {
          "name": "message_sent",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message_variant": {
          "name": "message_variant",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "sent_at": {
          "name": "sent_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "scheduled_for": {
          "name": "scheduled_for",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "delivery_status": {
          "name": "delivery_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'sent'"
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "resulted_in_session": {
          "name": "resulted_in_session",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "session_started_at": {
          "name": "session_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "context_data": {
          "name": "context_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notification_logs_delivery_status": {
          "name": "idx_notification_logs_delivery_status",
          "columns": [
            {
              "expression": "delivery_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_logs_sent_at": {
          "name": "idx_notification_logs_sent_at",
          "columns": [
            {
              "expression": "sent_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_logs_template_id": {
          "name": "idx_notification_logs_template_id",
          "columns": [
            {
              "expression": "template_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_logs_user_id": {
          "name": "idx_notification_logs_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_logs_template_id_fkey": {
          "name": "notification_logs_template_id_fkey",
          "tableFrom": "notification_logs",
          "tableTo": "notification_templates",
          "schemaTo": "public",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "notification_logs_user_id_fkey": {
          "name": "notification_logs_user_id_fkey",
          "tableFrom": "notification_logs",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "notification_logs_delivery_status_check": {
          "name": "notification_logs_delivery_status_check",
          "value": "delivery_status = ANY (ARRAY['sent'::text, 'delivered'::text, 'failed'::text, 'clicked'::text, 'dismissed'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.notification_templates": {
      "name": "notification_templates",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subcategory": {
          "name": "subcategory",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_variants": {
          "name": "message_variants",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "target_conditions": {
          "name": "target_conditions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "oposicion_context": {
          "name": "oposicion_context",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "urgency_level": {
          "name": "urgency_level",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "success_metrics": {
          "name": "success_metrics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notification_templates_active": {
          "name": "idx_notification_templates_active",
          "columns": [
            {
              "expression": "active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_templates_category": {
          "name": "idx_notification_templates_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "notification_templates_urgency_level_check": {
          "name": "notification_templates_urgency_level_check",
          "value": "(urgency_level >= 1) AND (urgency_level <= 5)"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.notification_metrics": {
      "name": "notification_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "template_id": {
          "name": "template_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_segment": {
          "name": "user_segment",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "period_start": {
          "name": "period_start",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "period_end": {
          "name": "period_end",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "total_sent": {
          "name": "total_sent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_delivered": {
          "name": "total_delivered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_opened": {
          "name": "total_opened",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_clicked": {
          "name": "total_clicked",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_sessions_generated": {
          "name": "total_sessions_generated",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "avg_time_to_click": {
          "name": "avg_time_to_click",
          "type": "interval",
          "primaryKey": false,
          "notNull": false
        },
        "conversion_rate": {
          "name": "conversion_rate",
          "type": "numeric(5, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notification_metrics_period": {
          "name": "idx_notification_metrics_period",
          "columns": [
            {
              "expression": "period_start",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "period_end",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_metrics_template_id": {
          "name": "idx_notification_metrics_template_id",
          "columns": [
            {
              "expression": "template_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_metrics_template_id_fkey": {
          "name": "notification_metrics_template_id_fkey",
          "tableFrom": "notification_metrics",
          "tableTo": "notification_templates",
          "schemaTo": "public",
          "columnsFrom": [
            "template_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_smart_scheduling": {
      "name": "user_smart_scheduling",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "next_notification_time": {
          "name": "next_notification_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "notification_frequency_hours": {
          "name": "notification_frequency_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 24
        },
        "last_session_time": {
          "name": "last_session_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "streak_status": {
          "name": "streak_status",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "risk_level": {
          "name": "risk_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'low'"
        },
        "last_risk_calculation": {
          "name": "last_risk_calculation",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "pause_until": {
          "name": "pause_until",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_smart_scheduling_next_notification": {
          "name": "idx_user_smart_scheduling_next_notification",
          "columns": [
            {
              "expression": "next_notification_time",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_smart_scheduling_risk_level": {
          "name": "idx_user_smart_scheduling_risk_level",
          "columns": [
            {
              "expression": "risk_level",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_smart_scheduling_user_id": {
          "name": "idx_user_smart_scheduling_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_smart_scheduling_user_id_fkey": {
          "name": "user_smart_scheduling_user_id_fkey",
          "tableFrom": "user_smart_scheduling",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_smart_scheduling_user_id_unique": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_smart_scheduling_user_id_unique"
        }
      },
      "checkConstraints": {
        "user_smart_scheduling_risk_level_check": {
          "name": "user_smart_scheduling_risk_level_check",
          "value": "risk_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text, 'critical'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_medals": {
      "name": "user_medals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "medal_id": {
          "name": "medal_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "medal_data": {
          "name": "medal_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "unlocked_at": {
          "name": "unlocked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "viewed": {
          "name": "viewed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {
        "idx_user_medals_user_id": {
          "name": "idx_user_medals_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_medals_viewed": {
          "name": "idx_user_medals_viewed",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "viewed",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_medals_user_id_fkey": {
          "name": "user_medals_user_id_fkey",
          "tableFrom": "user_medals",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_medals_user_id_medal_id_key": {
          "columns": [
            "user_id",
            "medal_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_medals_user_id_medal_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view own medals": {
          "name": "Users can view own medals",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "(auth.uid() = user_id)"
        }
      },
      "isRLSEnabled": true
    },
    "public.question_disputes": {
      "name": "question_disputes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "dispute_type": {
          "name": "dispute_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pending'"
        },
        "admin_response": {
          "name": "admin_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "admin_user_id": {
          "name": "admin_user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "is_read": {
          "name": "is_read",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "appeal_text": {
          "name": "appeal_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "appeal_submitted_at": {
          "name": "appeal_submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_question_disputes_appeal_submitted": {
          "name": "idx_question_disputes_appeal_submitted",
          "columns": [
            {
              "expression": "appeal_submitted_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(appeal_text IS NOT NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "question_disputes_admin_user_id_fkey": {
          "name": "question_disputes_admin_user_id_fkey",
          "tableFrom": "question_disputes",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "admin_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "question_disputes_question_id_fkey": {
          "name": "question_disputes_question_id_fkey",
          "tableFrom": "question_disputes",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "question_disputes_user_id_fkey": {
          "name": "question_disputes_user_id_fkey",
          "tableFrom": "question_disputes",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "question_disputes_dispute_type_check": {
          "name": "question_disputes_dispute_type_check",
          "value": "dispute_type = ANY (ARRAY['no_literal'::text, 'respuesta_incorrecta'::text, 'otro'::text])"
        },
        "question_disputes_status_check": {
          "name": "question_disputes_status_check",
          "value": "status = ANY (ARRAY['pending'::text, 'reviewing'::text, 'resolved'::text, 'rejected'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_notification_metrics": {
      "name": "user_notification_metrics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "push_permission_status": {
          "name": "push_permission_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'not_requested'"
        },
        "push_subscriptions_count": {
          "name": "push_subscriptions_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "push_notifications_sent": {
          "name": "push_notifications_sent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "push_notifications_clicked": {
          "name": "push_notifications_clicked",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "push_notifications_dismissed": {
          "name": "push_notifications_dismissed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "push_click_rate": {
          "name": "push_click_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "last_push_interaction": {
          "name": "last_push_interaction",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "emails_sent": {
          "name": "emails_sent",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "emails_delivered": {
          "name": "emails_delivered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "emails_opened": {
          "name": "emails_opened",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "emails_clicked": {
          "name": "emails_clicked",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "emails_bounced": {
          "name": "emails_bounced",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "email_open_rate": {
          "name": "email_open_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "email_click_rate": {
          "name": "email_click_rate",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "last_email_opened": {
          "name": "last_email_opened",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_email_clicked": {
          "name": "last_email_clicked",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "primary_device_type": {
          "name": "primary_device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "primary_browser": {
          "name": "primary_browser",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "notification_engagement_score": {
          "name": "notification_engagement_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "email_engagement_score": {
          "name": "email_engagement_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "overall_engagement_score": {
          "name": "overall_engagement_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_notification_metrics_engagement": {
          "name": "idx_user_notification_metrics_engagement",
          "columns": [
            {
              "expression": "overall_engagement_score",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_notification_metrics_updated": {
          "name": "idx_user_notification_metrics_updated",
          "columns": [
            {
              "expression": "updated_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_notification_metrics_user_id": {
          "name": "idx_user_notification_metrics_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_notification_metrics_user_id_fkey": {
          "name": "user_notification_metrics_user_id_fkey",
          "tableFrom": "user_notification_metrics",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_notification_metrics_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_notification_metrics_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Admin can view all notification metrics": {
          "name": "Admin can view all notification metrics",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND ((user_profiles.plan_type = 'admin'::text) OR (user_profiles.email = 'ilovetestpro@gmail.com'::text)))))"
        },
        "Users can view own notification metrics": {
          "name": "Users can view own notification metrics",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Allow users to update own notification metrics": {
          "name": "Allow users to update own notification metrics",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Allow users to update notification metrics": {
          "name": "Allow users to update notification metrics",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.notification_events": {
      "name": "notification_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "notification_type": {
          "name": "notification_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "browser_info": {
          "name": "browser_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "push_subscription": {
          "name": "push_subscription",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "notification_data": {
          "name": "notification_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "response_time_ms": {
          "name": "response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "error_details": {
          "name": "error_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "referrer": {
          "name": "referrer",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_notification_events_created_at": {
          "name": "idx_notification_events_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_events_event_type": {
          "name": "idx_notification_events_event_type",
          "columns": [
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_events_type_date": {
          "name": "idx_notification_events_type_date",
          "columns": [
            {
              "expression": "notification_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_events_user_event": {
          "name": "idx_notification_events_user_event",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_notification_events_user_id": {
          "name": "idx_notification_events_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "notification_events_user_id_fkey": {
          "name": "notification_events_user_id_fkey",
          "tableFrom": "notification_events",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "notification_events_event_type_check": {
          "name": "notification_events_event_type_check",
          "value": "event_type = ANY (ARRAY['permission_requested'::text, 'permission_granted'::text, 'permission_denied'::text, 'subscription_created'::text, 'subscription_updated'::text, 'subscription_deleted'::text, 'notification_sent'::text, 'notification_delivered'::text, 'notification_clicked'::text, 'notification_dismissed'::text, 'notification_failed'::text, 'settings_updated'::text])"
        },
        "notification_events_notification_type_check": {
          "name": "notification_events_notification_type_check",
          "value": "notification_type = ANY (ARRAY['motivation'::text, 'streak_reminder'::text, 'achievement'::text, 'study_reminder'::text, 'reactivation'::text, 'urgent'::text, 'welcome'::text, 'test'::text])"
        }
      },
      "policies": {
        "Admin can view all notification events": {
          "name": "Admin can view all notification events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND ((user_profiles.plan_type = 'admin'::text) OR (user_profiles.email = 'ilovetestpro@gmail.com'::text)))))"
        },
        "Users can view own notification events": {
          "name": "Users can view own notification events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Allow insert notification events": {
          "name": "Allow insert notification events",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.custom_oposiciones": {
      "name": "custom_oposiciones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "nombre": {
          "name": "nombre",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "categoria": {
          "name": "categoria",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "administracion": {
          "name": "administracion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "descripcion": {
          "name": "descripcion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_public": {
          "name": "is_public",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "times_selected": {
          "name": "times_selected",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "created_by_username": {
          "name": "created_by_username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_custom_oposiciones_nombre": {
          "name": "idx_custom_oposiciones_nombre",
          "columns": [
            {
              "expression": "lower(nombre)",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_public = true) AND (is_active = true))",
          "with": {}
        },
        "idx_custom_oposiciones_popular": {
          "name": "idx_custom_oposiciones_popular",
          "columns": [
            {
              "expression": "times_selected",
              "asc": false,
              "nulls": "first",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "((is_public = true) AND (is_active = true))",
          "with": {}
        },
        "idx_custom_oposiciones_user_id": {
          "name": "idx_custom_oposiciones_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "custom_oposiciones_user_id_fkey": {
          "name": "custom_oposiciones_user_id_fkey",
          "tableFrom": "custom_oposiciones",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_user_custom_oposicion": {
          "columns": [
            "user_id",
            "nombre"
          ],
          "nullsNotDistinct": false,
          "name": "unique_user_custom_oposicion"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view own and public custom oposiciones": {
          "name": "Users can view own and public custom oposiciones",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((auth.uid() = user_id) OR (is_public = true))"
        },
        "Users can insert own custom oposiciones": {
          "name": "Users can insert own custom oposiciones",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own custom oposiciones": {
          "name": "Users can update own custom oposiciones",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can delete own custom oposiciones": {
          "name": "Users can delete own custom oposiciones",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.email_events": {
      "name": "email_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email_address": {
          "name": "email_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subject": {
          "name": "subject",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "template_id": {
          "name": "template_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "campaign_id": {
          "name": "campaign_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "email_content_preview": {
          "name": "email_content_preview",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "link_clicked": {
          "name": "link_clicked",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "click_count": {
          "name": "click_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "open_count": {
          "name": "open_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "device_type": {
          "name": "device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "client_name": {
          "name": "client_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "geolocation": {
          "name": "geolocation",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "error_details": {
          "name": "error_details",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_email_events_campaign": {
          "name": "idx_email_events_campaign",
          "columns": [
            {
              "expression": "campaign_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_created_at": {
          "name": "idx_email_events_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_email_address": {
          "name": "idx_email_events_email_address",
          "columns": [
            {
              "expression": "email_address",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_email_type": {
          "name": "idx_email_events_email_type",
          "columns": [
            {
              "expression": "email_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_event_type": {
          "name": "idx_email_events_event_type",
          "columns": [
            {
              "expression": "event_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_user_email_type": {
          "name": "idx_email_events_user_email_type",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "email_type",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_email_events_user_id": {
          "name": "idx_email_events_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "email_events_user_id_fkey": {
          "name": "email_events_user_id_fkey",
          "tableFrom": "email_events",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "email_events_user_id_user_profiles_fkey": {
          "name": "email_events_user_id_user_profiles_fkey",
          "tableFrom": "email_events",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "email_events_email_type_check": {
          "name": "email_events_email_type_check",
          "value": "email_type = ANY (ARRAY['welcome'::text, 'reactivation'::text, 'urgent_reactivation'::text, 'motivation'::text, 'achievement'::text, 'streak_danger'::text, 'newsletter'::text, 'system'::text, 'bienvenida_inmediato'::text, 'impugnacion_respuesta'::text, 'soporte_respuesta'::text])"
        },
        "email_events_event_type_check": {
          "name": "email_events_event_type_check",
          "value": "event_type = ANY (ARRAY['sent'::text, 'delivered'::text, 'opened'::text, 'clicked'::text, 'bounced'::text, 'complained'::text, 'unsubscribed'::text])"
        }
      },
      "policies": {
        "Admin can view all email events": {
          "name": "Admin can view all email events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM user_profiles\n  WHERE ((user_profiles.id = auth.uid()) AND ((user_profiles.plan_type = 'admin'::text) OR (user_profiles.email = 'ilovetestpro@gmail.com'::text)))))"
        },
        "Users can view own email events": {
          "name": "Users can view own email events",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Allow insert email events": {
          "name": "Allow insert email events",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_streaks_backup_20241208": {
      "name": "user_streaks_backup_20241208",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "current_streak": {
          "name": "current_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "longest_streak": {
          "name": "longest_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "last_activity_date": {
          "name": "last_activity_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "streak_updated_at": {
          "name": "streak_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "backup_date": {
          "name": "backup_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_psychometric_preferences": {
      "name": "user_psychometric_preferences",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "preferred_categories": {
          "name": "preferred_categories",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "default_test_length": {
          "name": "default_test_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 20
        },
        "preferred_difficulty": {
          "name": "preferred_difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'mixed'"
        },
        "preferred_time_limit": {
          "name": "preferred_time_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 120
        },
        "categories_mastered": {
          "name": "categories_mastered",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "weak_areas": {
          "name": "weak_areas",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "favorite_question_types": {
          "name": "favorite_question_types",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"\"}'"
        },
        "total_tests_completed": {
          "name": "total_tests_completed",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "best_category": {
          "name": "best_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "average_accuracy": {
          "name": "average_accuracy",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_psychometric_preferences_user_id_fkey": {
          "name": "user_psychometric_preferences_user_id_fkey",
          "tableFrom": "user_psychometric_preferences",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_psychometric_preferences_user_id_key": {
          "columns": [
            "user_id"
          ],
          "nullsNotDistinct": false,
          "name": "user_psychometric_preferences_user_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view own preferences": {
          "name": "Users can view own preferences",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own preferences": {
          "name": "Users can insert own preferences",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own preferences": {
          "name": "Users can update own preferences",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.tests": {
      "name": "tests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "test_type": {
          "name": "test_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'topic'"
        },
        "total_questions": {
          "name": "total_questions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "time_limit_minutes": {
          "name": "time_limit_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 60
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_completed": {
          "name": "is_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "score": {
          "name": "score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "total_time_seconds": {
          "name": "total_time_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "average_time_per_question": {
          "name": "average_time_per_question",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "tema_number": {
          "name": "tema_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "test_number": {
          "name": "test_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "detailed_analytics": {
          "name": "detailed_analytics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "questions_metadata": {
          "name": "questions_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "performance_metrics": {
          "name": "performance_metrics",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "user_session_data": {
          "name": "user_session_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "test_url": {
          "name": "test_url",
          "type": "varchar(500)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_tests_analytics": {
          "name": "idx_tests_analytics",
          "columns": [
            {
              "expression": "detailed_analytics",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_tests_completion_time": {
          "name": "idx_tests_completion_time",
          "columns": [
            {
              "expression": "completed_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_completed = true)",
          "with": {}
        },
        "idx_tests_id_user_id": {
          "name": "idx_tests_id_user_id",
          "columns": [
            {
              "expression": "id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_performance": {
          "name": "idx_tests_performance",
          "columns": [
            {
              "expression": "performance_metrics",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_tests_tema_number": {
          "name": "idx_tests_tema_number",
          "columns": [
            {
              "expression": "tema_number",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_tema_test": {
          "name": "idx_tests_tema_test",
          "columns": [
            {
              "expression": "tema_number",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            },
            {
              "expression": "test_number",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_test_url": {
          "name": "idx_tests_test_url",
          "columns": [
            {
              "expression": "test_url",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_user_completed": {
          "name": "idx_tests_user_completed",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_completed",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_user_created": {
          "name": "idx_tests_user_created",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_tests_user_id": {
          "name": "idx_tests_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "tests_user_id_fkey": {
          "name": "tests_user_id_fkey",
          "tableFrom": "tests",
          "tableTo": "user_profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "tests_test_type_check": {
          "name": "tests_test_type_check",
          "value": "test_type = ANY (ARRAY['practice'::text, 'exam'::text])"
        }
      },
      "policies": {
        "Users can view own tests": {
          "name": "Users can view own tests",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own tests": {
          "name": "Users can insert own tests",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own tests": {
          "name": "Users can update own tests",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Admins can view all tests": {
          "name": "Admins can view all tests",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.psychometric_test_sessions": {
      "name": "psychometric_test_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_type": {
          "name": "session_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'mixed_test'"
        },
        "categories_selected": {
          "name": "categories_selected",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": false
        },
        "sections_selected": {
          "name": "sections_selected",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": false
        },
        "total_questions": {
          "name": "total_questions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "time_limit_minutes": {
          "name": "time_limit_minutes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "questions_answered": {
          "name": "questions_answered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "correct_answers": {
          "name": "correct_answers",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "accuracy_percentage": {
          "name": "accuracy_percentage",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "average_time_per_question": {
          "name": "average_time_per_question",
          "type": "numeric(8, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "total_time_seconds": {
          "name": "total_time_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_completed": {
          "name": "is_completed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "cognitive_performance_score": {
          "name": "cognitive_performance_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "pattern_recognition_score": {
          "name": "pattern_recognition_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "logical_reasoning_score": {
          "name": "logical_reasoning_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "attention_score": {
          "name": "attention_score",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "session_metadata": {
          "name": "session_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "category_id": {
          "name": "category_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "questions_data": {
          "name": "questions_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "idx_psychometric_sessions_user_id": {
          "name": "idx_psychometric_sessions_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_test_sessions_completed": {
          "name": "idx_psychometric_test_sessions_completed",
          "columns": [
            {
              "expression": "is_completed",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_test_sessions_user": {
          "name": "idx_psychometric_test_sessions_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "psychometric_test_sessions_user_id_fkey": {
          "name": "psychometric_test_sessions_user_id_fkey",
          "tableFrom": "psychometric_test_sessions",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view own psychometric sessions": {
          "name": "Users can view own psychometric sessions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can update own psychometric sessions": {
          "name": "Users can update own psychometric sessions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can delete own psychometric sessions": {
          "name": "Users can delete own psychometric sessions",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Users can insert own psychometric sessions": {
          "name": "Users can insert own psychometric sessions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.psychometric_test_answers": {
      "name": "psychometric_test_answers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "test_session_id": {
          "name": "test_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_order": {
          "name": "question_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_answer": {
          "name": "user_answer",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "time_spent_seconds": {
          "name": "time_spent_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "hesitation_time": {
          "name": "hesitation_time",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "answer_changes_count": {
          "name": "answer_changes_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "confidence_level": {
          "name": "confidence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "question_subtype": {
          "name": "question_subtype",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cognitive_skills_tested": {
          "name": "cognitive_skills_tested",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "device_type": {
          "name": "device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "screen_resolution": {
          "name": "screen_resolution",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "time_taken_seconds": {
          "name": "time_taken_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "interaction_data": {
          "name": "interaction_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "answered_at": {
          "name": "answered_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_psychometric_answers_user_id": {
          "name": "idx_psychometric_answers_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_test_answers_question": {
          "name": "idx_psychometric_test_answers_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_test_answers_session": {
          "name": "idx_psychometric_test_answers_session",
          "columns": [
            {
              "expression": "test_session_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "psychometric_test_answers_question_id_fkey": {
          "name": "psychometric_test_answers_question_id_fkey",
          "tableFrom": "psychometric_test_answers",
          "tableTo": "psychometric_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "psychometric_test_answers_test_session_id_fkey": {
          "name": "psychometric_test_answers_test_session_id_fkey",
          "tableFrom": "psychometric_test_answers",
          "tableTo": "psychometric_test_sessions",
          "schemaTo": "public",
          "columnsFrom": [
            "test_session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "psychometric_test_answers_user_id_fkey": {
          "name": "psychometric_test_answers_user_id_fkey",
          "tableFrom": "psychometric_test_answers",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "psychometric_test_answers_confidence_level_check": {
          "name": "psychometric_test_answers_confidence_level_check",
          "value": "confidence_level = ANY (ARRAY['low'::text, 'medium'::text, 'high'::text])"
        },
        "psychometric_test_answers_user_answer_check": {
          "name": "psychometric_test_answers_user_answer_check",
          "value": "user_answer = ANY (ARRAY[0, 1, 2, 3])"
        }
      },
      "policies": {
        "Users can view own test answers": {
          "name": "Users can view own test answers",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = ( SELECT psychometric_test_sessions.user_id\n   FROM psychometric_test_sessions\n  WHERE (psychometric_test_sessions.id = psychometric_test_answers.test_session_id)))"
        },
        "Users can insert own test answers": {
          "name": "Users can insert own test answers",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.laws": {
      "name": "laws",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "short_name": {
          "name": "short_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "year": {
          "name": "year",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "scope": {
          "name": "scope",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'national'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "current_version": {
          "name": "current_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "last_consolidation_date": {
          "name": "last_consolidation_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "boe_consolidation_url": {
          "name": "boe_consolidation_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "next_verification_date": {
          "name": "next_verification_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false,
          "default": "(CURRENT_DATE + '3 mons'::interval)"
        },
        "verification_status": {
          "name": "verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'pendiente'"
        },
        "boe_url": {
          "name": "boe_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "boe_id": {
          "name": "boe_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_checked": {
          "name": "last_checked",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_modified_boe": {
          "name": "last_modified_boe",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "version_boe": {
          "name": "version_boe",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "change_status": {
          "name": "change_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "change_detected_at": {
          "name": "change_detected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "reviewed_at": {
          "name": "reviewed_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "last_update_boe": {
          "name": "last_update_boe",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_verification_summary": {
          "name": "last_verification_summary",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "video_url": {
          "name": "video_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "laws_scope_check": {
          "name": "laws_scope_check",
          "value": "scope = ANY (ARRAY['national'::text, 'regional'::text, 'local'::text, 'eu'::text])"
        },
        "laws_type_check": {
          "name": "laws_type_check",
          "value": "type = ANY (ARRAY['constitution'::text, 'code'::text, 'law'::text, 'regulation'::text])"
        },
        "laws_verification_status_check": {
          "name": "laws_verification_status_check",
          "value": "verification_status = ANY (ARRAY['actualizada'::text, 'pendiente'::text, 'desactualizada'::text, 'error'::text])"
        }
      },
      "policies": {
        "Enable read access for laws": {
          "name": "Enable read access for laws",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": true
    },
    "public.ai_api_usage": {
      "name": "ai_api_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "endpoint": {
          "name": "endpoint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_tokens": {
          "name": "total_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "feature": {
          "name": "feature",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "questions_count": {
          "name": "questions_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "estimated_cost_usd": {
          "name": "estimated_cost_usd",
          "type": "numeric(10, 6)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ai_api_usage_feature": {
          "name": "idx_ai_api_usage_feature",
          "columns": [
            {
              "expression": "feature",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_api_usage_provider": {
          "name": "idx_ai_api_usage_provider",
          "columns": [
            {
              "expression": "provider",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_api_usage_law_id_fkey": {
          "name": "ai_api_usage_law_id_fkey",
          "tableFrom": "ai_api_usage",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.law_sections": {
      "name": "law_sections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "section_type": {
          "name": "section_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "section_number": {
          "name": "section_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "article_range_start": {
          "name": "article_range_start",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "article_range_end": {
          "name": "article_range_end",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "order_position": {
          "name": "order_position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_law_sections_active": {
          "name": "idx_law_sections_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_sections_law_id": {
          "name": "idx_law_sections_law_id",
          "columns": [
            {
              "expression": "law_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_sections_order": {
          "name": "idx_law_sections_order",
          "columns": [
            {
              "expression": "order_position",
              "asc": true,
              "nulls": "last",
              "opclass": "int4_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_sections_section_type": {
          "name": "idx_law_sections_section_type",
          "columns": [
            {
              "expression": "section_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_sections_slug": {
          "name": "idx_law_sections_slug",
          "columns": [
            {
              "expression": "slug",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "law_sections_law_id_fkey": {
          "name": "law_sections_law_id_fkey",
          "tableFrom": "law_sections",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "law_sections_slug_key": {
          "columns": [
            "slug"
          ],
          "nullsNotDistinct": false,
          "name": "law_sections_slug_key"
        }
      },
      "checkConstraints": {
        "check_article_range": {
          "name": "check_article_range",
          "value": "(article_range_start IS NULL) OR (article_range_end IS NULL) OR (article_range_start <= article_range_end)"
        },
        "check_section_type": {
          "name": "check_section_type",
          "value": "section_type = ANY (ARRAY['titulo'::text, 'capitulo'::text, 'seccion'::text, 'libro'::text, 'parte'::text, 'anexo'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.questions": {
      "name": "questions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_a": {
          "name": "option_a",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_b": {
          "name": "option_b",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_c": {
          "name": "option_c",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "option_d": {
          "name": "option_d",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "correct_option": {
          "name": "correct_option",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "explanation": {
          "name": "explanation",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "difficulty": {
          "name": "difficulty",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'medium'"
        },
        "question_type": {
          "name": "question_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'single'"
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "primary_article_id": {
          "name": "primary_article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_official_exam": {
          "name": "is_official_exam",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "exam_source": {
          "name": "exam_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exam_date": {
          "name": "exam_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "exam_entity": {
          "name": "exam_entity",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exam_position": {
          "name": "exam_position",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "official_difficulty_level": {
          "name": "official_difficulty_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "content_hash": {
          "name": "content_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "global_difficulty": {
          "name": "global_difficulty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "difficulty_confidence": {
          "name": "difficulty_confidence",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0'"
        },
        "difficulty_sample_size": {
          "name": "difficulty_sample_size",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_difficulty_update": {
          "name": "last_difficulty_update",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "global_difficulty_category": {
          "name": "global_difficulty_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verified_at": {
          "name": "verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "verification_status": {
          "name": "verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "topic_review_status": {
          "name": "topic_review_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_questions_content_hash": {
          "name": "idx_questions_content_hash",
          "columns": [
            {
              "expression": "content_hash",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "where": "(content_hash IS NOT NULL)",
          "with": {}
        },
        "idx_questions_difficulty": {
          "name": "idx_questions_difficulty",
          "columns": [
            {
              "expression": "difficulty",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_questions_global_difficulty_category": {
          "name": "idx_questions_global_difficulty_category",
          "columns": [
            {
              "expression": "global_difficulty_category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(global_difficulty_category IS NOT NULL)",
          "with": {}
        },
        "idx_questions_official_article": {
          "name": "idx_questions_official_article",
          "columns": [
            {
              "expression": "primary_article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            },
            {
              "expression": "is_official_exam",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_questions_official_exam": {
          "name": "idx_questions_official_exam",
          "columns": [
            {
              "expression": "is_official_exam",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_official_exam = true)",
          "with": {}
        },
        "idx_questions_primary_article": {
          "name": "idx_questions_primary_article",
          "columns": [
            {
              "expression": "primary_article_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_questions_verification_status": {
          "name": "idx_questions_verification_status",
          "columns": [
            {
              "expression": "verification_status",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(verification_status IS NOT NULL)",
          "with": {}
        },
        "idx_questions_verified_at": {
          "name": "idx_questions_verified_at",
          "columns": [
            {
              "expression": "verified_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(verified_at IS NULL)",
          "with": {}
        }
      },
      "foreignKeys": {
        "questions_primary_article_id_fkey": {
          "name": "questions_primary_article_id_fkey",
          "tableFrom": "questions",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "primary_article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "questions_correct_option_check": {
          "name": "questions_correct_option_check",
          "value": "(correct_option >= 0) AND (correct_option <= 3)"
        },
        "questions_question_type_check": {
          "name": "questions_question_type_check",
          "value": "question_type = ANY (ARRAY['single'::text, 'multiple'::text, 'true_false'::text])"
        }
      },
      "policies": {
        "Enable read access for questions": {
          "name": "Enable read access for questions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        }
      },
      "isRLSEnabled": false
    },
    "public.content_collections": {
      "name": "content_collections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "content_collections_slug_key": {
          "columns": [
            "slug"
          ],
          "nullsNotDistinct": false,
          "name": "content_collections_slug_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.telegram_alerts": {
      "name": "telegram_alerts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "group_id": {
          "name": "group_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "message_id": {
          "name": "message_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "message_text": {
          "name": "message_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "sender_id": {
          "name": "sender_id",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "sender_name": {
          "name": "sender_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "sender_username": {
          "name": "sender_username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "matched_keywords": {
          "name": "matched_keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "is_read": {
          "name": "is_read",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "is_replied": {
          "name": "is_replied",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "reply_text": {
          "name": "reply_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "replied_at": {
          "name": "replied_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "detected_at": {
          "name": "detected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_telegram_alerts_detected": {
          "name": "idx_telegram_alerts_detected",
          "columns": [
            {
              "expression": "detected_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_telegram_alerts_unread": {
          "name": "idx_telegram_alerts_unread",
          "columns": [
            {
              "expression": "is_read",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_read = false)",
          "with": {}
        }
      },
      "foreignKeys": {
        "telegram_alerts_group_id_fkey": {
          "name": "telegram_alerts_group_id_fkey",
          "tableFrom": "telegram_alerts",
          "tableTo": "telegram_groups",
          "schemaTo": "public",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "telegram_alerts_group_id_message_id_key": {
          "columns": [
            "group_id",
            "message_id"
          ],
          "nullsNotDistinct": false,
          "name": "telegram_alerts_group_id_message_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.public_user_profiles": {
      "name": "public_user_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "ciudad": {
          "name": "ciudad",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_type": {
          "name": "avatar_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_emoji": {
          "name": "avatar_emoji",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_color": {
          "name": "avatar_color",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_name": {
          "name": "avatar_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_public_user_profiles_display_name": {
          "name": "idx_public_user_profiles_display_name",
          "columns": [
            {
              "expression": "display_name",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "public_user_profiles_id_fkey": {
          "name": "public_user_profiles_id_fkey",
          "tableFrom": "public_user_profiles",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Public profiles are viewable by authenticated users": {
          "name": "Public profiles are viewable by authenticated users",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ],
          "using": "true"
        },
        "Users can update own public profile": {
          "name": "Users can update own public profile",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "authenticated"
          ]
        },
        "Perfiles pblicos visibles para todos": {
          "name": "Perfiles pblicos visibles para todos",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.oposiciones": {
      "name": "oposiciones",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "nombre": {
          "name": "nombre",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tipo_acceso": {
          "name": "tipo_acceso",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "administracion": {
          "name": "administracion",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "categoria": {
          "name": "categoria",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "short_name": {
          "name": "short_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "grupo": {
          "name": "grupo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exam_date": {
          "name": "exam_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "inscription_start": {
          "name": "inscription_start",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "inscription_deadline": {
          "name": "inscription_deadline",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "boe_publication_date": {
          "name": "boe_publication_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "boe_reference": {
          "name": "boe_reference",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plazas_libres": {
          "name": "plazas_libres",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "plazas_promocion_interna": {
          "name": "plazas_promocion_interna",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "plazas_discapacidad": {
          "name": "plazas_discapacidad",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "temas_count": {
          "name": "temas_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "bloques_count": {
          "name": "bloques_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "titulo_requerido": {
          "name": "titulo_requerido",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "salario_min": {
          "name": "salario_min",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "salario_max": {
          "name": "salario_max",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_convocatoria_activa": {
          "name": "is_convocatoria_activa",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "oposiciones_tipo_acceso_check": {
          "name": "oposiciones_tipo_acceso_check",
          "value": "tipo_acceso = ANY (ARRAY['libre'::text, 'promocion_interna'::text, 'discapacidad'::text])"
        }
      },
      "policies": {},
      "isRLSEnabled": false
    },
    "public.telegram_groups": {
      "name": "telegram_groups",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigint",
          "primaryKey": true,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "member_count": {
          "name": "member_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "is_monitoring": {
          "name": "is_monitoring",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "keywords": {
          "name": "keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{\"RAY['test'::text\",\"'vence'::text\",\"'oposiciones'::text\",\"'auxiliar'::tex\"}'"
        },
        "added_at": {
          "name": "added_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.psychometric_user_question_history": {
      "name": "psychometric_user_question_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "attempts": {
          "name": "attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "correct_attempts": {
          "name": "correct_attempts",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_time_seconds": {
          "name": "total_time_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "personal_difficulty": {
          "name": "personal_difficulty",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "first_attempt_at": {
          "name": "first_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_attempt_at": {
          "name": "last_attempt_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "trend": {
          "name": "trend",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'stable'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_psychometric_user_history_difficulty": {
          "name": "idx_psychometric_user_history_difficulty",
          "columns": [
            {
              "expression": "personal_difficulty",
              "asc": true,
              "nulls": "last",
              "opclass": "numeric_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_user_history_question": {
          "name": "idx_psychometric_user_history_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_user_history_user": {
          "name": "idx_psychometric_user_history_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "psychometric_user_question_history_question_id_fkey": {
          "name": "psychometric_user_question_history_question_id_fkey",
          "tableFrom": "psychometric_user_question_history",
          "tableTo": "psychometric_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "psychometric_user_question_history_user_id_fkey": {
          "name": "psychometric_user_question_history_user_id_fkey",
          "tableFrom": "psychometric_user_question_history",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "psychometric_user_question_history_user_id_question_id_key": {
          "columns": [
            "user_id",
            "question_id"
          ],
          "nullsNotDistinct": false,
          "name": "psychometric_user_question_history_user_id_question_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view their own question history": {
          "name": "Users can view their own question history",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "System can manage question history": {
          "name": "System can manage question history",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.upgrade_message_impressions": {
      "name": "upgrade_message_impressions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "message_id": {
          "name": "message_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "shown_at": {
          "name": "shown_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "clicked_upgrade": {
          "name": "clicked_upgrade",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "clicked_at": {
          "name": "clicked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "dismissed": {
          "name": "dismissed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "dismissed_at": {
          "name": "dismissed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "converted_to_premium": {
          "name": "converted_to_premium",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "converted_at": {
          "name": "converted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "trigger_type": {
          "name": "trigger_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'daily_limit'"
        },
        "questions_answered": {
          "name": "questions_answered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_upgrade_impressions_date": {
          "name": "idx_upgrade_impressions_date",
          "columns": [
            {
              "expression": "shown_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_upgrade_impressions_message": {
          "name": "idx_upgrade_impressions_message",
          "columns": [
            {
              "expression": "message_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_upgrade_impressions_user": {
          "name": "idx_upgrade_impressions_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "upgrade_message_impressions_message_id_fkey": {
          "name": "upgrade_message_impressions_message_id_fkey",
          "tableFrom": "upgrade_message_impressions",
          "tableTo": "upgrade_messages",
          "schemaTo": "public",
          "columnsFrom": [
            "message_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "upgrade_message_impressions_user_id_fkey": {
          "name": "upgrade_message_impressions_user_id_fkey",
          "tableFrom": "upgrade_message_impressions",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.upgrade_messages": {
      "name": "upgrade_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "message_key": {
          "name": "message_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subtitle": {
          "name": "subtitle",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "body_message": {
          "name": "body_message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "highlight": {
          "name": "highlight",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'money'"
        },
        "gradient": {
          "name": "gradient",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'from-amber-500 via-orange-500 to-red-500'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_upgrade_messages_active": {
          "name": "idx_upgrade_messages_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "upgrade_messages_message_key_key": {
          "columns": [
            "message_key"
          ],
          "nullsNotDistinct": false,
          "name": "upgrade_messages_message_key_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.content_sections": {
      "name": "content_sections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "collection_id": {
          "name": "collection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "section_number": {
          "name": "section_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "icon": {
          "name": "icon",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "order_position": {
          "name": "order_position",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "content_sections_collection_id_fkey": {
          "name": "content_sections_collection_id_fkey",
          "tableFrom": "content_sections",
          "tableTo": "content_collections",
          "schemaTo": "public",
          "columnsFrom": [
            "collection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "content_sections_collection_id_slug_key": {
          "columns": [
            "collection_id",
            "slug"
          ],
          "nullsNotDistinct": false,
          "name": "content_sections_collection_id_slug_key"
        },
        "content_sections_collection_id_section_number_key": {
          "columns": [
            "collection_id",
            "section_number"
          ],
          "nullsNotDistinct": false,
          "name": "content_sections_collection_id_section_number_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.content_scope": {
      "name": "content_scope",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "collection_id": {
          "name": "collection_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "section_id": {
          "name": "section_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "article_numbers": {
          "name": "article_numbers",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true
        },
        "weight": {
          "name": "weight",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'1.0'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "content_scope_collection_id_fkey": {
          "name": "content_scope_collection_id_fkey",
          "tableFrom": "content_scope",
          "tableTo": "content_collections",
          "schemaTo": "public",
          "columnsFrom": [
            "collection_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "content_scope_law_id_fkey": {
          "name": "content_scope_law_id_fkey",
          "tableFrom": "content_scope",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "content_scope_section_id_fkey": {
          "name": "content_scope_section_id_fkey",
          "tableFrom": "content_scope",
          "tableTo": "content_sections",
          "schemaTo": "public",
          "columnsFrom": [
            "section_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "content_scope_collection_id_section_id_law_id_key": {
          "columns": [
            "collection_id",
            "section_id",
            "law_id"
          ],
          "nullsNotDistinct": false,
          "name": "content_scope_collection_id_section_id_law_id_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.user_message_interactions": {
      "name": "user_message_interactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message_id": {
          "name": "message_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "action_type": {
          "name": "action_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "shown_in": {
          "name": "shown_in",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_text": {
          "name": "message_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "share_platform": {
          "name": "share_platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_message_interactions_action": {
          "name": "idx_user_message_interactions_action",
          "columns": [
            {
              "expression": "action_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_message_interactions_message": {
          "name": "idx_user_message_interactions_message",
          "columns": [
            {
              "expression": "message_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_message_interactions_user": {
          "name": "idx_user_message_interactions_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_message_interactions_message_id_fkey": {
          "name": "user_message_interactions_message_id_fkey",
          "tableFrom": "user_message_interactions",
          "tableTo": "motivational_messages",
          "schemaTo": "public",
          "columnsFrom": [
            "message_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "user_message_interactions_user_id_fkey": {
          "name": "user_message_interactions_user_id_fkey",
          "tableFrom": "user_message_interactions",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_message_interactions_user_id_message_id_action_type_key": {
          "columns": [
            "user_id",
            "message_id",
            "action_type"
          ],
          "nullsNotDistinct": false,
          "name": "user_message_interactions_user_id_message_id_action_type_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can read own interactions": {
          "name": "Users can read own interactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can create own interactions": {
          "name": "Users can create own interactions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own interactions": {
          "name": "Users can update own interactions",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Admins can read all interactions": {
          "name": "Admins can read all interactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        },
        "Users can insert their own message interactions": {
          "name": "Users can insert their own message interactions",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "authenticated"
          ]
        },
        "Users can view their own message interactions": {
          "name": "Users can view their own message interactions",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "authenticated"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.motivational_messages": {
      "name": "motivational_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "subcategory": {
          "name": "subcategory",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_variants": {
          "name": "message_variants",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "gender_target": {
          "name": "gender_target",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'neutral'"
        },
        "region_target": {
          "name": "region_target",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "min_accuracy": {
          "name": "min_accuracy",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "max_accuracy": {
          "name": "max_accuracy",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "min_streak": {
          "name": "min_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_streak": {
          "name": "max_streak",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "time_of_day": {
          "name": "time_of_day",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "day_of_week": {
          "name": "day_of_week",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false
        },
        "emoji": {
          "name": "emoji",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "tone": {
          "name": "tone",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'motivational'"
        },
        "color_scheme": {
          "name": "color_scheme",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'blue'"
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "max_shows_per_user": {
          "name": "max_shows_per_user",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "cooldown_hours": {
          "name": "cooldown_hours",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "total_views": {
          "name": "total_views",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_likes": {
          "name": "total_likes",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "total_shares": {
          "name": "total_shares",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "like_rate": {
          "name": "like_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "share_rate": {
          "name": "share_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false,
          "default": "'0.00'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_motivational_messages_active": {
          "name": "idx_motivational_messages_active",
          "columns": [
            {
              "expression": "is_active",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "where": "(is_active = true)",
          "with": {}
        },
        "idx_motivational_messages_category": {
          "name": "idx_motivational_messages_category",
          "columns": [
            {
              "expression": "category",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Anyone can read active messages": {
          "name": "Anyone can read active messages",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(is_active = true)"
        },
        "Only admins can manage messages": {
          "name": "Only admins can manage messages",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.share_events": {
      "name": "share_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "share_type": {
          "name": "share_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'exam_result'"
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "score": {
          "name": "score",
          "type": "numeric(4, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "test_session_id": {
          "name": "test_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "share_text": {
          "name": "share_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "share_url": {
          "name": "share_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "device_info": {
          "name": "device_info",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_share_events_platform": {
          "name": "idx_share_events_platform",
          "columns": [
            {
              "expression": "platform",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_share_events_type": {
          "name": "idx_share_events_type",
          "columns": [
            {
              "expression": "share_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_share_events_user": {
          "name": "idx_share_events_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_share_events_user_created": {
          "name": "idx_share_events_user_created",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "share_events_user_id_fkey": {
          "name": "share_events_user_id_fkey",
          "tableFrom": "share_events",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can create own shares": {
          "name": "Users can create own shares",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(auth.uid() = user_id)"
        },
        "Users can read own shares": {
          "name": "Users can read own shares",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.article_update_logs": {
      "name": "article_update_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_id": {
          "name": "article_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "old_title": {
          "name": "old_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "new_title": {
          "name": "new_title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "change_type": {
          "name": "change_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'title_update'"
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'boe_verification'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_article_update_logs_law": {
          "name": "idx_article_update_logs_law",
          "columns": [
            {
              "expression": "law_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "article_update_logs_article_id_fkey": {
          "name": "article_update_logs_article_id_fkey",
          "tableFrom": "article_update_logs",
          "tableTo": "articles",
          "schemaTo": "public",
          "columnsFrom": [
            "article_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "article_update_logs_law_id_fkey": {
          "name": "article_update_logs_law_id_fkey",
          "tableFrom": "article_update_logs",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.ai_api_config": {
      "name": "ai_api_config",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "api_key_encrypted": {
          "name": "api_key_encrypted",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "api_key_hint": {
          "name": "api_key_hint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "default_model": {
          "name": "default_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_verified_at": {
          "name": "last_verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_verification_status": {
          "name": "last_verification_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_error_message": {
          "name": "last_error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ai_api_config_provider_key": {
          "columns": [
            "provider"
          ],
          "nullsNotDistinct": false,
          "name": "ai_api_config_provider_key"
        }
      },
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.ai_verification_errors": {
      "name": "ai_verification_errors",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "law_id": {
          "name": "law_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "prompt": {
          "name": "prompt",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "raw_response": {
          "name": "raw_response",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "error_type": {
          "name": "error_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "questions_count": {
          "name": "questions_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "tokens_used": {
          "name": "tokens_used",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_ai_verification_errors_created_at": {
          "name": "idx_ai_verification_errors_created_at",
          "columns": [
            {
              "expression": "created_at",
              "asc": false,
              "nulls": "first",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_verification_errors_error_type": {
          "name": "idx_ai_verification_errors_error_type",
          "columns": [
            {
              "expression": "error_type",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_verification_errors_law_id": {
          "name": "idx_ai_verification_errors_law_id",
          "columns": [
            {
              "expression": "law_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_ai_verification_errors_provider": {
          "name": "idx_ai_verification_errors_provider",
          "columns": [
            {
              "expression": "provider",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "ai_verification_errors_law_id_fkey": {
          "name": "ai_verification_errors_law_id_fkey",
          "tableFrom": "ai_verification_errors",
          "tableTo": "laws",
          "schemaTo": "public",
          "columnsFrom": [
            "law_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.daily_question_usage": {
      "name": "daily_question_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "usage_date": {
          "name": "usage_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "questions_answered": {
          "name": "questions_answered",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "last_question_at": {
          "name": "last_question_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_daily_usage_user_date": {
          "name": "idx_daily_usage_user_date",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "date_ops",
              "isExpression": false
            },
            {
              "expression": "usage_date",
              "asc": false,
              "nulls": "first",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "daily_question_usage_user_id_fkey": {
          "name": "daily_question_usage_user_id_fkey",
          "tableFrom": "daily_question_usage",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_user_date": {
          "columns": [
            "user_id",
            "usage_date"
          ],
          "nullsNotDistinct": false,
          "name": "unique_user_date"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can read own usage": {
          "name": "Users can read own usage",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own usage": {
          "name": "Users can insert own usage",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own usage": {
          "name": "Users can update own usage",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.question_first_attempts": {
      "name": "question_first_attempts",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "time_spent_seconds": {
          "name": "time_spent_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "confidence_level": {
          "name": "confidence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_question_first_attempts_correct": {
          "name": "idx_question_first_attempts_correct",
          "columns": [
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_question_first_attempts_created": {
          "name": "idx_question_first_attempts_created",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_question_first_attempts_question": {
          "name": "idx_question_first_attempts_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_question_first_attempts_user": {
          "name": "idx_question_first_attempts_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "question_first_attempts_question_id_fkey": {
          "name": "question_first_attempts_question_id_fkey",
          "tableFrom": "question_first_attempts",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "question_first_attempts_user_id_fkey": {
          "name": "question_first_attempts_user_id_fkey",
          "tableFrom": "question_first_attempts",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "question_first_attempts_pkey": {
          "name": "question_first_attempts_pkey",
          "columns": [
            "user_id",
            "question_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {},
      "isRLSEnabled": false
    },
    "public.psychometric_first_attempts": {
      "name": "psychometric_first_attempts",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "time_taken_seconds": {
          "name": "time_taken_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "interaction_data": {
          "name": "interaction_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_first_attempts_user_question": {
          "name": "idx_first_attempts_user_question",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_first_attempts_correct": {
          "name": "idx_psychometric_first_attempts_correct",
          "columns": [
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_first_attempts_created": {
          "name": "idx_psychometric_first_attempts_created",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_first_attempts_question": {
          "name": "idx_psychometric_first_attempts_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_psychometric_first_attempts_user": {
          "name": "idx_psychometric_first_attempts_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "psychometric_first_attempts_question_id_fkey": {
          "name": "psychometric_first_attempts_question_id_fkey",
          "tableFrom": "psychometric_first_attempts",
          "tableTo": "psychometric_questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "psychometric_first_attempts_user_id_fkey": {
          "name": "psychometric_first_attempts_user_id_fkey",
          "tableFrom": "psychometric_first_attempts",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "psychometric_first_attempts_pkey": {
          "name": "psychometric_first_attempts_pkey",
          "columns": [
            "user_id",
            "question_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view own first attempts": {
          "name": "Users can view own first attempts",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert own first attempts": {
          "name": "Users can insert own first attempts",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can update own first attempts": {
          "name": "Users can update own first attempts",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can delete own first attempts": {
          "name": "Users can delete own first attempts",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.law_question_first_attempts": {
      "name": "law_question_first_attempts",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "question_id": {
          "name": "question_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "is_correct": {
          "name": "is_correct",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "time_taken_seconds": {
          "name": "time_taken_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "confidence_level": {
          "name": "confidence_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "interaction_data": {
          "name": "interaction_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_law_first_attempts_correct": {
          "name": "idx_law_first_attempts_correct",
          "columns": [
            {
              "expression": "is_correct",
              "asc": true,
              "nulls": "last",
              "opclass": "bool_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_first_attempts_created": {
          "name": "idx_law_first_attempts_created",
          "columns": [
            {
              "expression": "created_at",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_first_attempts_question": {
          "name": "idx_law_first_attempts_question",
          "columns": [
            {
              "expression": "question_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_law_first_attempts_user": {
          "name": "idx_law_first_attempts_user",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "law_question_first_attempts_question_id_fkey": {
          "name": "law_question_first_attempts_question_id_fkey",
          "tableFrom": "law_question_first_attempts",
          "tableTo": "questions",
          "schemaTo": "public",
          "columnsFrom": [
            "question_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "law_question_first_attempts_user_id_fkey": {
          "name": "law_question_first_attempts_user_id_fkey",
          "tableFrom": "law_question_first_attempts",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "law_question_first_attempts_pkey": {
          "name": "law_question_first_attempts_pkey",
          "columns": [
            "user_id",
            "question_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can view their own first attempts": {
          "name": "Users can view their own first attempts",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = user_id)"
        },
        "Users can insert their own first attempts": {
          "name": "Users can insert their own first attempts",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {
    "public.difficulty_level": {
      "name": "difficulty_level",
      "values": [
        "easy",
        "medium",
        "hard",
        "extreme"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.conversion_funnel_stats": {
      "name": "conversion_funnel_stats",
      "schema": "public",
      "columns": {
        "registration_source": {
          "name": "registration_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registrations": {
          "name": "registrations",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "completed_first_test": {
          "name": "completed_first_test",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "hit_limit": {
          "name": "hit_limit",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "saw_modal": {
          "name": "saw_modal",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "clicked_upgrade": {
          "name": "clicked_upgrade",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "visited_premium": {
          "name": "visited_premium",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "started_checkout": {
          "name": "started_checkout",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "paid": {
          "name": "paid",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "conversion_rate": {
          "name": "conversion_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT registration_source, count(DISTINCT CASE WHEN event_type = 'registration'::text THEN user_id ELSE NULL::uuid END) AS registrations, count(DISTINCT CASE WHEN event_type = 'first_test_completed'::text THEN user_id ELSE NULL::uuid END) AS completed_first_test, count(DISTINCT CASE WHEN event_type = 'limit_reached'::text THEN user_id ELSE NULL::uuid END) AS hit_limit, count(DISTINCT CASE WHEN event_type = 'upgrade_modal_viewed'::text THEN user_id ELSE NULL::uuid END) AS saw_modal, count(DISTINCT CASE WHEN event_type = 'upgrade_button_clicked'::text THEN user_id ELSE NULL::uuid END) AS clicked_upgrade, count(DISTINCT CASE WHEN event_type = 'premium_page_viewed'::text THEN user_id ELSE NULL::uuid END) AS visited_premium, count(DISTINCT CASE WHEN event_type = 'checkout_started'::text THEN user_id ELSE NULL::uuid END) AS started_checkout, count(DISTINCT CASE WHEN event_type = 'payment_completed'::text THEN user_id ELSE NULL::uuid END) AS paid, round(100.0 * count(DISTINCT CASE WHEN event_type = 'payment_completed'::text THEN user_id ELSE NULL::uuid END)::numeric / NULLIF(count(DISTINCT CASE WHEN event_type = 'registration'::text THEN user_id ELSE NULL::uuid END), 0)::numeric, 2) AS conversion_rate FROM conversion_events GROUP BY registration_source",
      "materialized": false
    },
    "public.conversion_time_analysis": {
      "name": "conversion_time_analysis",
      "schema": "public",
      "columns": {
        "registration_source": {
          "name": "registration_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "avg_days_to_convert": {
          "name": "avg_days_to_convert",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "min_days": {
          "name": "min_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_days": {
          "name": "max_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_conversions": {
          "name": "total_conversions",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT registration_source, avg(days_since_registration) AS avg_days_to_convert, min(days_since_registration) AS min_days, max(days_since_registration) AS max_days, count(*) AS total_conversions FROM conversion_events WHERE event_type = 'payment_completed'::text GROUP BY registration_source",
      "materialized": false
    },
    "public.admin_role_stats": {
      "name": "admin_role_stats",
      "schema": "public",
      "columns": {
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_users": {
          "name": "total_users",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "active_users": {
          "name": "active_users",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "first_granted": {
          "name": "first_granted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_granted": {
          "name": "last_granted",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT role, count(*) AS total_users, count(*) FILTER (WHERE is_active = true) AS active_users, min(granted_at) AS first_granted, max(granted_at) AS last_granted FROM user_roles GROUP BY role ORDER BY (count(*)) DESC",
      "materialized": false
    },
    "public.hot_articles_dashboard": {
      "name": "hot_articles_dashboard",
      "schema": "public",
      "columns": {
        "articulo_completo": {
          "name": "articulo_completo",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "oposicion": {
          "name": "oposicion",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hotness_score": {
          "name": "hotness_score",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "priority_level": {
          "name": "priority_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "apariciones": {
          "name": "apariciones",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "examenes_distintos": {
          "name": "examenes_distintos",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "nivel_visual": {
          "name": "nivel_visual",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ultima_actualizacion": {
          "name": "ultima_actualizacion",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT ((article_number || ' ('::text) || law_name) || ')'::text AS articulo_completo, target_oposicion AS oposicion, hotness_score, priority_level, total_official_appearances AS apariciones, unique_exams_count AS examenes_distintos, CASE WHEN hotness_score >= 85::numeric THEN ' CRTICO'::text WHEN hotness_score >= 65::numeric THEN ' ALTO'::text WHEN hotness_score >= 40::numeric THEN ' MEDIO'::text ELSE ' BAJO'::text END AS nivel_visual, last_calculation_date AS ultima_actualizacion FROM hot_articles ha ORDER BY target_oposicion, hotness_score DESC",
      "materialized": false
    },
    "public.admin_pwa_stats": {
      "name": "admin_pwa_stats",
      "schema": "public",
      "columns": {
        "total_installations": {
          "name": "total_installations",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "active_pwa_users": {
          "name": "active_pwa_users",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "prompt_shows": {
          "name": "prompt_shows",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_installs": {
          "name": "total_installs",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_prompts": {
          "name": "total_prompts",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "conversion_rate_percentage": {
          "name": "conversion_rate_percentage",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT count(DISTINCT pe.user_id) FILTER (WHERE pe.event_type = 'pwa_installed'::text) AS total_installations, count(DISTINCT ps.user_id) FILTER (WHERE ps.is_standalone = true) AS active_pwa_users, count(DISTINCT pe.user_id) FILTER (WHERE pe.event_type = 'install_prompt_shown'::text) AS prompt_shows, count(*) FILTER (WHERE pe.event_type = 'pwa_installed'::text) AS total_installs, count(*) FILTER (WHERE pe.event_type = 'install_prompt_shown'::text) AS total_prompts, round(count(*) FILTER (WHERE pe.event_type = 'pwa_installed'::text)::numeric / NULLIF(count(*) FILTER (WHERE pe.event_type = 'install_prompt_shown'::text), 0)::numeric * 100::numeric, 2) AS conversion_rate_percentage FROM pwa_events pe LEFT JOIN pwa_sessions ps ON pe.user_id = ps.user_id WHERE pe.created_at >= (now() - '30 days'::interval)",
      "materialized": false
    },
    "public.users_needing_notifications": {
      "name": "users_needing_notifications",
      "schema": "public",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "push_subscription": {
          "name": "push_subscription",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_times": {
          "name": "preferred_times",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "timezone": {
          "name": "timezone",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "motivation_level": {
          "name": "motivation_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "exam_date": {
          "name": "exam_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "next_notification_time": {
          "name": "next_notification_time",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "risk_level": {
          "name": "risk_level",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "streak_status": {
          "name": "streak_status",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "preferred_hours": {
          "name": "preferred_hours",
          "type": "integer[]",
          "primaryKey": false,
          "notNull": false
        },
        "peak_performance_time": {
          "name": "peak_performance_time",
          "type": "time",
          "primaryKey": false,
          "notNull": false
        },
        "hours_since_last_session": {
          "name": "hours_since_last_session",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT uns.user_id, uns.push_subscription, uns.preferred_times, uns.timezone, uns.motivation_level, uns.exam_date, uss.next_notification_time, uss.risk_level, uss.streak_status, uap.preferred_hours, uap.peak_performance_time, EXTRACT(epoch FROM now() - uss.last_session_time) / 3600::numeric AS hours_since_last_session FROM user_notification_settings uns JOIN user_smart_scheduling uss ON uns.user_id = uss.user_id LEFT JOIN user_activity_patterns uap ON uns.user_id = uap.user_id WHERE uns.push_enabled = true AND uns.frequency <> 'off'::text AND (uss.pause_until IS NULL OR uss.pause_until < now()) AND uss.next_notification_time <= now()",
      "materialized": false
    },
    "public.admin_notification_analytics": {
      "name": "admin_notification_analytics",
      "schema": "public",
      "columns": {
        "total_users_with_notifications": {
          "name": "total_users_with_notifications",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_notification_events": {
          "name": "total_notification_events",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_permissions_granted": {
          "name": "push_permissions_granted",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_permissions_denied": {
          "name": "push_permissions_denied",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_notifications_sent": {
          "name": "push_notifications_sent",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_notifications_clicked": {
          "name": "push_notifications_clicked",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_notifications_dismissed": {
          "name": "push_notifications_dismissed",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "push_click_rate": {
          "name": "push_click_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "browser_name": {
          "name": "browser_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT count(DISTINCT user_id) AS total_users_with_notifications, count(*) AS total_notification_events, count(*) FILTER (WHERE event_type = 'permission_granted'::text) AS push_permissions_granted, count(*) FILTER (WHERE event_type = 'permission_denied'::text) AS push_permissions_denied, count(*) FILTER (WHERE event_type = 'notification_sent'::text) AS push_notifications_sent, count(*) FILTER (WHERE event_type = 'notification_clicked'::text) AS push_notifications_clicked, count(*) FILTER (WHERE event_type = 'notification_dismissed'::text) AS push_notifications_dismissed, round(count(*) FILTER (WHERE event_type = 'notification_clicked'::text)::numeric / NULLIF(count(*) FILTER (WHERE event_type = 'notification_sent'::text), 0)::numeric * 100::numeric, 2) AS push_click_rate, device_info ->> 'platform'::text AS platform, browser_info ->> 'name'::text AS browser_name, date_trunc('day'::text, created_at) AS date FROM notification_events WHERE created_at >= (now() - '30 days'::interval) GROUP BY (date_trunc('day'::text, created_at)), (device_info ->> 'platform'::text), (browser_info ->> 'name'::text)",
      "materialized": false
    },
    "public.admin_email_analytics": {
      "name": "admin_email_analytics",
      "schema": "public",
      "columns": {
        "email_type": {
          "name": "email_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "emails_sent": {
          "name": "emails_sent",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "emails_delivered": {
          "name": "emails_delivered",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "emails_opened": {
          "name": "emails_opened",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "emails_clicked": {
          "name": "emails_clicked",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "emails_bounced": {
          "name": "emails_bounced",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "unsubscribed": {
          "name": "unsubscribed",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "open_rate": {
          "name": "open_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "click_rate": {
          "name": "click_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT email_type, count(*) FILTER (WHERE event_type = 'sent'::text) AS emails_sent, count(*) FILTER (WHERE event_type = 'delivered'::text) AS emails_delivered, count(*) FILTER (WHERE event_type = 'opened'::text) AS emails_opened, count(*) FILTER (WHERE event_type = 'clicked'::text) AS emails_clicked, count(*) FILTER (WHERE event_type = 'bounced'::text) AS emails_bounced, count(*) FILTER (WHERE event_type = 'unsubscribed'::text) AS unsubscribed, round(count(*) FILTER (WHERE event_type = 'opened'::text)::numeric / NULLIF(count(*) FILTER (WHERE event_type = 'delivered'::text), 0)::numeric * 100::numeric, 2) AS open_rate, round(count(*) FILTER (WHERE event_type = 'clicked'::text)::numeric / NULLIF(count(*) FILTER (WHERE event_type = 'delivered'::text), 0)::numeric * 100::numeric, 2) AS click_rate, date_trunc('day'::text, created_at) AS date FROM email_events WHERE created_at >= (now() - '30 days'::interval) GROUP BY email_type, (date_trunc('day'::text, created_at))",
      "materialized": false
    },
    "public.admin_disputes_dashboard": {
      "name": "admin_disputes_dashboard",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "dispute_type": {
          "name": "dispute_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "reporter_name": {
          "name": "reporter_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "question_text": {
          "name": "question_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "article_number": {
          "name": "article_number",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "law_name": {
          "name": "law_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "days_since_created": {
          "name": "days_since_created",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "priority_status": {
          "name": "priority_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT qd.id, qd.dispute_type, qd.description, qd.status, qd.created_at, up.full_name AS reporter_name, q.question_text, a.article_number, l.short_name AS law_name, EXTRACT(days FROM now() - qd.created_at) AS days_since_created, CASE WHEN qd.status = 'pending'::text AND EXTRACT(days FROM now() - qd.created_at) > 7::numeric THEN 'urgent'::text WHEN qd.status = 'pending'::text THEN 'pending'::text ELSE qd.status END AS priority_status FROM question_disputes qd LEFT JOIN user_profiles up ON qd.user_id = up.id LEFT JOIN questions q ON qd.question_id = q.id LEFT JOIN articles a ON q.primary_article_id = a.id LEFT JOIN laws l ON a.law_id = l.id",
      "materialized": false
    },
    "public.admin_users_with_roles": {
      "name": "admin_users_with_roles",
      "schema": "public",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "full_name": {
          "name": "full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plan_type": {
          "name": "plan_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "registration_source": {
          "name": "registration_source",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requires_payment": {
          "name": "requires_payment",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_created_at": {
          "name": "user_created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "user_updated_at": {
          "name": "user_updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_active_student": {
          "name": "is_active_student",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "total_tests_30d": {
          "name": "total_tests_30d",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "completed_tests_30d": {
          "name": "completed_tests_30d",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "abandoned_tests_30d": {
          "name": "abandoned_tests_30d",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "last_test_date": {
          "name": "last_test_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "avg_score_30d": {
          "name": "avg_score_30d",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT up.id AS user_id, up.email, up.full_name, up.plan_type, up.registration_source, up.requires_payment, up.stripe_customer_id, up.created_at AS user_created_at, up.updated_at AS user_updated_at, CASE WHEN up.plan_type = ANY (ARRAY['legacy_free'::text, 'free'::text, 'trial'::text, 'premium'::text]) THEN true ELSE false END AS is_active_student, count(t.id) AS total_tests_30d, count( CASE WHEN t.is_completed = true THEN 1 ELSE NULL::integer END) AS completed_tests_30d, count( CASE WHEN t.is_completed = false THEN 1 ELSE NULL::integer END) AS abandoned_tests_30d, max(t.created_at) AS last_test_date, round(avg( CASE WHEN t.is_completed = true AND t.score IS NOT NULL THEN t.score ELSE NULL::numeric END), 1) AS avg_score_30d FROM user_profiles up LEFT JOIN tests t ON up.id = t.user_id AND t.created_at >= (now() - '30 days'::interval) GROUP BY up.id, up.email, up.full_name, up.plan_type, up.registration_source, up.requires_payment, up.stripe_customer_id, up.created_at, up.updated_at ORDER BY up.created_at DESC",
      "materialized": false
    },
    "public.admin_upgrade_message_stats": {
      "name": "admin_upgrade_message_stats",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "message_key": {
          "name": "message_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "weight": {
          "name": "weight",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_impressions": {
          "name": "total_impressions",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_clicks": {
          "name": "total_clicks",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_dismisses": {
          "name": "total_dismisses",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "total_conversions": {
          "name": "total_conversions",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "click_rate": {
          "name": "click_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        },
        "conversion_rate": {
          "name": "conversion_rate",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT um.id, um.message_key, um.title, um.is_active, um.weight, count(umi.id) AS total_impressions, count(umi.id) FILTER (WHERE umi.clicked_upgrade) AS total_clicks, count(umi.id) FILTER (WHERE umi.dismissed) AS total_dismisses, count(umi.id) FILTER (WHERE umi.converted_to_premium) AS total_conversions, round(count(umi.id) FILTER (WHERE umi.clicked_upgrade)::numeric / NULLIF(count(umi.id), 0)::numeric * 100::numeric, 2) AS click_rate, round(count(umi.id) FILTER (WHERE umi.converted_to_premium)::numeric / NULLIF(count(umi.id), 0)::numeric * 100::numeric, 2) AS conversion_rate FROM upgrade_messages um LEFT JOIN upgrade_message_impressions umi ON umi.message_id = um.id GROUP BY um.id ORDER BY (count(umi.id)) DESC",
      "materialized": false
    },
    "public.admin_share_analytics": {
      "name": "admin_share_analytics",
      "schema": "public",
      "columns": {
        "fecha": {
          "name": "fecha",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "share_type": {
          "name": "share_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "total_shares": {
          "name": "total_shares",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "usuarios_unicos": {
          "name": "usuarios_unicos",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "nota_promedio_compartida": {
          "name": "nota_promedio_compartida",
          "type": "numeric",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT date_trunc('day'::text, created_at) AS fecha, share_type, platform, count(*) AS total_shares, count(DISTINCT user_id) AS usuarios_unicos, avg(score) AS nota_promedio_compartida FROM share_events GROUP BY (date_trunc('day'::text, created_at)), share_type, platform ORDER BY (date_trunc('day'::text, created_at)) DESC",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {
      "topic_scope": {
        "columns": {
          "article_numbers": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "title_numbers": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "chapter_numbers": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "legal_modifications": {
        "columns": {
          "article_numbers": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "test_questions": {
        "columns": {
          "tags": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "user_test_sessions": {
        "columns": {
          "failed_questions": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          }
        }
      },
      "article_exam_stats": {
        "columns": {
          "years_appeared": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          }
        }
      },
      "user_sessions": {
        "columns": {
          "pages_visited": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "topics_studied": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "search_queries": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "conversion_events": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "user_learning_analytics": {
        "columns": {
          "peak_performance_hours": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          },
          "worst_performance_hours": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          },
          "current_weak_areas": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "recommended_focus_articles": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "email_unsubscribe_tokens": {
        "columns": {
          "expires_at": {
            "isDefaultAnExpression": true
          }
        }
      },
      "psychometric_questions": {
        "columns": {
          "cognitive_skills": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "user_activity_patterns": {
        "columns": {
          "preferred_hours": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          },
          "active_days": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          }
        }
      },
      "user_psychometric_preferences": {
        "columns": {
          "categories_mastered": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "weak_areas": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "favorite_question_types": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "psychometric_test_sessions": {
        "columns": {
          "categories_selected": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "uuid"
          },
          "sections_selected": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "uuid"
          }
        }
      },
      "psychometric_test_answers": {
        "columns": {
          "cognitive_skills_tested": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "laws": {
        "columns": {
          "next_verification_date": {
            "isDefaultAnExpression": true
          }
        }
      },
      "questions": {
        "columns": {
          "tags": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "telegram_alerts": {
        "columns": {
          "matched_keywords": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "telegram_groups": {
        "columns": {
          "keywords": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "content_scope": {
        "columns": {
          "article_numbers": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          }
        }
      },
      "motivational_messages": {
        "columns": {
          "region_target": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "time_of_day": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "text"
          },
          "day_of_week": {
            "isArray": true,
            "dimensions": 1,
            "rawType": "integer"
          }
        }
      },
      "users_needing_notifications": {
        "columns": {
          "preferred_hours": {
            "isArray": true,
            "dimensions": 0,
            "rawType": "integer"
          }
        }
      }
    }
  }
}