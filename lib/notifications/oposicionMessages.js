// Sistema de mensajes motivacionales para oposiciones
// Contexto: PreparaciÃ³n Auxiliar Administrativo del Estado

export const oposicionMessageTemplates = {
  // ğŸ”¥ MANTENER RACHA - MotivaciÃ³n positiva
  streak_danger: {
    urgent: [
      "ğŸ”¥ Â¡{streak} dÃ­as consecutivos! Hora de continuar tu Ã©xito. ğŸ“š Tip: Solo 10-15 preguntas diarias mantienen la retenciÃ³n activa",
      "ğŸ’ Los demÃ¡s opositores admiran tu constancia. Â¡Sigue asÃ­! ğŸ§  Estudios confirman: la prÃ¡ctica espaciada es 2x mÃ¡s efectiva",
      "â­ {streak} dÃ­as consecutivos... Â¡EstÃ¡s tan cerca del Ã©xito! â° Consejo: 15 minutos diarios > 2 horas una vez por semana",
      "ğŸ’ª Tu plaza te estÃ¡ esperando. Solo 10 preguntas para seguir adelante. ğŸ¯ La constancia vence al talento cuando el talento no es constante",
      "ğŸ¯ Cada dÃ­a de estudio te acerca mÃ¡s a tu objetivo. ğŸ“– Dato: Repasar en intervalos aumenta la memoria a largo plazo un 400%",
      "ğŸŒŸ {streak} dÃ­as de esfuerzo... Â¡Tu dedicaciÃ³n es admirable! ğŸ’¡ Neurociencia: El cerebro forma conexiones mÃ¡s fuertes con prÃ¡ctica diaria",
      "ğŸ“ˆ Tu progreso es increÃ­ble. Â¡Sigamos construyendo tu futuro! ğŸ”¬ InvestigaciÃ³n: 10 preguntas diarias > maratones de estudio",
      "ğŸš€ Los aprobados mantienen el ritmo. Â¡TÃº eres uno de ellos! âš¡ Tip de expertos: Poco y often > mucho y rara vez"
    ],
    motivational: [
      "ğŸ¯ Cada dÃ­a de estudio es una inversiÃ³n en tu futuro. ğŸ§  Ciencia: El espaciado temporal fija el conocimiento x3 veces mejor",
      "ğŸ“š Tu futuro profesional te estÃ¡ llamando. Â¿Lo escuchas? ğŸ’¡ Consejo: 10 preguntas diarias = 3650 al aÃ±o",
      "â­ Los aprobados construyen el Ã©xito dÃ­a a dÃ­a. Â¡Ãšnete a ellos! ğŸ“Š EstadÃ­stica: El 90% de aprobados estudiaba diariamente",
      "ğŸ† Tu oposiciÃ³n es tu oportunidad. Â¡Vamos por esas preguntas! â±ï¸ TÃ©cnica: Microlearning de 15 min = mÃ¡xima retenciÃ³n",
      "ğŸ’¼ Tu plaza fija te estÃ¡ esperando, construyÃ¡mosla juntos. ğŸ”¬ Estudio: La consistencia supera a la intensidad en memoria",
      "ğŸ”¥ La constancia es el camino hacia el Ã©xito. ğŸ¯ Regla de oro: Mejor 5 min diarios que 5 horas los domingos",
      "âš¡ Tu dedicaciÃ³n de hoy = Tu plaza de maÃ±ana. ğŸ“ˆ Curva del olvido: Repasar cada 24h mejora retenciÃ³n al 80%"
    ]
  },

  // â˜€ï¸ MOTIVACIÃ“N DIARIA por horarios
  daily_motivation: {
    morning: [
      "â˜€ï¸ Â¡Buenos dÃ­as! Tu plaza matutina te espera. ğŸ§  Neurociencia: El cerebro estÃ¡ 23% mÃ¡s activo por las maÃ±anas",
      "ğŸŒ… Cada maÃ±ana es una oportunidad de estar mÃ¡s cerca de aprobar. â° TÃ©cnica Pomodoro: 25 min focus + 5 min descanso",
      "ğŸ’¼ Las personas exitosas empiezan temprano. Â¿Te unes? ğŸ“Š Harvard Study: Estudiar temprano mejora retenciÃ³n 40%",
      "ğŸš€ Tu oposiciÃ³n empieza AHORA. 15 minutos pueden cambiar tu futuro. ğŸ¯ Regla 1%: Mejorar solo 1% diario = x37 veces mejor en un aÃ±o",
      "â˜• CafÃ© + Test = CombinaciÃ³n ganadora para tu oposiciÃ³n. ğŸ”¬ CafeÃ­na + aprendizaje = +12% memoria a largo plazo",
      "ğŸ¯ Madruga con determinaciÃ³n, estudia con propÃ³sito. ğŸ’¡ Tip: Resolver dudas por la maÃ±ana consolida el aprendizaje",
      "â­ El dÃ­a perfecto empieza con preguntas perfectas. ğŸ“ˆ Solo 10 preguntas matutinas activan el modo aprendizaje todo el dÃ­a",
      "ğŸ’ª Buenos dÃ­as. Tu plaza te estÃ¡ esperando. ğŸ§  Cortisol matutino + estudio = mÃ¡xima concentraciÃ³n y memoria"
    ],
    afternoon: [
      "ğŸ• Pausa del trabajo = Momento perfecto para tu oposiciÃ³n. ğŸ§  Estudio: El cerebro procesa mejor tras descansos activos",
      "âš¡ Media jornada de otros, media oposiciÃ³n tuya. Â¡Equilibrio perfecto! ğŸ“Š Microlearning: 15 min = 1 semana tradicional",
      "ğŸ¯ Aprovecha este momento para estudiar. ğŸ’¡ PsicologÃ­a: Los breaks de trabajo son ideales para consolidar memoria",
      "ğŸ’¡ Un test ahora = Un paso mÃ¡s cerca de tu plaza fija. â±ï¸ TÃ©cnica: 5-10 preguntas refrescan el conocimiento sin saturar",
      "ğŸ”„ Recarga energÃ­as con preguntas que te acercan al aprobado. ğŸ”¬ Neuroplasticidad: Cambiar de actividad potencia el aprendizaje",
      "â° Hora de almuerzo = Hora de alimentar tu futuro. ğŸ“ˆ DigestiÃ³n lenta + estudio ligero = retenciÃ³n Ã³ptima",
      "ğŸš€ 15 minutos de estudio > 15 minutos de redes sociales. ğŸ“± Dato: 15 min diarios = 91 horas anuales de estudio"
    ],
    evening: [
      "ğŸŒ† El dÃ­a laboral termina, tu preparaciÃ³n continÃºa. ğŸ§  Estudio: El cerebro consolida mejor la informaciÃ³n antes de dormir",
      "âœ¨ Antes de Netflix... Â¿10 preguntas por tu futuro? ğŸ“º 15 min de estudio = 45 min de entretenimiento sin culpa",
      "ğŸŒ™ Los mejores opositores estudian cuando otros descansan. â° Noches tranquilas = concentraciÃ³n x2",
      "ğŸ”¥ Tu oposiciÃ³n no tiene horarios. Â¿Y tu dedicaciÃ³n? ğŸ¯ Consistencia nocturna marca la diferencia",
      "ğŸ¬ Episodio de serie: 45 min. Test completo: 20 min. Â¿QuÃ© eliges? ğŸ“Š 20 min = 100 preguntas anuales extra",
      "â­ Las personas exitosas se forjan en las noches de estudio. ğŸ’¡ Neurociencia: Estudiar de noche refuerza la memoria",
      "ğŸ’¤ Duerme tranquilo sabiendo que hoy avanzaste hacia tu plaza. ğŸ˜´ SueÃ±o + estudio previo = retenciÃ³n del 85%"
    ],
    night: [
      "ğŸŒƒ Ãšltima oportunidad del dÃ­a. Â¿La aprovechas? ğŸ§  Memoria consolidativa: El cerebro fija conocimientos durante el sueÃ±o",
      "âœ¨ 5 preguntas antes de dormir = SueÃ±os mÃ¡s cerca del aprobado. ğŸ˜´ REM + contenido reciente = recuerdo a largo plazo",
      "ğŸŒ™ Quienes estudian de noche serÃ¡n quienes triunfen maÃ±ana. ğŸ”¬ Harvard: Repasar antes de dormir mejora retenciÃ³n 40%",
      "ğŸ’« Termina el dÃ­a como empezaste: pensando en tu oposiciÃ³n. ğŸ¯ Rutina nocturna = hÃ¡bito de Ã©xito automÃ¡tico"
    ]
  },

  // ğŸŒŸ REGRESO despuÃ©s de inactividad
  comeback: {
    short_break: [ // 1-2 dÃ­as sin actividad
      "ğŸ‘‹ Â¡Te echamos de menos! Tu oposiciÃ³n te esperaba. ğŸ§  Descanso de 1-2 dÃ­as puede mejorar la consolidaciÃ³n",
      "ğŸ”„ Un dÃ­a de descanso estÃ¡ bien. Â¿Volvemos a por todas? âš¡ Pausa corta + vuelta = mente mÃ¡s fresca",
      "âš¡ Recargaste pilas. Ahora recarga conocimientos. ğŸ”‹ Cerebro descansado = capacidad de aprendizaje +25%",
      "ğŸ¯ Tu plaza siguiÃ³ esperÃ¡ndote. Â¡Vamos a por ella! ğŸ“š Retomar rÃ¡pido mantiene la curva de aprendizaje"
    ],
    medium_break: [ // 3-5 dÃ­as
      "ğŸŒŸ Â¡QuÃ© alegrÃ­a verte de vuelta! Tu progreso te estÃ¡ esperando. ğŸ§  3-5 dÃ­as = tiempo perfecto para resetear motivaciÃ³n",
      "â° Cada dÃ­a de estudio suma. Â¡Sigamos construyendo tu Ã©xito! ğŸ“ˆ Constancia irregular > perfecciÃ³n esporÃ¡dica",
      "ğŸ’« Es un buen momento para retomar el ritmo. ğŸ”„ Intervalos de descanso pueden potenciar el rendimiento",
      "ğŸ’ª Volver es de personas determinadas. Â¡TÃº eres una de ellas! ğŸ¯ Resilencia: clave del 90% de aprobados",
      "ğŸ”¥ {days_inactive} dÃ­as de pausa. Hora de volver con mÃ¡s energÃ­a. âš¡ Descanso moderado = motivaciÃ³n renovada"
    ],
    long_break: [ // 6+ dÃ­as
      "ğŸŒˆ Â¡Nunca es tarde para volver! Tu oposiciÃ³n te recibe con los brazos abiertos. ğŸ”„ Neuroplasticidad: El cerebro siempre puede reaprender",
      "âœ¨ Otros opositores han seguido, pero tÃº tienes tu propio ritmo. ğŸ¢ Tortuga constante > liebre esporÃ¡dica",
      "ğŸ’– Tu sueÃ±o profesional sigue ahÃ­. Â¡Vamos a hacerlo realidad! ğŸ¯ Metas claras reactivan la motivaciÃ³n dormida",
      "ğŸ¯ Tu oposiciÃ³n es una maratÃ³n, no un sprint. Â¡Sigamos juntos! ğŸƒâ€â™€ï¸ Ritmo personal > velocidad externa",
      "ğŸŒ… Cada dÃ­a es una nueva oportunidad de acercarte a tu meta. ğŸ§  Cada neurona conserva la capacidad de aprender"
    ]
  },

  // ğŸ† LOGROS y celebraciones
  achievement: {
    streak_milestones: [
      "ğŸ† Â¡{streak} dÃ­as consecutivos! AsÃ­ se prepara una oposiciÃ³n. ğŸ§  HÃ¡bito formado: 21 dÃ­as, experticia: 66 dÃ­as",
      "â­ Â¡IncreÃ­ble! Ya has respondido {total_questions} preguntas. ğŸ“Š Volumen + consistencia = dominio garantizado",
      "ğŸ”¥ Â¡Racha de fuego! Los demÃ¡s opositores querrÃ­an tu constancia. ğŸ¯ Constancia > talento segÃºn estudios de Ã©xito",
      "ğŸ’ª {streak} dÃ­as sin fallar. Tu plaza estÃ¡ cada vez mÃ¡s cerca. ğŸ“ˆ Cada dÃ­a = 1% mejor, aÃ±o = 37x mejor",
      "ğŸ¯ Â¡Imparable! Tu dedicaciÃ³n marca la diferencia. ğŸ§  Disciplina: El mÃºsculo mÃ¡s importante del opositor",
      "ğŸ‘‘ {streak} dÃ­as de constancia absoluta. ğŸ’ Excelencia = resultado de hÃ¡bitos excepcionales diarios",
      "âš¡ Constancia nivel: EXPERTO. ğŸ”¬ Neurociencia: Rutinas crean autopistas neuronales de Ã©xito"
    ],
    score_achievements: [
      "ğŸ¯ Â¡{score}% de aciertos! Nivel experto desbloqueado. ğŸ§  +80% accuracy = zona de dominio cognitivo",
      "â­ PuntuaciÃ³n perfecta: {score}%. Â¡Eres imparable! ğŸ’¯ PerfecciÃ³n = preparaciÃ³n + oportunidad",
      "ğŸ… {score}% de media. Los tribunales estarÃ­an impresionados. ğŸ‘¨â€âš–ï¸ Consistencia en puntuaciÃ³n = predictor de aprobado",
      "ğŸ’¯ Dominando la oposiciÃ³n: {score}% de Ã©xito. ğŸ“ Dominio = 10.000 horas o {score}% de precisiÃ³n"
    ],
    knowledge_milestones: [
      "ğŸ“š Â¡{total_questions} preguntas completadas! Eres una enciclopedia. ğŸ§  Volumen de prÃ¡ctica = expertise real",
      "ğŸ§  Conocimiento desbloqueado: {mastered_topics} temas dominados. ğŸ”— Conexiones neuronales = conocimiento sÃ³lido",
      "âš¡ Velocidad mental: {avg_time}s por pregunta. Â¡IncreÃ­ble! âš¡ Rapidez + precisiÃ³n = automatizaciÃ³n del saber",
      "ğŸ“ Nivel experto alcanzado en {strong_areas}. ğŸ’ª Fortalezas identificadas = ventaja competitiva clara"
    ]
  },

  // ğŸ¯ PROXIMIDAD DEL EXAMEN
  exam_proximity: {
    very_close: [ // < 30 dÃ­as
      "ğŸ¯ CONVOCATORIA CERCA: Cada momento cuenta. Â¡Sigamos! ğŸ§  EstrÃ©s positivo + preparaciÃ³n = rendimiento Ã³ptimo",
      "â­ {days_until_exam} dÃ­as para la convocatoria. Â¡Tu momento ha llegado! â° PresiÃ³n temporal bien gestionada = foco mÃ¡ximo",
      "ğŸ”¥ FASE FINAL: Tu preparaciÃ³n estÃ¡ dando frutos. ğŸŒ± Ãšltimas semanas = cosecha de meses de esfuerzo",
      "ğŸ’¯ Ãšltimos dÃ­as de preparaciÃ³n. Â¡EstÃ¡s preparado para triunfar! ğŸ¯ Confianza + preparaciÃ³n = Ã©xito inevitable",
      "ğŸ META A LA VISTA: {days_until_exam} dÃ­as para tu nueva vida. ğŸš€ Recta final = momento de mÃ¡ximo rendimiento",
      "â° CUENTA FINAL: {days_until_exam} dÃ­as para demostrar todo lo que sabes. ğŸ’ª Conocimiento + tiempo = oportunidad perfecta"
    ],
    close: [ // 30-90 dÃ­as
      "ğŸ“… Quedan {days_until_exam} dÃ­as. Cada dÃ­a de estudio es oro. âš¡ Intensidad controlada = preparaciÃ³n efectiva",
      "ğŸ¯ La convocatoria se acerca. Â¿Tu nivel estÃ¡ donde quieres? ğŸ“Š AutoevaluaciÃ³n honesta = ajuste estratÃ©gico",
      "ğŸ’ª Tiempo de intensificar. Tu plaza te estÃ¡ esperando. ğŸ”¥ Ãšltimos 2-3 meses = momento decisivo",
      "ğŸ”¥ {days_until_exam} dÃ­as para cambiar tu vida. Â¿Los aprovecharÃ¡s? â° Tiempo limitado = valor infinito"
    ],
    moderate: [ // 3-6 meses
      "ğŸ“† {months_until_exam} meses para la convocatoria. Tiempo de ser constante. ğŸ¢ Constancia prolongada > rÃ¡fagas intensas",
      "ğŸ¯ PreparaciÃ³n a medio plazo: cada dÃ­a cuenta para tu Ã©xito. ğŸ“ˆ Progreso sostenido = bases sÃ³lidas",
      "ğŸ’¼ Tu futuro profesional se construye dÃ­a a dÃ­a. ğŸ—ï¸ Cimientos sÃ³lidos requieren tiempo y paciencia"
    ]
  },

  // ğŸ“Š ÃREAS DÃ‰BILES
  weakness_focus: [
    "ğŸ“Š Tu Ã¡rea dÃ©bil en {weak_topic} necesita atenciÃ³n. Â¡A por ella! ğŸ¯ Enfoque en debilidades = mejora exponencial",
    "ğŸ¯ Convierte tu debilidad en fortaleza: practica {weak_topic}. ğŸ’ª Zona de incomodidad = zona de crecimiento",
    "ğŸ’¡ Los aprobados dominan TODAS las Ã¡reas. Â¿Trabajamos {weak_topic}? ğŸ† Excelencia integral = diferencia competitiva",
    "ğŸ”§ Reparemos esa Ã¡rea dÃ©bil: {weak_topic} te estÃ¡ esperando. ğŸ› ï¸ Debilidad identificada = 50% del problema resuelto",
    "âš¡ {weak_topic} al {weak_percentage}%. Tiempo de mejorarlo. ğŸ“ˆ Cada punto de mejora = ventaja en el examen",
    "ğŸ“ EspecialÃ­zate en tu punto dÃ©bil: {weak_topic}. ğŸ§  Neuroplasticidad: Siempre es posible mejorar",
    "ğŸ—ï¸ Construyamos fortaleza en {weak_topic}. Â¡TÃº puedes! ğŸ’ PresiÃ³n sobre debilidades crea fortalezas sÃ³lidas"
  ],

  // ğŸ’ª ÃREAS FUERTES (refuerzo positivo)
  strength_reinforcement: [
    "ğŸ† Â¡Dominando {strong_topic} al {strong_percentage}%! Sigue asÃ­",
    "â­ Tu fortaleza en {strong_topic} es de nivel experto",
    "ğŸ”¥ {strong_topic}: Tu Ã¡rea estrella. Â¡Mantenla brillando!",
    "ğŸ’ª Experto en {strong_topic}. Los tribunales quedarÃ­an impresionados"
  ],

  // ğŸ¯ RENDIMIENTO Y ESTADÃSTICAS
  performance_insights: [
    "ğŸ“ˆ Tu rendimiento estÃ¡ subiendo. Â¡{improvement}% mejor esta semana!",
    "âš¡ Velocidad mejorada: {time_improvement}s menos por pregunta",
    "ğŸ¯ PrecisiÃ³n en aumento: {accuracy_improvement}% mÃ¡s de aciertos",
    "ğŸ”¥ Racha de {correct_streak} respuestas correctas. Â¡Imparable!"
  ],

  // ğŸŒŸ MOTIVACIÃ“N ESPECIAL
  special_motivation: {
    monday: [
      "ğŸ’¼ Â¡Lunes de opositor! Empieza la semana con determinaciÃ³n. ğŸ§  Fresh start effect: Los lunes potencian la motivaciÃ³n",
      "ğŸš€ Nueva semana, nuevas oportunidades de acercarte a tu plaza. ğŸ“… Planning semanal = 5x mÃ¡s efectividad",
      "âš¡ Lunes = Nuevo impulso hacia tu oposiciÃ³n. ğŸ”„ Reset mental semanal = energÃ­a renovada"
    ],
    friday: [
      "ğŸ‰ Â¡Viernes! Termina la semana con broche de oro. ğŸ† Viernes productivo = weekend sin culpa",
      "â­ Un test del viernes = Weekend mÃ¡s tranquilo. ğŸ˜Œ Cierre semanal positivo = descanso mental",
      "ğŸ”¥ Viernes de esfuerzo = Lunes mÃ¡s cerca del aprobado. ğŸ“ˆ Momentum de viernes = impulso de lunes"
    ],
    weekend: [
      "ğŸŒ… Fin de semana = Tiempo extra para tu oposiciÃ³n. â° Sin prisa = concentraciÃ³n profunda",
      "âš¡ Los weekends son perfectos para avanzar a tu ritmo. ğŸ¯ Tiempo libre = oportunidad de oro",
      "ğŸ¯ SÃ¡bado de estudio = Domingo de satisfacciÃ³n. ğŸ˜Š Equilibrio productivo = bienestar sostenible"
    ]
  },

  // ğŸŒŸ MOTIVACIÃ“N ESPECIAL (usuarios muy inactivos)
  emergency_motivation: [
    "ğŸŒŸ Â¡Tu potencial estÃ¡ intacto! Es hora de retomar el camino. ğŸ§  Neuroplasticidad: El cerebro mantiene capacidad de aprender toda la vida",
    "ğŸ’« Han pasado {days_inactive} dÃ­as, pero tu sueÃ±o sigue vivo. ğŸ’ª Pausa no es abandono, es recarga estratÃ©gica",
    "ğŸŒˆ Mientras otros {active_users} usuarios estudian, tÃº puedes unirte cuando quieras. ğŸ‘¥ Comunidad + motivaciÃ³n = fuerza multiplicada",
    "ğŸ’– Tu sueÃ±o profesional te estÃ¡ esperando pacientemente. Â¡Vamos juntos! ğŸ¯ Metas dormidas despiertan con primer paso",
    "ğŸŒ… Cada dÃ­a es una nueva oportunidad. Â¡Hoy puede ser tu dÃ­a! âš¡ Momento presente = Ãºnico momento de acciÃ³n real"
  ]
};

// FunciÃ³n para seleccionar mensaje contextual
export function selectContextualMessage(category, context = {}) {
  const {
    subcategory,
    streak = 0,
    daysInactive = 0,
    score = 0,
    totalQuestions = 0,
    weakTopic = '',
    strongTopic = '',
    daysUntilExam = null,
    motivationLevel = 'medium',
    timeOfDay = 'morning',
    dayOfWeek = 'monday',
    userGender = 'neutral' // 'male', 'female', 'neutral'
  } = context;

  let messagePool = [];
  
  // Seleccionar pool de mensajes segÃºn categorÃ­a
  switch (category) {
    case 'streak_danger':
      messagePool = motivationLevel === 'high' ? 
        oposicionMessageTemplates.streak_danger.urgent : 
        oposicionMessageTemplates.streak_danger.motivational;
      break;
      
    case 'daily_motivation':
      messagePool = oposicionMessageTemplates.daily_motivation[timeOfDay] || 
        oposicionMessageTemplates.daily_motivation.morning;
      break;
      
    case 'comeback':
      if (daysInactive <= 2) {
        messagePool = oposicionMessageTemplates.comeback.short_break;
      } else if (daysInactive <= 5) {
        messagePool = oposicionMessageTemplates.comeback.medium_break;
      } else {
        messagePool = oposicionMessageTemplates.comeback.long_break;
      }
      break;
      
    case 'achievement':
      messagePool = oposicionMessageTemplates.achievement[subcategory] || 
        oposicionMessageTemplates.achievement.streak_milestones;
      break;
      
    case 'exam_proximity':
      if (daysUntilExam <= 30) {
        messagePool = oposicionMessageTemplates.exam_proximity.very_close;
      } else if (daysUntilExam <= 90) {
        messagePool = oposicionMessageTemplates.exam_proximity.close;
      } else {
        messagePool = oposicionMessageTemplates.exam_proximity.moderate;
      }
      break;
      
    case 'weakness_focus':
      messagePool = oposicionMessageTemplates.weakness_focus;
      break;
      
    case 'emergency':
      messagePool = oposicionMessageTemplates.emergency_motivation;
      break;
      
    default:
      messagePool = oposicionMessageTemplates.daily_motivation.morning;
  }

  // Seleccionar mensaje aleatorio del pool
  const randomMessage = messagePool[Math.floor(Math.random() * messagePool.length)];
  
  // Reemplazar variables en el mensaje
  return randomMessage
    .replace('{streak}', streak)
    .replace('{days_inactive}', daysInactive)
    .replace('{score}', score)
    .replace('{total_questions}', totalQuestions)
    .replace('{weak_topic}', weakTopic)
    .replace('{strong_topic}', strongTopic)
    .replace('{days_until_exam}', daysUntilExam)
    .replace('{months_until_exam}', Math.ceil(daysUntilExam / 30))
    .replace('{weak_percentage}', Math.round(Math.random() * 30 + 40)) // Simular porcentaje dÃ©bil
    .replace('{strong_percentage}', Math.round(Math.random() * 20 + 80)) // Simular porcentaje fuerte
    .replace('{improvement}', Math.round(Math.random() * 15 + 5))
    .replace('{time_improvement}', Math.round(Math.random() * 5 + 1))
    .replace('{accuracy_improvement}', Math.round(Math.random() * 10 + 3))
    .replace('{correct_streak}', Math.round(Math.random() * 8 + 3))
    .replace('{active_users}', Math.round(Math.random() * 500 + 100));
}

// FunciÃ³n para determinar urgencia del mensaje
export function calculateMessageUrgency(context) {
  const { 
    daysInactive = 0, 
    streak = 0, 
    daysUntilExam = null,
    riskLevel = 'low'
  } = context;

  let urgency = 1; // Base

  // Factor inactividad
  if (daysInactive >= 7) urgency += 4;
  else if (daysInactive >= 3) urgency += 2;
  else if (daysInactive >= 1) urgency += 1;

  // Factor racha en peligro
  if (streak >= 10 && daysInactive >= 1) urgency += 2;
  if (streak >= 5 && daysInactive >= 1) urgency += 1;

  // Factor proximidad examen
  if (daysUntilExam && daysUntilExam <= 30) urgency += 3;
  else if (daysUntilExam && daysUntilExam <= 90) urgency += 1;

  // Factor nivel de riesgo
  switch (riskLevel) {
    case 'critical': urgency += 3; break;
    case 'high': urgency += 2; break;
    case 'medium': urgency += 1; break;
  }

  return Math.min(urgency, 5); // MÃ¡ximo 5
}

export default {
  oposicionMessageTemplates,
  selectContextualMessage,
  calculateMessageUrgency
};