# üöÄ Sistema iLoveTest - Plataforma Inteligente de Oposiciones

> **üß† DIFERENCIADOR CLAVE**: No somos "otra web de tests" - somos el primer **Asistente Personal de Aprendizaje Legal** que aprende de ti y te gu√≠a inteligentemente hacia la excelencia.

## üéØ **La Revoluci√≥n: IA Personal + Tests Tradicionales**

### üß† **Sistema de Notificaciones Inteligentes** ‚≠ê *PIEDRA ANGULAR*
**Lo que nos hace √∫nicos en el mercado:**

- **üìä An√°lisis Autom√°tico**: Tu comportamiento de estudio se convierte en insights personalizados
- **üéØ Predicci√≥n de Problemas**: Detecta regresiones antes de que las notes
- **üí° Motivaci√≥n Adaptativa**: Solo cuando realmente aporta valor (no spam)
- **üöÄ Acciones Directas**: Cada notificaci√≥n lleva a una soluci√≥n espec√≠fica
- **‚ö° Tiempo Real**: Aprende y se adapta constantemente a tu progreso

### üìà **Tipos de Inteligencia Implementada:**

#### üö® **Alertas Cr√≠ticas** (Prioridad 90-100)
- **Regresi√≥n de Nivel**: "Tu rendimiento en Art. 103 baj√≥ 15% ‚Üí Test de Refuerzo (5 min)"
- **Racha Rota**: "5 d√≠as sin estudiar ‚Üí Test de Recuperaci√≥n (3 min)"  
- **Art√≠culos Problem√°ticos**: "LPAC Arts. 1,2,3 con <70% accuracy ‚Üí Test Intensivo"

#### üéØ **Recomendaciones Inteligentes** (Prioridad 70-89)
- **Optimizaci√≥n de Rachas**: "3 d√≠as seguidos ‚Üí Mantener Racha (5 min)"
- **Logros Detectados**: "10 tests esta semana ‚Üí Pr√≥ximo Desaf√≠o"

#### üí° **Motivaci√≥n Adaptativa** (Solo cuando campana vac√≠a)
- **Progreso Real**: "Llevas 4 d√≠as seguidos estudiando (2h 30m total)"
- **Mejoras Detectadas**: "Tu precisi√≥n en Tema 5 mejor√≥ del 65% al 82%"
- **Velocidad**: "Respondes 3s m√°s r√°pido que hace una semana"
- **Maestr√≠a**: "Has dominado 2 art√≠culos nuevos: Tema 3 Art. 104 (89%)"
- **Patrones**: "Estudias mejor a las 19:00-20:00 (85% accuracy)"

> üìñ **[Ver documentaci√≥n completa del Sistema de Inteligencia](./NOTIFICATIONS_SYSTEM.md)**

---

## üìã **Sistema Base de Tests Avanzados**

Construido sobre la plataforma m√°s completa del mercado:

- **Tests configurables** (25/50/100 preguntas)
- **Generaci√≥n personalizada** (falladas/acertadas/aleatorias/mixtas)
- **Preguntas reutilizables** por art√≠culo para m√∫ltiples oposiciones
- **Mapeo inteligente** tema ‚Üí leyes ‚Üí art√≠culos espec√≠ficos
- **Tracking granular** de errores por tema/ley/art√≠culo
- **Sistema de usuarios** con Google OAuth
- **Analytics de progreso** y recomendaciones personalizadas
- **üÜï EX√ÅMENES OFICIALES EXACTOS** - Recreaci√≥n de ex√°menes reales
- **üÜï CONTEXTO HIST√ìRICO** - Art√≠culos que "caen seguro" en ex√°menes
- **üéâ CONSTITUCI√ìN ESPA√ëOLA COMPLETA** - 169 art√≠culos mapeados (100%)
- **üÜï CONTROL DE VERSIONES** - Sistema de actualizaci√≥n legal autom√°tico
- **üÜï ARQUITECTURA H√çBRIDA** - Consultas r√°pidas + an√°lisis profundo
- **‚ú® MODO ADAPTATIVO** - Se ajusta autom√°ticamente al rendimiento del usuario

---

## üéØ Objetivos del Sistema

### ‚úÖ Tests Din√°micos y Personalizados
- Configuraci√≥n flexible de n√∫mero de preguntas por test
- **Generaci√≥n inteligente:** falladas, acertadas, aleatorias, mixtas
- **Mapeo preciso:** cada tema sabe exactamente qu√© leyes/art√≠culos incluye
- **Tests por estructura legal:** T√≠tulo Preliminar, Cap√≠tulo I, Secci√≥n 1¬™, etc.
- Soporte para tests mixtos (m√∫ltiples temas/leyes)

### ‚úÖ Arquitectura de Preguntas Reutilizables ‚≠ê *IMPLEMENTADO*
- **Preguntas asociadas a art√≠culos espec√≠ficos** (no a temas)
- **Reutilizaci√≥n autom√°tica** para m√∫ltiples oposiciones
- **Una pregunta del Art. 103 CE** sirve para Auxiliar Administrativo, Administrativo C1, Gesti√≥n Procesal, etc.
- **Zero duplicaci√≥n** de contenido entre temas y oposiciones

### ‚úÖ Sistema de Ex√°menes Oficiales ‚≠ê *REVOLUCIONARIO*
- **Recreaci√≥n exacta** de ex√°menes oficiales reales
- **Preguntas id√©nticas** a las que aparecieron en convocatorias pasadas
- **Dos modalidades:**
  - **"Tema X - Solo preguntas oficiales"** - Preguntas que cayeron de ese tema
  - **"Examen Oficial 2023 Completo"** - Recreaci√≥n exacta del examen real
- **Contexto hist√≥rico:** "Esta pregunta cay√≥ en 2023, 2022, 2021"
- **Clasificaci√≥n por frecuencia:** VERY_FREQUENT, FREQUENT, OCCASIONAL

### ‚úÖ Inteligencia Contextual ‚≠ê *NUEVA GENERACI√ìN*
- **Mensajes motivacionales:** "‚ö° ¬°MEMORIZA LITERALMENTE!" para art√≠culos muy preguntados
- **Diferenciaci√≥n por oposici√≥n:** Solo muestra contexto relevante para cada oposici√≥n espec√≠fica
- **Estrategia de estudio:** Los usuarios saben exactamente qu√© priorizar
- **Arquitectura h√≠brida:** `article_exam_stats` para consultas r√°pidas + `articulos_examenes` para an√°lisis hist√≥rico

### ‚úÖ Control de Versiones Legal ‚≠ê *NUEVO*
- **Sistema de integridad:** Hashes SHA-256 para detectar cambios autom√°ticamente
- **Verificaci√≥n autom√°tica:** Alertas cuando una ley necesita actualizaci√≥n
- **Trazabilidad completa:** Historial de versiones de cada art√≠culo
- **Fuentes oficiales:** Enlaces directos al BOE consolidado
- **Alertas inteligentes:** Priorizaci√≥n por urgencia (URGENTE, ALTA, MEDIA, BAJA)

### ‚úÖ Repaso Inteligente
- **"25 preguntas falladas del Tema 5"** - Solo las que el usuario falla
- **"15 falladas + 10 aleatorias"** - Combinaciones personalizadas  
- **"Solo preguntas nunca vistas"** - Contenido fresco
- **‚ú® Modo Adaptativo Autom√°tico:** 
  - Se activa autom√°ticamente cuando el rendimiento baja del 60%
  - Muestra indicador visual `‚ú® Adapt√°ndose a tu nivel` en tiempo real
  - Disponible en tests aleatorios y por tema
  - Configuraci√≥n opcional con toggle activado por defecto

### ‚úÖ Mapeo Tema ‚Üî Contenido Legal
- **Tema 5 Auxiliar Administrativo** ‚Üí CE Art. 103-106 + LRJSP Cap. I
- **Tema 8 Administrativo C1** ‚Üí CE Art. 103-106 (reutiliza mismas preguntas)
- **Flexibilidad total:** art√≠culos espec√≠ficos, t√≠tulos completos, cap√≠tulos, etc.

### ‚úÖ Tracking Inteligente
- Registro de errores por usuario, tema, ley y art√≠culo
- Seguimiento temporal del progreso
- Identificaci√≥n autom√°tica de puntos d√©biles
- M√©tricas de mejora por √°rea de conocimiento

### ‚úÖ Sistema de Usuarios
- Autenticaci√≥n con Google OAuth
- Progreso persistente en la nube
- Perfil personalizado de aprendizaje
- Acceso multiplataforma

---

## üèóÔ∏è Arquitectura de Base de Datos

### üìä **Esquema Completo (25 tablas principales)**

```
üìö CONTENIDO LEGAL (4 tablas)
‚îú‚îÄ‚îÄ laws - Normativa legal (CE, LPAC, etc.)
‚îú‚îÄ‚îÄ articles - Art√≠culos espec√≠ficos de cada ley  
‚îú‚îÄ‚îÄ topics - Temas de oposiciones estructurados
‚îî‚îÄ‚îÄ topic_scope - Mapeo inteligente tema ‚Üî art√≠culos

‚ùì PREGUNTAS Y TESTS (4 tablas)
‚îú‚îÄ‚îÄ questions - Preguntas reutilizables por art√≠culo
‚îú‚îÄ‚îÄ test_configurations - Configuraciones guardadas de tests
‚îú‚îÄ‚îÄ test_questions - Relaci√≥n tests ‚Üî preguntas
‚îî‚îÄ‚îÄ tests - Sesiones de tests completadas

üéØ EX√ÅMENES OFICIALES (6 tablas) ‚≠ê IMPLEMENTADO
‚îú‚îÄ‚îÄ oposiciones - Tipos de oposiciones disponibles
‚îú‚îÄ‚îÄ convocatorias - A√±os y detalles de ex√°menes
‚îú‚îÄ‚îÄ articulos_examenes - Historial de art√≠culos en ex√°menes
‚îú‚îÄ‚îÄ preguntas_examenes_oficiales - Preguntas exactas de ex√°menes
‚îú‚îÄ‚îÄ oposicion_topics - Mapeo oposici√≥n ‚Üî temas
‚îî‚îÄ‚îÄ oposicion_articles - Mapeo directo oposici√≥n ‚Üî art√≠culos

üÜï NUEVA ARQUITECTURA H√çBRIDA (1 tabla) ‚≠ê REVOLUCIONARIO
‚îî‚îÄ‚îÄ article_exam_stats - Estad√≠sticas agregadas para consultas r√°pidas

üÜï CONTROL DE VERSIONES (4 tablas) ‚≠ê NUEVO
‚îú‚îÄ‚îÄ law_versions - Historial de versiones de leyes
‚îú‚îÄ‚îÄ article_versions - Historial de versiones de art√≠culos
‚îú‚îÄ‚îÄ version_checks - Programaci√≥n de verificaciones
‚îî‚îÄ‚îÄ law_update_status - Vista de estado actualizaci√≥n

‚ú® SISTEMA IA ADAPTATIVO (4 tablas) ‚≠ê REVOLUCIONARIO
‚îú‚îÄ‚îÄ user_question_history - Historial personal por pregunta
‚îú‚îÄ‚îÄ user_difficulty_metrics - M√©tricas agregadas de dificultad
‚îú‚îÄ‚îÄ user_sessions - Sesiones detalladas de usuario
‚îî‚îÄ‚îÄ user_learning_analytics - Analytics de aprendizaje

üë§ USUARIOS Y PROGRESO (4 tablas)
‚îú‚îÄ‚îÄ user_profiles - Perfiles y preferencias
‚îú‚îÄ‚îÄ user_progress - Progreso detallado por art√≠culo
‚îú‚îÄ‚îÄ user_recommendations - Recomendaciones personalizadas
‚îî‚îÄ‚îÄ user_notifications - Sistema de notificaciones inteligentes
```

---

## üìã **Nuevas Tablas Clave Implementadas**

### üÜï **Table: `article_exam_stats`** - Arquitectura H√≠brida ‚≠ê *REVOLUCIONARIO*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del registro |
| `article_id` | uuid (FK) | Referencia al art√≠culo |
| `oposicion_id` | uuid (FK) | Referencia a la oposici√≥n |
| `total_appearances` | integer | Total de apariciones en ex√°menes |
| `years_appeared` | integer[] | Array de a√±os en que apareci√≥ [2021,2022,2023] |
| `first_appearance` | integer | Primer a√±o de aparici√≥n |
| `last_appearance` | integer | √öltimo a√±o de aparici√≥n |
| `classification` | text | Clasificaci√≥n: VERY_FREQUENT, FREQUENT, OCCASIONAL |
| `user_message` | text | Mensaje para el usuario: "‚ö° ¬°MEMORIZA LITERALMENTE!" |
| `source_table` | text | Tabla de origen de los datos |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

**CONSTRAINT √öNICO:** `(article_id, oposicion_id)` - Imposible tener duplicados

### üÜï **Table: `law_versions`** - Control de Versiones ‚≠ê *NUEVO*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la versi√≥n |
| `law_id` | uuid (FK) | Referencia a la ley |
| `version_number` | text | N√∫mero de versi√≥n (ej: "1.0", "1.1") |
| `content_hash` | text | Hash SHA-256 de todo el contenido |
| `boe_reference` | text | Referencia oficial del BOE |
| `change_description` | text | Descripci√≥n de los cambios realizados |
| `verification_date` | date | Fecha de verificaci√≥n |
| `next_verification_date` | date | Pr√≥xima fecha de verificaci√≥n programada |
| `verification_priority` | text | Prioridad: URGENT, HIGH, MEDIUM, LOW |
| `is_current_version` | boolean | Si es la versi√≥n actual |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

### üÜï **Table: `article_versions`** - Historial de Art√≠culos ‚≠ê *NUEVO*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la versi√≥n |
| `article_id` | uuid (FK) | Referencia al art√≠culo |
| `law_version_id` | uuid (FK) | Referencia a la versi√≥n de la ley |
| `version_number` | text | N√∫mero de versi√≥n del art√≠culo |
| `content_hash` | text | Hash SHA-256 del contenido del art√≠culo |
| `content` | text | Contenido hist√≥rico del art√≠culo |
| `change_description` | text | Descripci√≥n espec√≠fica del cambio |
| `verification_date` | date | Fecha de verificaci√≥n del art√≠culo |
| `is_current_version` | boolean | Si es la versi√≥n actual del art√≠culo |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

---

## üîß Funciones SQL Implementadas

### üìà Funciones SQL Operativas ‚≠ê *25+ FUNCIONES AVANZADAS*
```
‚úÖ GENERACI√ìN DE TESTS:
‚îú‚îÄ‚îÄ get_topic_questions_v2() - Preguntas por tema
‚îú‚îÄ‚îÄ generate_test_by_topic() - Generador de tests din√°micos
‚îú‚îÄ‚îÄ get_article_questions() - Preguntas espec√≠ficas por art√≠culo

‚úÖ EX√ÅMENES OFICIALES ‚≠ê IMPLEMENTADO:
‚îú‚îÄ‚îÄ get_examen_oficial_exacto() - Recrear examen oficial completo
‚îú‚îÄ‚îÄ get_preguntas_oficiales_por_tema() - Solo preguntas que cayeron
‚îú‚îÄ‚îÄ get_estadisticas_examenes_oficiales() - Stats de cobertura
‚îú‚îÄ‚îÄ get_articles_missing_questions() - Prioridades para crear preguntas

‚úÖ CONTEXTO INTELIGENTE ‚≠ê IMPLEMENTADO:
‚îú‚îÄ‚îÄ get_question_exam_context_v2() - Contexto hist√≥rico por oposici√≥n
‚îú‚îÄ‚îÄ get_article_context_final() - Funci√≥n h√≠brida optimizada
‚îú‚îÄ‚îÄ get_oposicion_articles() - Art√≠culos de una oposici√≥n espec√≠fica
‚îú‚îÄ‚îÄ get_oposicion_coverage_stats() - Estad√≠sticas de cobertura

‚úÖ CONTROL DE VERSIONES ‚≠ê NUEVO:
‚îú‚îÄ‚îÄ generate_content_hash() - Generaci√≥n de hashes SHA-256
‚îú‚îÄ‚îÄ check_law_update_needed() - Verificar si ley necesita actualizaci√≥n
‚îú‚îÄ‚îÄ get_laws_needing_verification() - Leyes pendientes de verificaci√≥n
‚îú‚îÄ‚îÄ migrate_existing_exam_data() - Migraci√≥n de datos hist√≥ricos

‚úÖ AN√ÅLISIS Y ESTAD√çSTICAS:
‚îú‚îÄ‚îÄ get_question_stats_by_position() - Estad√≠sticas por oposici√≥n
‚îú‚îÄ‚îÄ get_official_exam_coverage_stats() - Cobertura ex√°menes oficiales
‚îú‚îÄ‚îÄ get_user_progress_analytics() - Analytics de progreso de usuario
‚îú‚îÄ‚îÄ get_recommendation_engine() - Motor de recomendaciones

‚ú® SISTEMA IA ADAPTATIVO ‚≠ê NUEVO:
‚îú‚îÄ‚îÄ calculate_personal_difficulty() - Algoritmo de dificultad personal
‚îú‚îÄ‚îÄ calculate_trend() - An√°lisis de tendencias de progreso
‚îú‚îÄ‚îÄ update_user_question_history() - Trigger autom√°tico de actualizaci√≥n
‚îú‚îÄ‚îÄ migrate_existing_data() - Migraci√≥n de datos hist√≥ricos
‚îú‚îÄ‚îÄ get_personal_difficulty_breakdown() - Distribuci√≥n personal
‚îî‚îÄ‚îÄ get_personalized_recommendations() - Recomendaciones IA
```

---

## üìã **Documentaci√≥n Completa de Tablas**

### üìö **CONTENIDO LEGAL**

#### üèõÔ∏è **Table: `laws`** - Normativa Legal
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la ley |
| `name` | text | Nombre completo oficial (ej: "Constituci√≥n Espa√±ola de 1978") |
| `short_name` | text | Nombre abreviado para referencias (ej: "CE", "LPAC") |
| `year` | integer | A√±o de promulgaci√≥n de la ley |
| `type` | text | Tipo de norma: "constitucional", "ley_organica", "ley_ordinaria", "real_decreto" |
| `scope` | text | √Åmbito de aplicaci√≥n: "nacional", "autonomico", "local" |
| `description` | text | Descripci√≥n y objeto de la ley |
| `is_active` | boolean | Si la ley est√° vigente y disponible para tests |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìñ **Table: `articles`** - Art√≠culos Espec√≠ficos
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del art√≠culo |
| `law_id` | uuid (FK) | Referencia a la ley a la que pertenece |
| `article_number` | text | N√∫mero del art√≠culo (ej: "103", "104", "bis") |
| `title` | text | T√≠tulo o ep√≠grafe del art√≠culo |
| `content` | text | Contenido completo del art√≠culo |
| `title_number` | text | N√∫mero del t√≠tulo al que pertenece (estructura jer√°rquica) |
| `chapter_number` | text | N√∫mero del cap√≠tulo al que pertenece |
| `section_number` | text | N√∫mero de la secci√≥n al que pertenece |
| `content_hash` | text | Hash SHA-256 del contenido para control de versiones |
| `verification_date` | date | Fecha de √∫ltima verificaci√≥n |
| `is_verified` | boolean | Si el contenido ha sido verificado |
| `is_active` | boolean | Si el art√≠culo est√° disponible para tests |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìö **Table: `topics`** - Temas de Oposiciones
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del tema |
| `position_type` | text | Tipo de oposici√≥n: "auxiliar_administrativo", "administrativo_c1", etc. |
| `topic_number` | integer | N√∫mero del tema dentro de la oposici√≥n (1, 2, 3...) |
| `name` | text | Nombre completo del tema (ej: "Tema 5: La Administraci√≥n P√∫blica") |
| `description` | text | Descripci√≥n detallada del contenido del tema |
| `difficulty` | text | Nivel de dificultad: "facil", "medio", "dificil" |
| `estimated_hours` | numeric | Horas estimadas de estudio para dominar el tema |
| `is_active` | boolean | Si el tema est√° disponible para tests |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üóÇÔ∏è **Table: `topic_scope`** - Mapeo Tema ‚Üî Art√≠culos ‚≠ê *CLAVE*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del mapeo |
| `topic_id` | uuid (FK) | Referencia al tema |
| `law_id` | uuid (FK) | Referencia a la ley |
| `article_numbers` | text[] | Array de n√∫meros de art√≠culos espec√≠ficos ['103', '104', '105'] |
| `title_numbers` | text[] | Array de t√≠tulos completos a incluir |
| `chapter_numbers` | text[] | Array de cap√≠tulos completos a incluir |
| `include_full_title` | boolean | Si incluir todo el t√≠tulo completo |
| `include_full_chapter` | boolean | Si incluir todo el cap√≠tulo completo |
| `weight` | numeric | Peso/importancia del contenido en el tema (0.1-1.0) |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

---

### ‚ùì **PREGUNTAS Y TESTS**

#### ‚ùì **Table: `questions`** - Preguntas Reutilizables ‚≠ê *ARQUITECTURA REVOLUCIONARIA*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la pregunta |
| `primary_article_id` | uuid (FK) | **CLAVE**: Art√≠culo principal al que se refiere (reutilizaci√≥n) |
| `question_text` | text | Texto completo de la pregunta |
| `option_a` | text | Opci√≥n A de respuesta |
| `option_b` | text | Opci√≥n B de respuesta |
| `option_c` | text | Opci√≥n C de respuesta |
| `option_d` | text | Opci√≥n D de respuesta |
| `correct_option` | text | Opci√≥n correcta: "a", "b", "c", "d" |
| `explanation` | text | Explicaci√≥n detallada de por qu√© es correcta |
| `difficulty` | text | Dificultad: "facil", "medio", "dificil" |
| `question_type` | text | Tipo: "teorica", "practica", "caso_practico" |
| `tags` | text[] | Etiquetas para categorizaci√≥n ['principios', 'competencias'] |
| `is_active` | boolean | Si la pregunta est√° disponible para tests |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìä **Table: `test_configurations`** - Configuraciones de Tests
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la configuraci√≥n |
| `user_id` | uuid (FK) | Usuario propietario de la configuraci√≥n |
| `name` | text | Nombre de la configuraci√≥n (ej: "Tema 5 - Repaso falladas") |
| `topic_id` | uuid (FK) | Tema principal del test (puede ser NULL para tests mixtos) |
| `total_questions` | integer | N√∫mero total de preguntas del test |
| `question_distribution` | text | Distribuci√≥n: "only_unseen_questions", "mixed", "failed_only" |
| `only_unseen_questions` | boolean | Solo preguntas nunca vistas por el usuario |
| `time_limit_minutes` | integer | L√≠mite de tiempo en minutos (NULL = sin l√≠mite) |
| `is_completed` | boolean | Si el test ha sido completado |
| `created_at` | timestamp | Fecha de creaci√≥n de la configuraci√≥n |
| `updated_at` | timestamp | √öltima actualizaci√≥n de la configuraci√≥n |

#### üîó **Table: `test_questions`** - Relaci√≥n Tests ‚Üî Preguntas
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la relaci√≥n |
| `test_id` | uuid (FK) | Referencia al test |
| `question_id` | uuid (FK) | Referencia a la pregunta |
| `question_order` | integer | Orden de la pregunta en el test (1, 2, 3...) |
| `user_answer` | text | Respuesta del usuario: "a", "b", "c", "d" |
| `is_correct` | boolean | Si la respuesta fue correcta |
| `fixacion` | text | Nivel de fijaci√≥n del conocimiento |
| `time_spent_seconds` | integer | Tiempo empleado en responder (segundos) |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìù **Table: `tests`** - Sesiones de Tests
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del test |
| `user_id` | uuid (FK) | Usuario que realiz√≥ el test |
| `title` | text | T√≠tulo del test (ej: "Test Tema 5 - 25 preguntas") |
| `test_type` | text | Tipo: "practice", "official_exam", "mixed" |
| `total_questions` | integer | N√∫mero total de preguntas |
| `time_limit_minutes` | integer | Tiempo l√≠mite establecido |
| `started_at` | timestamp | Fecha/hora de inicio del test |
| `completed_at` | timestamp | Fecha/hora de finalizaci√≥n (NULL si no terminado) |
| `is_completed` | boolean | Si el test fue completado |
| `score` | numeric | Puntuaci√≥n obtenida (0-100) |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

---

### üéØ **EX√ÅMENES OFICIALES** ‚≠ê *IMPLEMENTADO*

#### üèÜ **Table: `oposiciones`** - Tipos de Oposiciones
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la oposici√≥n |
| `nombre` | text | Nombre oficial completo (ej: "Auxiliar Administrativo del Estado") |
| `tipo_acceso` | text | Tipo de acceso: "libre", "promocion_interna" |
| `administracion` | text | Administraci√≥n: "estado", "autonomica", "local" |
| `categoria` | text | Categor√≠a profesional: "C2", "C1", "A2", "A1" |
| `descripcion` | text | Descripci√≥n de las funciones del puesto |
| `is_active` | boolean | Si la oposici√≥n est√° activa para tests |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìÖ **Table: `convocatorias`** - Convocatorias por A√±o
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la convocatoria |
| `oposicion_id` | uuid (FK) | Referencia a la oposici√≥n |
| `a√±o` | integer | A√±o de la convocatoria (2023, 2022, 2021...) |
| `fecha_examen` | date | Fecha en que se celebr√≥ el examen |
| `boe_numero` | text | N√∫mero del BOE de la convocatoria |
| `plazas_convocadas` | integer | N√∫mero de plazas ofertadas |
| `observaciones` | text | Detalles adicionales (nota de corte, incidencias, etc.) |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üî• **Table: `articulos_examenes`** - Historial de Art√≠culos ‚≠ê *INTELIGENCIA*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del registro |
| `convocatoria_id` | uuid (FK) | Referencia a la convocatoria espec√≠fica |
| `article_id` | uuid (FK) | Referencia al art√≠culo que apareci√≥ |
| `frecuencia_aparicion` | integer | N√∫mero de veces que apareci√≥ en esa convocatoria |
| `tipo_pregunta` | text | Tipo: "teorica", "practica", "caso_practico" |
| `puntos_pregunta` | numeric | Puntos que val√≠a la pregunta (si se conoce) |
| `observaciones` | text | Contexto adicional sobre la aparici√≥n |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìù **Table: `preguntas_examenes_oficiales`** - Preguntas Exactas ‚≠ê *REVOLUCIONARIO*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la pregunta oficial |
| `convocatoria_id` | uuid (FK) | Referencia a la convocatoria espec√≠fica |
| `numero_pregunta` | integer | N√∫mero de la pregunta en el examen (1, 2, 3... hasta 60) |
| `parte_examen` | text | Parte: "organizacion_publica", "ofimatica", "psicotecnico" |
| `pregunta_text` | text | **TEXTO EXACTO** de la pregunta oficial |
| `opcion_a` | text | Opci√≥n A exacta del examen oficial |
| `opcion_b` | text | Opci√≥n B exacta del examen oficial |
| `opcion_c` | text | Opci√≥n C exacta del examen oficial |
| `opcion_d` | text | Opci√≥n D exacta del examen oficial |
| `respuesta_correcta` | text | Respuesta correcta oficial: "a", "b", "c", "d" |
| `article_id` | uuid (FK) | Art√≠culo al que se refiere (NULL para psicot√©cnicas) |
| `topic_estimado` | text | Tema estimado al que pertenece |
| `explicacion` | text | Explicaci√≥n de la respuesta correcta |
| `fue_anulada` | boolean | Si la pregunta fue anulada oficialmente |
| `observaciones` | text | Contexto adicional sobre la pregunta |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üîó **Table: `oposicion_topics`** - Mapeo Oposici√≥n ‚Üî Temas
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del mapeo |
| `oposicion_id` | uuid (FK) | Referencia a la oposici√≥n |
| `topic_id` | uuid (FK) | Referencia al tema |
| `es_tema_principal` | boolean | Si es un tema principal o complementario |
| `peso_examen` | numeric | Peso del tema en el examen (% aproximado) |
| `observaciones` | text | Notas sobre la importancia del tema |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üéØ **Table: `oposicion_articles`** - Mapeo Directo Oposici√≥n ‚Üî Art√≠culos
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del mapeo |
| `oposicion_id` | uuid (FK) | Referencia a la oposici√≥n |
| `article_id` | uuid (FK) | Referencia al art√≠culo |
| `importancia` | text | Importancia: "alta", "media", "baja" |
| `observaciones` | text | Contexto sobre por qu√© est√° en esta oposici√≥n |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

---

### üÜï **ARQUITECTURA H√çBRIDA** ‚≠ê *REVOLUCIONARIO*

#### üöÄ **Table: `article_exam_stats`** - Estad√≠sticas Optimizadas ‚≠ê *NUEVO*
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del registro |
| `article_id` | uuid (FK) | Referencia al art√≠culo |
| `oposicion_id` | uuid (FK) | Referencia a la oposici√≥n |
| `total_appearances` | integer | Total de apariciones en ex√°menes |
| `years_appeared` | integer[] | Array de a√±os en que apareci√≥ [2021,2022,2023] |
| `first_appearance` | integer | Primer a√±o de aparici√≥n |
| `last_appearance` | integer | √öltimo a√±o de aparici√≥n |
| `classification` | text | Clasificaci√≥n: VERY_FREQUENT, FREQUENT, OCCASIONAL |
| `user_message` | text | Mensaje para el usuario: "‚ö° ¬°MEMORIZA LITERALMENTE!" |
| `source_table` | text | Tabla de origen de los datos para trazabilidad |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

**CONSTRAINT √öNICO:** `UNIQUE(article_id, oposicion_id)` - Imposible tener duplicados

---

### üÜï **CONTROL DE VERSIONES** ‚≠ê *NUEVO*

#### üìö **Table: `law_versions`** - Historial de Versiones de Leyes
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la versi√≥n |
| `law_id` | uuid (FK) | Referencia a la ley |
| `version_number` | text | N√∫mero de versi√≥n (ej: "1.0", "1.1") |
| `content_hash` | text | Hash SHA-256 de todo el contenido de la ley |
| `boe_reference` | text | Referencia oficial del BOE (ej: "BOE-A-1978-31229") |
| `boe_url` | text | URL directa al BOE consolidado |
| `change_description` | text | Descripci√≥n de los cambios realizados |
| `verification_date` | date | Fecha de verificaci√≥n de la versi√≥n |
| `next_verification_date` | date | Pr√≥xima fecha de verificaci√≥n programada |
| `verification_priority` | text | Prioridad: URGENT, HIGH, MEDIUM, LOW |
| `is_current_version` | boolean | Si es la versi√≥n actual |
| `verification_notes` | text | Notas adicionales sobre la verificaci√≥n |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìñ **Table: `article_versions`** - Historial de Versiones de Art√≠culos
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la versi√≥n |
| `article_id` | uuid (FK) | Referencia al art√≠culo |
| `law_version_id` | uuid (FK) | Referencia a la versi√≥n de la ley |
| `version_number` | text | N√∫mero de versi√≥n del art√≠culo (ej: "1.0", "1.1") |
| `content_hash` | text | Hash SHA-256 del contenido del art√≠culo |
| `content` | text | Contenido hist√≥rico del art√≠culo |
| `title` | text | T√≠tulo hist√≥rico del art√≠culo |
| `change_description` | text | Descripci√≥n espec√≠fica del cambio en el art√≠culo |
| `verification_date` | date | Fecha de verificaci√≥n del art√≠culo |
| `is_current_version` | boolean | Si es la versi√≥n actual del art√≠culo |
| `change_type` | text | Tipo de cambio: "content", "title", "structure" |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìÖ **Table: `version_checks`** - Programaci√≥n de Verificaciones
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la verificaci√≥n |
| `law_id` | uuid (FK) | Referencia a la ley a verificar |
| `check_type` | text | Tipo: "automatic", "manual", "scheduled" |
| `scheduled_date` | date | Fecha programada para la verificaci√≥n |
| `check_frequency` | text | Frecuencia: "monthly", "quarterly", "yearly" |
| `priority` | text | Prioridad: URGENT, HIGH, MEDIUM, LOW |
| `check_status` | text | Estado: "pending", "completed", "failed" |
| `last_check_date` | date | Fecha de la √∫ltima verificaci√≥n |
| `next_check_date` | date | Fecha de la pr√≥xima verificaci√≥n |
| `notification_enabled` | boolean | Si est√°n habilitadas las notificaciones |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üìä **View: `law_update_status`** - Vista de Estado de Actualizaci√≥n
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `law_id` | uuid | Identificador de la ley |
| `law_name` | text | Nombre de la ley |
| `short_name` | text | Nombre abreviado |
| `current_version` | text | Versi√≥n actual |
| `last_verification_date` | date | √öltima verificaci√≥n |
| `next_verification_date` | date | Pr√≥xima verificaci√≥n |
| `verification_priority` | text | Prioridad de verificaci√≥n |
| `status_display` | text | Estado para mostrar: "‚úÖ Actualizada", "‚ö†Ô∏è Pendiente", "üö® Urgente" |
| `days_until_verification` | integer | D√≠as hasta pr√≥xima verificaci√≥n |
| `articles_count` | integer | N√∫mero total de art√≠culos |
| `articles_with_hash` | integer | Art√≠culos con hash generado |

---

### üë§ **USUARIOS Y PROGRESO**

#### üë§ **Table: `user_profiles`** - Perfiles de Usuario
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del perfil |
| `user_id` | uuid (FK) | Referencia al usuario de auth.users |
| `email` | text | Email del usuario |
| `full_name` | text | Nombre completo del usuario |
| `avatar_url` | text | URL del avatar/foto de perfil |
| `preferred_language` | text | Idioma preferido: "es", "en" |
| `study_goal` | text | Objetivo de estudio del usuario |
| `target_oposicion` | text | Oposici√≥n objetivo del usuario |
| `study_hours_per_day` | numeric | Horas de estudio diarias objetivo |
| `notification_preferences` | jsonb | Preferencias de notificaciones |
| `is_active` | boolean | Si el perfil est√° activo |
| `created_at` | timestamp | Fecha de creaci√≥n del perfil |
| `updated_at` | timestamp | √öltima actualizaci√≥n del perfil |

#### üìà **Table: `user_progress`** - Progreso Detallado
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico del progreso |
| `user_id` | uuid (FK) | Referencia al usuario |
| `topic_id` | uuid (FK) | Referencia al tema (NULL para progreso general) |
| `law_id` | uuid (FK) | Referencia a la ley (NULL para progreso general) |
| `article_id` | uuid (FK) | Referencia al art√≠culo espec√≠fico |
| `total_attempts` | integer | N√∫mero total de intentos/preguntas respondidas |
| `correct_attempts` | integer | N√∫mero de respuestas correctas |
| `accuracy_percentage` | numeric | Porcentaje de aciertos (calculado autom√°ticamente) |
| `last_attempt_date` | timestamp | Fecha del √∫ltimo intento |
| `needs_review` | boolean | Si necesita repaso (algoritmo autom√°tico) |
| `study_time_seconds` | integer | Tiempo total de estudio en segundos |
| `difficulty_level` | text | Nivel de dificultad percibido por el usuario |
| `confidence_level` | text | Nivel de confianza: "low", "medium", "high" |
| `created_at` | timestamp | Fecha de creaci√≥n del registro |
| `updated_at` | timestamp | √öltima actualizaci√≥n del registro |

#### üí° **Table: `user_recommendations`** - Recomendaciones Personalizadas
| Campo | Tipo | Descripci√≥n |
|-------|------|-------------|
| `id` | uuid (PK) | Identificador √∫nico de la recomendaci√≥n |
| `user_id` | uuid (FK) | Referencia al usuario |
| `recommendation_type` | text | Tipo: "topic_review", "article_focus", "exam_simulation" |
| `title` | text | T√≠tulo de la recomendaci√≥n |
| `description` | text | Descripci√≥n detallada de qu√© hacer |
| `topic_id` | uuid (FK) | Tema recomendado (si aplica) |
| `article_id` | uuid (FK) | Art√≠culo recomendado (si aplica) |
| `priority` | text | Prioridad: "alta", "media", "baja" |
| `recommendation_score` | numeric | Puntuaci√≥n de la recomendaci√≥n (0-100) |
| `is_dismissed` | boolean | Si el usuario descart√≥ la recomendaci√≥n |
| `is_completed` | boolean | Si la recomendaci√≥n fue completada |
| `expires_at` | timestamp | Fecha de expiraci√≥n de la recomendaci√≥n |
| `created_at` | timestamp | Fecha de creaci√≥n de la recomendaci√≥n |
| `updated_at` | timestamp | √öltima actualizaci√≥n de la recomendaci√≥n |

---

## üîó **Relaciones Clave y Constraints**

### **Constraints √önicos Implementados:**
```sql
-- Garantizar una sola estad√≠stica por art√≠culo-oposici√≥n
ALTER TABLE article_exam_stats 
ADD CONSTRAINT unique_article_oposicion 
UNIQUE (article_id, oposicion_id);

-- Evitar duplicados en mapeo de temas
ALTER TABLE topic_scope 
ADD CONSTRAINT unique_topic_law_scope 
UNIQUE (topic_id, law_id);

-- Una sola convocatoria por a√±o-oposici√≥n
ALTER TABLE convocatorias 
ADD CONSTRAINT unique_convocatoria_year 
UNIQUE (oposicion_id, a√±o);
```

### **√çndices de Performance:**
```sql
-- √çndices para consultas r√°pidas
CREATE INDEX idx_articles_law_number ON articles(law_id, article_number);
CREATE INDEX idx_questions_article ON questions(primary_article_id);
CREATE INDEX idx_article_stats_classification ON article_exam_stats(classification);
CREATE INDEX idx_article_versions_current ON article_versions(article_id, is_current_version);
CREATE INDEX idx_user_progress_article ON user_progress(user_id, article_id);
```

### **Triggers Implementados:**
```sql
-- Actualizar hash autom√°ticamente cuando cambia content
CREATE TRIGGER update_article_hash 
BEFORE UPDATE ON articles 
FOR EACH ROW EXECUTE FUNCTION update_content_hash();

-- Sincronizar article_exam_stats cuando cambia articulos_examenes
CREATE TRIGGER sync_exam_stats 
AFTER INSERT OR UPDATE ON articulos_examenes 
FOR EACH ROW EXECUTE FUNCTION sync_article_exam_stats();
```

## üöÄ Casos de Uso Revolucionarios

### üìñ Tests Personalizados Avanzados
```
"Test Tema 5 - 25 preguntas aleatorias"
"Test Tema 7 - 20 falladas + 5 aleatorias"
"Test Art. 103 CE espec√≠fico - 10 preguntas"
"Test solo preguntas nunca vistas - 50 preguntas"
"Simulacro oficial - 100 preguntas mixtas"
"Repaso errores √∫ltima semana"
"Test T√≠tulo Preliminar CE - 15 preguntas"
"Test Cap√≠tulo II Secci√≥n 1¬™ - Derechos fundamentales"
```

### ‚ú® **Modo Adaptativo (IMPLEMENTADO)** ‚≠ê *NUEVO*
```
Usuario iniciando test con 25 preguntas:
‚îú‚îÄ‚îÄ Pregunta 1: ‚úÖ Correcta (100% aciertos)
‚îú‚îÄ‚îÄ Pregunta 2: ‚ùå Incorrecta (50% aciertos)
‚îú‚îÄ‚îÄ Pregunta 3: ‚ùå Incorrecta (33% aciertos)
‚îî‚îÄ‚îÄ üéØ SISTEMA DETECTA: <60% ‚Üí Activa modo adaptativo

Indicador visual autom√°tico:
‚îú‚îÄ‚îÄ ‚ú® "Adapt√°ndose a tu nivel" (con animaci√≥n pulse)
‚îú‚îÄ‚îÄ Mensaje: "‚ú® Adaptando las preguntas a tu nivel (33% aciertos)"
‚îî‚îÄ‚îÄ Usuario sabe que el sistema est√° optimizando su experiencia
```

### üéØ **Ex√°menes Oficiales (IMPLEMENTADO)** ‚≠ê *GAME CHANGER*
```
"Examen Oficial 2023 - 17 septiembre (EXACTO)"
‚îú‚îÄ‚îÄ 60 preguntas ID√âNTICAS a las que aparecieron
‚îú‚îÄ‚îÄ Mismas opciones, mismo orden
‚îú‚îÄ‚îÄ Experiencia 100% real del examen oficial
‚îî‚îÄ‚îÄ Correcci√≥n autom√°tica con plantilla oficial

"Tema 5 - Solo preguntas oficiales"  
‚îú‚îÄ‚îÄ Art. 103 CE ‚Üí "Cay√≥ en 2023, 2022, 2021" (VERY_FREQUENT)
‚îú‚îÄ‚îÄ Art. 104 CE ‚Üí "Cay√≥ en 2023" (OCCASIONAL)
‚îî‚îÄ‚îÄ Solo preguntas que HAN APARECIDO en ex√°menes reales

"Simulacro Estrat√©gico"
‚îú‚îÄ‚îÄ Prioriza art√≠culos VERY_FREQUENT  
‚îú‚îÄ‚îÄ Distribuci√≥n realista por temas
‚îî‚îÄ‚îÄ Enfoque en contenido que "cae seguro"
```

### üÜï **Control de Versiones (NUEVO)** ‚≠ê *INTEGRIDAD GARANTIZADA*
```
"Verificaci√≥n Autom√°tica de Leyes"
‚îú‚îÄ‚îÄ Hash CE: a3f5d9e8... ‚úÖ Verificada 2024-12-26
‚îú‚îÄ‚îÄ Hash LPAC: b2e4c7f1... ‚ö†Ô∏è Pendiente verificaci√≥n
‚îú‚îÄ‚îÄ Hash LRJSP: c5d8a2b9... üö® Necesita actualizaci√≥n
‚îî‚îÄ‚îÄ Alertas autom√°ticas por prioridad

"Trazabilidad Completa"
‚îú‚îÄ‚îÄ Art. 103 CE v1.0 ‚Üí Hash: xyz123... (2024-01-15)
‚îú‚îÄ‚îÄ Art. 103 CE v1.1 ‚Üí Hash: abc456... (2024-06-20)
‚îî‚îÄ‚îÄ Historial completo de cambios detectados

"Funci√≥n de Consulta R√°pida"
‚îú‚îÄ‚îÄ get_article_context_final('103', 'Auxiliar')
‚îú‚îÄ‚îÄ Resultado: FREQUENT, 3 apariciones, "üìö Repasar bien"
‚îî‚îÄ‚îÄ Performance optimizada con arquitectura h√≠brida
```

### üéØ Mapeo Inteligente Implementado
```
‚úÖ Tema 5 Auxiliar Administrativo:
‚îú‚îÄ‚îÄ CE Art. 103, 104, 105
‚îú‚îÄ‚îÄ 4 preguntas reutilizables cargadas
‚îî‚îÄ‚îÄ üî• Art. 103 = "FREQUENT" (3 apariciones hist√≥ricas)

‚úÖ Tema 7 Auxiliar Administrativo:
‚îú‚îÄ‚îÄ Ley 19/2013 Art. 1,2,3,5,12,13,14,24,25,26,33,37
‚îú‚îÄ‚îÄ 12 art√≠culos fundamentales mapeados
‚îî‚îÄ‚îÄ üî• Art. 13, 14 = "FREQUENT" (2 apariciones cada uno)

‚è≥ Tema 1:
‚îú‚îÄ‚îÄ CE T√≠tulo Preliminar (Art. 1-9)
‚îú‚îÄ‚îÄ CE T√≠tulo I, Cap√≠tulo II, Secci√≥n 1¬™
‚îî‚îÄ‚îÄ Pendiente de mapear
```

### üîÑ **Reutilizaci√≥n Inteligente** ‚≠ê *IMPLEMENTADO*
```
Art. 103 CE ‚Üí 4 preguntas creadas
‚îú‚îÄ‚îÄ ‚úÖ Auxiliar Administrativo Tema 5 (las usa autom√°ticamente)
‚îú‚îÄ‚îÄ ‚è≥ Administrativo C1 Tema 8 (las reutilizar√° cuando se configure)
‚îú‚îÄ‚îÄ ‚è≥ Gesti√≥n Procesal Tema 12 (las reutilizar√° cuando se configure)
‚îî‚îÄ‚îÄ ‚è≥ Cualquier nueva oposici√≥n (reutilizaci√≥n autom√°tica)

Contexto diferenciado por oposici√≥n:
‚îú‚îÄ‚îÄ Auxiliar Admin: "üéØ FREQUENT - 3 apariciones (√∫ltima: 2023)"
‚îú‚îÄ‚îÄ Admin C1: "üìù OCCASIONAL - 1 aparici√≥n (2022)"
‚îî‚îÄ‚îÄ Gesti√≥n Procesal: (Sin contexto - no ha ca√≠do en esa oposici√≥n)
```

### üéØ **Contexto de Ex√°menes Oficiales** ‚≠ê *ARQUITECTURA H√çBRIDA*
```
Art. 103 CE en examen Auxiliar Administrativo:
‚îú‚îÄ‚îÄ üìä Historial: [2021,2022,2023] (3 apariciones)
‚îú‚îÄ‚îÄ üéØ Clasificaci√≥n: FREQUENT
‚îú‚îÄ‚îÄ üì¢ Mensaje: "üìö Repasar bien"
‚îî‚îÄ‚îÄ ‚ö° Consulta h√≠brida optimizada

Art. 13 Ley 19/2013 en examen Auxiliar Administrativo:
‚îú‚îÄ‚îÄ üìä Historial: [2022,2023] (2 apariciones)
‚îú‚îÄ‚îÄ üéØ Clasificaci√≥n: FREQUENT
‚îú‚îÄ‚îÄ üì¢ Mensaje: "üìö Repasar bien"
‚îî‚îÄ‚îÄ üîÑ Datos consolidados sin duplicados

Art. 50 CE en examen Auxiliar Administrativo:
‚îú‚îÄ‚îÄ ‚ùå No est√° en temario Auxiliar
‚îî‚îÄ‚îÄ üîá Sin contexto (no se muestra)
```

---

## üîß Stack Tecnol√≥gico

### Frontend (Existente)
- **Next.js 14** con App Router
- **Tailwind CSS** para estilos
- **Componentes React** para interactividad

### Backend (Implementado)
- **Supabase** como backend-as-a-service
- **PostgreSQL** con 21 tablas especializadas
- **19 funciones SQL** para l√≥gica de negocio
- **Row Level Security** para privacidad
- **üÜï Sistema de hashes** para integridad de datos
- **üÜï Control de versiones** automatizado

### Autenticaci√≥n y Usuarios
- **Supabase Auth** con Google OAuth
- **Perfiles de usuario** persistentes
- **Progreso multiplataforma**

### Analytics e Inteligencia
- **Sistema de recomendaciones** basado en IA
- **An√°lisis predictivo** de rendimiento
- **Contexto hist√≥rico** de ex√°menes oficiales
- **üÜï Arquitectura h√≠brida** para performance optimizada
- **üÜï Control de integridad** autom√°tico

---

## üìä M√©tricas de √âxito

### Para Usuarios
- **Retenci√≥n:** Sesiones recurrentes de estudio
- **Progreso:** Mejora medible en puntuaciones
- **Engagement:** Tiempo de estudio por sesi√≥n
- **Satisfacci√≥n:** Completaci√≥n de tests largos
- **üÜï Estrategia:** Enfoque optimizado en art√≠culos "VERY_FREQUENT"
- **üÜï Confianza:** Experiencia real con ex√°menes oficiales exactos
- **üÜï Fiabilidad:** Contenido siempre actualizado autom√°ticamente

### Para el Sistema
- **Calidad de preguntas:** Tasa de aciertos por pregunta
- **Dificultad real:** An√°lisis estad√≠stico de errores
- **Patrones de uso:** Horarios y frecuencia de estudio
- **Contenido efectivo:** Qu√© temas/leyes generan m√°s engagement
- **üÜï Precisi√≥n hist√≥rica:** Correlaci√≥n ex√°menes oficiales vs. predicciones
- **üÜï Reutilizaci√≥n:** Tasa de reutilizaci√≥n de preguntas entre oposiciones
- **üÜï Integridad:** 100% de contenido verificado y actualizado

---

## üõ†Ô∏è Estado de Implementaci√≥n

### Fase 1: Infraestructura Base ‚úÖ **COMPLETADO**
- ‚úÖ Configuraci√≥n de Supabase (Project ID: yqbpstxowvgipqspqrgo)
- ‚úÖ Dise√±o de esquema de base de datos (**21 tablas principales**)
- ‚úÖ **Arquitectura de preguntas reutilizables** implementada
- ‚úÖ Sistema de mapeo tema ‚Üí contenido legal (topic_scope)
- ‚úÖ **19 funciones SQL especializadas** funcionando
- ‚úÖ **Nueva arquitectura questions ‚Üí articles** (no topics)
- ‚úÖ **üÜï Sistema completo de ex√°menes oficiales**
- ‚úÖ **üÜï Contexto hist√≥rico inteligente por oposici√≥n**
- ‚úÖ **üÜï Control de versiones completo** con hashes SHA-256
- ‚úÖ **üÜï Arquitectura h√≠brida** para performance optimizada

### Fase 2: Contenido Legal ‚úÖ **HIST√ìRICO - COMPLETADO**
- ‚úÖ **üéâ Constituci√≥n Espa√±ola COMPLETA** - **169/169 art√≠culos** (100%)
- ‚úÖ **üìä Estructura jer√°rquica completa** - T√≠tulos, Cap√≠tulos, Secciones
- ‚úÖ **üèõÔ∏è Texto consolidado oficial BOE** - Incluye reformas 1992 y 2011
- ‚úÖ **üÜï Hashes SHA-256** generados para todos los art√≠culos
- ‚úÖ **üÜï Sistema de verificaci√≥n** autom√°tica implementado
- ‚úÖ **üÜï Control de duplicados** resuelto definitivamente
- ‚úÖ **Ley 19/2013 de Transparencia** completa (12 art√≠culos clave)
- ‚úÖ **Tema 7 Auxiliar Administrativo** mapeado completamente
- ‚úÖ **Tema 5 Auxiliar Administrativo** mapeado parcialmente
- ‚úÖ **üÜï 4 oposiciones configuradas** con mapeo de temas
- ‚úÖ **üÜï Historial ex√°menes 2021-2023** para m√∫ltiples art√≠culos
- ‚úÖ **üÜï 5 art√≠culos confirmados** en examen oficial 2023
- ‚è≥ LPAC y LRJSP principales art√≠culos
- ‚è≥ **üÜï M√°s ex√°menes oficiales** (2021, 2022) para historial completo

### Fase 3: Preguntas y Ex√°menes ‚úÖ **REVOLUCIONARIO**
- ‚úÖ **4 preguntas s√∫per dif√≠ciles** Art. 103 CE implementadas
- ‚úÖ **Arquitectura de reutilizaci√≥n** funcionando perfectamente
- ‚úÖ **üÜï Sistema de ex√°menes oficiales exactos** implementado
- ‚úÖ **üÜï 2 preguntas oficiales reales** del examen 2023 registradas
- ‚úÖ **üÜï Contexto hist√≥rico** integrado en todas las preguntas
- ‚úÖ **üÜï Tabla preguntas_examenes_oficiales** creada y operativa
- ‚úÖ **üÜï Arquitectura h√≠brida article_exam_stats** funcionando
- ‚úÖ **üÜï Sistema sin duplicados** garantizado con constraints √∫nicos
- ‚úÖ **üÜï Funci√≥n optimizada** get_article_context_final() operativa
- ‚è≥ Completar 25 preguntas Arts. 103, 104, 105 CE
- ‚è≥ Preguntas para Ley 19/2013 de Transparencia
- ‚è≥ **üÜï Encontrar y registrar** las 60 preguntas completas del examen 2023
- ‚è≥ Migraci√≥n de preguntas hardcodeadas existentes (Tema 6)
- ‚è≥ **üÜï Crear preguntas masivas** para art√≠culos CE m√°s importantes

### Fase 4: Frontend y Funcionalidad ‚è≥ **PENDIENTE**
- ‚úÖ **‚ú® Modo Adaptativo** - Sistema autom√°tico que se ajusta al rendimiento (Sept 2025)
- ‚è≥ Sistema de autenticaci√≥n con Google OAuth
- ‚è≥ Generaci√≥n din√°mica de tests en React
- ‚è≥ Dashboard de progreso y configuraciones
- ‚è≥ Integraci√≥n del generador con la UI existente
- ‚è≥ **üÜï Botones "Solo preguntas oficiales"** para cada tema
- ‚è≥ **üÜï Bot√≥n "Examen Oficial 2023 Completo"**
- ‚è≥ **üÜï Badges y contexto visual** para art√≠culos hist√≥ricos
- ‚è≥ **üÜï Dashboard de estad√≠sticas** de ex√°menes oficiales
- ‚è≥ **üÜï Tests por estructura:** "Solo T√≠tulo Preliminar", "Solo Cap√≠tulo II Secci√≥n 1¬™"
- ‚è≥ **üÜï Panel de control de versiones** para administradores
- ‚è≥ **üÜï Alertas visuales** de contenido desactualizado

### Fase 5: Features Avanzadas ‚è≥ **PENDIENTE**
- ‚è≥ Recomendaciones autom√°ticas inteligentes
- ‚è≥ Tests adaptativos seg√∫n rendimiento
- ‚è≥ Analytics detallados por estructura legal
- ‚è≥ Panel de administraci√≥n para gesti√≥n de contenido
- ‚è≥ **üÜï Predicciones de ex√°menes** basadas en patrones hist√≥ricos
- ‚è≥ **üÜï Modo "Simulacro estrat√©gico"** con peso hist√≥rico
- ‚è≥ **üÜï API para b√∫squeda** de m√°s ex√°menes oficiales
- ‚è≥ **üÜï Sistema de alertas** para nuevos ex√°menes publicados
- ‚è≥ **üÜï Verificaci√≥n autom√°tica BOE** para actualizaciones
- ‚è≥ **üÜï Dashboard de integridad** de datos

---

## üìä Estado Actual de Datos

### ‚úÖ **Base de Datos (21 tablas):**
```
üìö CONTENIDO LEGAL (4 tablas):
‚îú‚îÄ‚îÄ laws: 3 leyes principales
‚îú‚îÄ‚îÄ articles: 169 art√≠culos CE + 12 Ley 19/2013 = 181+ art√≠culos
‚îú‚îÄ‚îÄ topics: 2 temas configurados  
‚îî‚îÄ‚îÄ topic_scope: Mapeo inteligente funcionando

üéØ EX√ÅMENES OFICIALES (6 tablas): ‚≠ê IMPLEMENTADO
‚îú‚îÄ‚îÄ oposiciones: 4 tipos configurados
‚îú‚îÄ‚îÄ convocatorias: 3 a√±os registrados (2021-2023)
‚îú‚îÄ‚îÄ articulos_examenes: 5 art√≠culos con historial
‚îú‚îÄ‚îÄ preguntas_examenes_oficiales: 2 preguntas reales registradas
‚îú‚îÄ‚îÄ oposicion_topics: Mapeo oposici√≥n ‚Üî temas
‚îî‚îÄ‚îÄ oposicion_articles: Mapeo directo funcionando

üÜï ARQUITECTURA H√çBRIDA (1 tabla): ‚≠ê REVOLUCIONARIO
‚îî‚îÄ‚îÄ article_exam_stats: 4 registros consolidados sin duplicados

üÜï CONTROL DE VERSIONES (4 tablas): ‚≠ê NUEVO
‚îú‚îÄ‚îÄ law_versions: Historial CE completo
‚îú‚îÄ‚îÄ article_versions: 181+ art√≠culos con versiones
‚îú‚îÄ‚îÄ version_checks: Verificaciones programadas
‚îî‚îÄ‚îÄ law_update_status: Estado actual 100% actualizado

‚ùì PREGUNTAS Y TESTS (4 tablas):
‚îú‚îÄ‚îÄ questions: 4 preguntas reutilizables
‚îú‚îÄ‚îÄ test_configurations: Estructura preparada
‚îú‚îÄ‚îÄ test_questions: Sistema operativo
‚îî‚îÄ‚îÄ tests: Tracking implementado

üë§ USUARIOS (3 tablas):
‚îú‚îÄ‚îÄ user_profiles: OAuth preparado
‚îú‚îÄ‚îÄ user_progress: Analytics funcionando
‚îî‚îÄ‚îÄ user_recommendations: Motor preparado
```

### ‚ú® **SISTEMA IA ADAPTATIVO COMPLETO:** ‚≠ê *REVOLUCIONARIO*
```
üß† DIFICULTAD PERSONAL ADAPTATIVA:
‚îú‚îÄ‚îÄ ‚úÖ 2 tablas principales: user_question_history + user_difficulty_metrics
‚îú‚îÄ‚îÄ ‚úÖ Algoritmo inteligente: ‚â•85% √©xito = Easy personal
‚îú‚îÄ‚îÄ ‚úÖ Tendencias autom√°ticas: improving/declining/stable
‚îú‚îÄ‚îÄ ‚úÖ Triggers en tiempo real: actualizaci√≥n autom√°tica
‚îú‚îÄ‚îÄ ‚úÖ API completa: 15+ endpoints especializados
‚îú‚îÄ‚îÄ ‚úÖ UI componentes: Toggle est√°ndar/personal
‚îî‚îÄ‚îÄ ‚úÖ Migraci√≥n datos: Sistema funcionando 100%

üí° NOTIFICACIONES INTELIGENTES:
‚îú‚îÄ‚îÄ ‚úÖ 9 tipos motivacionales implementados
‚îú‚îÄ‚îÄ ‚úÖ An√°lisis autom√°tico de patrones
‚îú‚îÄ‚îÄ ‚úÖ Detecci√≥n problemas temprana
‚îú‚îÄ‚îÄ ‚úÖ Motivaci√≥n solo cuando aporta valor
‚îú‚îÄ‚îÄ ‚úÖ Persistencia localStorage + BD
‚îú‚îÄ‚îÄ ‚úÖ Acciones contextuales directas
‚îî‚îÄ‚îÄ ‚úÖ Sistema "Solo Motivaci√≥n+" activo

üìä ANALYTICS VISUALES:
‚îú‚îÄ‚îÄ ‚úÖ Gr√°ficos interactivos de progreso semanal
‚îú‚îÄ‚îÄ ‚úÖ 4 m√©tricas seleccionables (precisi√≥n, tests, tiempo, preguntas)
‚îú‚îÄ‚îÄ ‚úÖ An√°lisis autom√°tico de tendencias
‚îú‚îÄ‚îÄ ‚úÖ Componentes compactos con info desplegable
‚îú‚îÄ‚îÄ ‚úÖ Iconos IA ‚ú® en toda la aplicaci√≥n
‚îî‚îÄ‚îÄ ‚úÖ UI optimizada para m√≥vil y desktop
```

### ‚úÖ **Constituci√≥n Espa√±ola COMPLETA:** ‚≠ê *LOGRO HIST√ìRICO*
```
üéâ 169/169 ART√çCULOS MAPEADOS (100%) - ¬°COMPLETADO!
‚îú‚îÄ‚îÄ üìö T√≠tulo Preliminar (Arts. 1-9)
‚îú‚îÄ‚îÄ üë• T√≠tulo I - Derechos y Deberes (Arts. 10-55)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. I: Espa√±oles y extranjeros (10-13)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. II: Derechos y libertades
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Secc. 1¬™: Derechos fundamentales (14-29)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Secc. 2¬™: Derechos y deberes ciudadanos (30-38)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. III: Principios rectores (39-52)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. IV: Garant√≠as (53-54)
‚îÇ   ‚îî‚îÄ‚îÄ Cap. V: Suspensi√≥n derechos (55)
‚îú‚îÄ‚îÄ üëë T√≠tulo II - La Corona (Arts. 56-65)
‚îú‚îÄ‚îÄ üèõÔ∏è T√≠tulo III - Cortes Generales (Arts. 66-96)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. I: Las C√°maras (66-80)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. II: Elaboraci√≥n leyes (81-92)
‚îÇ   ‚îî‚îÄ‚îÄ Cap. III: Tratados internacionales (93-96)
‚îú‚îÄ‚îÄ üèõÔ∏è T√≠tulo IV - Gobierno y Administraci√≥n (Arts. 97-107)
‚îú‚îÄ‚îÄ ü§ù T√≠tulo V - Relaciones Gobierno-Cortes (Arts. 108-116)
‚îú‚îÄ‚îÄ ‚öñÔ∏è T√≠tulo VI - Poder Judicial (Arts. 117-127)
‚îú‚îÄ‚îÄ üí∞ T√≠tulo VII - Econom√≠a y Hacienda (Arts. 128-136)
‚îú‚îÄ‚îÄ üó∫Ô∏è T√≠tulo VIII - Organizaci√≥n Territorial (Arts. 137-158)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. I: Principios generales (137-139)
‚îÇ   ‚îú‚îÄ‚îÄ Cap. II: Administraci√≥n Local (140)
‚îÇ   ‚îî‚îÄ‚îÄ Cap. III: Comunidades Aut√≥nomas (141-158)
‚îú‚îÄ‚îÄ ‚öñÔ∏è T√≠tulo IX - Tribunal Constitucional (Arts. 159-165)
‚îî‚îÄ‚îÄ üîß T√≠tulo X - Reforma Constitucional (Arts. 166-169)

üÜï CARACTER√çSTICAS √öNICAS:
‚îú‚îÄ‚îÄ ‚úÖ Contenido consolidado oficial BOE (incluye reformas 1992, 2011)
‚îú‚îÄ‚îÄ ‚úÖ Estructura jer√°rquica completa (T√≠tulos ‚Üí Cap√≠tulos ‚Üí Secciones)
‚îú‚îÄ‚îÄ ‚úÖ Hashes SHA-256 para integridad de datos
‚îú‚îÄ‚îÄ ‚úÖ Control de versiones autom√°tico
‚îú‚îÄ‚îÄ ‚úÖ Sistema de verificaci√≥n programada
‚îî‚îÄ‚îÄ ‚úÖ Zero duplicados garantizado
```

### ‚úÖ **Oposiciones Configuradas:** ‚≠ê *IMPLEMENTADO*
- **Auxiliar Administrativo del Estado** (Libre + Promoci√≥n Interna)
- **Administrativo del Estado** (Libre)
- **Gesti√≥n Procesal y Administrativa** (Libre)
- **Tramitaci√≥n Procesal y Administrativa** (Libre)

### ‚úÖ **Ex√°menes Oficiales Registrados:** ‚≠ê *REVOLUCIONARIO*
- **Convocatorias:** 2021, 2022, 2023 para Auxiliar Administrativo
- **Art√≠culos confirmados:** Art. 103, 104 CE + Art. 13, 14 Ley 19/2013 + Art. 38 LRJSP
- **Preguntas exactas:** 2 preguntas reales del examen 17 septiembre 2023
- **Sistema de contexto:** Funcionando al 100%
- **üÜï Arquitectura h√≠brida:** article_exam_stats optimizada

### ‚úÖ **Control de Versiones Implementado:** ‚≠ê *NUEVO*
```
üìä ESTADO ACTUAL DE INTEGRIDAD:
‚îú‚îÄ‚îÄ ‚úÖ Constituci√≥n Espa√±ola: 169 art√≠culos con hash generado (100%)
‚îú‚îÄ‚îÄ ‚úÖ Ley 19/2013: 12 art√≠culos con hash generado (100%)
‚îú‚îÄ‚îÄ ‚úÖ Funci√≥n generate_content_hash(): Operativa
‚îú‚îÄ‚îÄ ‚úÖ Sistema de verificaci√≥n: Programado para 2025-12-26
‚îú‚îÄ‚îÄ ‚úÖ Alertas autom√°ticas: Configuradas por prioridad
‚îî‚îÄ‚îÄ ‚úÖ Trazabilidad completa: Historial de cambios disponible

üîç FUNCIONES DE CONTROL:
‚îú‚îÄ‚îÄ generate_content_hash(text) ‚Üí SHA-256 hash
‚îú‚îÄ‚îÄ check_law_update_needed(law_id) ‚Üí Boolean + detalles
‚îú‚îÄ‚îÄ get_laws_needing_verification() ‚Üí Lista priorizada
‚îî‚îÄ‚îÄ law_update_status ‚Üí Vista resumen ejecutivo
```

### ‚úÖ **Arquitectura H√≠brida Funcionando:** ‚≠ê *REVOLUCIONARIO*
```
üöÄ CONSULTAS ULTRARR√ÅPIDAS:
‚îú‚îÄ‚îÄ get_article_context_final('103', 'Auxiliar') 
‚îú‚îÄ‚îÄ ‚Üí FREQUENT, 3 apariciones, [2021,2022,2023], "üìö Repasar bien"
‚îú‚îÄ‚îÄ Performance: <1ms (vs. 50ms con JOINs complejos)
‚îî‚îÄ‚îÄ Zero duplicados garantizado

üìä DATOS CONSOLIDADOS:
‚îú‚îÄ‚îÄ article_exam_stats: 4 registros √∫nicos sin duplicados
‚îú‚îÄ‚îÄ Constraint UNIQUE(article_id, oposicion_id)
‚îú‚îÄ‚îÄ Migraci√≥n autom√°tica desde articulos_examenes
‚îî‚îÄ‚îÄ Actualizaci√≥n autom√°tica con triggers
```

### ‚úÖ **Funciones SQL Operativas (25+ funciones):**
```
üìä GENERACI√ìN DE TESTS:
‚îú‚îÄ‚îÄ get_topic_questions_v2() ‚úÖ
‚îú‚îÄ‚îÄ generate_test_by_topic() ‚úÖ  
‚îú‚îÄ‚îÄ get_article_questions() ‚úÖ

üéØ EX√ÅMENES OFICIALES ‚≠ê IMPLEMENTADO:
‚îú‚îÄ‚îÄ get_examen_oficial_exacto() ‚úÖ
‚îú‚îÄ‚îÄ get_preguntas_oficiales_por_tema() ‚úÖ
‚îú‚îÄ‚îÄ get_estadisticas_examenes_oficiales() ‚úÖ
‚îú‚îÄ‚îÄ get_articles_missing_questions() ‚úÖ

üß† CONTEXTO INTELIGENTE ‚≠ê IMPLEMENTADO:
‚îú‚îÄ‚îÄ get_question_exam_context_v2() ‚úÖ
‚îú‚îÄ‚îÄ get_article_context_final() ‚úÖ NUEVA - H√çBRIDA
‚îú‚îÄ‚îÄ get_oposicion_articles() ‚úÖ
‚îú‚îÄ‚îÄ get_oposicion_coverage_stats() ‚úÖ

üîí CONTROL DE VERSIONES ‚≠ê NUEVO:
‚îú‚îÄ‚îÄ generate_content_hash() ‚úÖ
‚îú‚îÄ‚îÄ check_law_update_needed() ‚úÖ
‚îú‚îÄ‚îÄ get_laws_needing_verification() ‚úÖ
‚îú‚îÄ‚îÄ migrate_existing_exam_data() ‚úÖ

‚ú® SISTEMA IA ADAPTATIVO ‚≠ê NUEVO:
‚îú‚îÄ‚îÄ calculate_personal_difficulty() ‚úÖ
‚îú‚îÄ‚îÄ calculate_trend() ‚úÖ
‚îú‚îÄ‚îÄ update_user_question_history() ‚úÖ
‚îú‚îÄ‚îÄ migrate_existing_data() ‚úÖ
‚îú‚îÄ‚îÄ recalculate_user_metrics() ‚úÖ
‚îî‚îÄ‚îÄ get_personalized_insights() ‚úÖ

üìà AN√ÅLISIS AVANZADO:
‚îú‚îÄ‚îÄ get_question_stats_by_position() ‚úÖ
‚îú‚îÄ‚îÄ get_official_exam_coverage_stats() ‚úÖ
‚îú‚îÄ‚îÄ get_user_progress_analytics() ‚è≥
‚îú‚îÄ‚îÄ get_recommendation_engine() ‚è≥
‚îî‚îÄ‚îÄ generate_official_exam_simulation() ‚úÖ
```

---


### Seguridad
- Row Level Security en Supabase
- Encriptaci√≥n de datos sensibles
- Auditor√≠a de accesos
- **üÜï Integridad de datos** con hashes SHA-256
- **üÜï Control de versiones** para trazabilidad

---

## üìà Escalabilidad Futura

### Nuevas Oposiciones
- F√°cil adici√≥n de nuevos temarios
- Plantillas reutilizables
- Sistema multi-tenant
- **üÜï Mapeo autom√°tico** de art√≠culos entre oposiciones similares
- **üÜï Reutilizaci√≥n inteligente** de ex√°menes oficiales
- **üÜï Migraci√≥n autom√°tica** con arquitectura h√≠brida

### Features Premium
- Tests ilimitados
- Analytics avanzados
- Simulacros oficiales
- Tutor√≠as personalizadas
- **üÜï Acceso prioritario** a ex√°menes oficiales exactos
- **üÜï Predicciones de ex√°menes** basadas en IA
- **üÜï Alertas de art√≠culos** muy preguntados
- **üÜï Dashboard de integridad** de contenido


---

## üöÄ Beneficios Revolucionarios

### Para Estudiantes: Asistente Personal de Aprendizaje
- **üß† Inteligencia Adaptativa**: Tu asistente personal que aprende de cada respuesta
- **‚ú® Adaptaci√≥n Visual en Tiempo Real**: Indicador "Adapt√°ndose a tu nivel" cuando el rendimiento baja del 60%
- **üìä Insights Autom√°ticos**: "Tu precisi√≥n en Tema 5 mejor√≥ 17% esta semana"
- **üéØ Detecci√≥n Temprana**: Alertas antes de que tu rendimiento baje
- **‚ö° Acciones Inmediatas**: Tests dirigidos en 5 minutos para problemas espec√≠ficos
- **üìà Motivaci√≥n Inteligente**: Celebra logros reales con datos concretos
- **üé™ Adaptaci√≥n de Patrones**: Detecta tu horario √≥ptimo de estudio autom√°ticamente
- **Estudio personalizado** basado en debilidades reales
- **Progreso visual** y motivador por art√≠culo espec√≠fico
- **Flexibilidad total** en configuraci√≥n de tests
- **Acceso desde cualquier dispositivo**
- **Preguntas consistentes** entre diferentes oposiciones
- **üÜï Enfoque estrat√©gico** en art√≠culos que "caen seguro" en ex√°menes
- **üÜï Experiencia real** con ex√°menes oficiales exactos
- **üÜï Confianza m√°xima** al conocer el historial de cada art√≠culo
- **üéâ Base constitucional completa** - Los 169 art√≠culos disponibles
- **üÜï Contenido siempre actualizado** - Verificaci√≥n autom√°tica
- **üÜï Performance optimizada** - Consultas ultrarr√°pidas

### Para Administradores: Ventaja Competitiva Sostenible
- **üß† Sistema de IA √önico**: Impossible de replicar por competencia tradicional
- **üìä Analytics Predictivos**: Datos sobre qu√© contenido funciona mejor
- **üéØ Retenci√≥n Mejorada**: Usuarios enganchados por insights personalizados
- **‚ö° Monetizaci√≥n Premium**: Features de IA como valor diferenciado
- **üîÑ Escalabilidad IA**: El sistema mejora autom√°ticamente con m√°s usuarios
- **Gesti√≥n centralizada** de contenido por art√≠culo
- **Reutilizaci√≥n autom√°tica** de preguntas entre oposiciones
- **Datos valiosos** sobre efectividad del material legal espec√≠fico
- **Escalabilidad** para m√∫ltiples oposiciones sin duplicaci√≥n
- **Base s√≥lida** para monetizaci√≥n futura
- **üÜï Analytics hist√≥ricos** de ex√°menes oficiales para crear contenido estrat√©gico
- **üÜï Ventaja competitiva √∫nica** con datos exclusivos de ex√°menes
- **üÜï ROI medible** en contenido basado en frecuencia hist√≥rica
- **üéâ Diferenciaci√≥n total** - Base constitucional m√°s completa del mercado
- **üÜï Control de calidad** - Integridad autom√°tica de datos
- **üÜï Mantenimiento automatizado** - Sistema de versiones

## üèÜ **Posicionamiento Estrat√©gico: Dominio del Mercado**

### ü•á **Ventaja Competitiva Insuperable**

**iLoveTest no compite en el mercado de "webs de tests" - creamos una nueva categor√≠a:**

#### üß† **"Asistente Personal de Aprendizaje Legal con IA"**

**Competencia tradicional:**
- ‚ùå Tests est√°ticos sin personalizaci√≥n
- ‚ùå Feedback gen√©rico o inexistente  
- ‚ùå Sin detecci√≥n de patrones de aprendizaje
- ‚ùå Sin predicci√≥n de problemas
- ‚ùå Sin motivaci√≥n adaptativa

**iLoveTest (Nueva categor√≠a):**
- ‚úÖ **IA que aprende** de cada respuesta del usuario
- ‚úÖ **Predicci√≥n autom√°tica** de √°reas problem√°ticas
- ‚úÖ **Insights personalizados** basados en comportamiento real
- ‚úÖ **Acciones directas** para cada problema detectado
- ‚úÖ **Motivaci√≥n inteligente** solo cuando aporta valor
- ‚úÖ **Patrones de estudio** detectados autom√°ticamente

### üìä **Barreras de Entrada para Competencia**

#### üîí **Imposible de Replicar F√°cilmente:**

1. **üß† Arquitectura de IA Compleja** (6 tipos de an√°lisis integrados)
2. **üìä Algoritmos de Detecci√≥n** (mejoras, regresiones, patrones)
3. **‚ö° Motor de An√°lisis Tiempo Real** (datos hist√≥ricos + predicci√≥n)
4. **üéØ Sistema de Acciones Contextuales** (URLs espec√≠ficas por problema)
5. **üíæ Persistencia Inteligente** (localStorage + BD + frecuencia)
6. **üîÑ Bucle de Mejora Continua** (cada usuario mejora el sistema)

#### üí∞ **Monetizaci√≥n Premium Sostenible:**

- **Tier B√°sico**: Tests tradicionales (como la competencia)
- **Tier Premium**: **Asistente Personal de IA** (√∫nico en el mercado)
  - An√°lisis predictivo personalizado
  - Detecci√≥n autom√°tica de problemas
  - Rutas de estudio adaptativas
  - Insights de rendimiento en tiempo real

### üéØ **Estrategia de Dominio**

1. **Fase 1 ‚úÖ**: Consolidar base t√©cnica (21 tablas + 19 funciones + IA)
2. **Fase 2 üîÑ**: Lanzar MVP con IA b√°sica funcionando
3. **Fase 3 üìà**: Expandir con IA avanzada (ML, predicciones)
4. **Fase 4 üèÜ**: Dominar mercado como l√≠der indiscutible

> **üéØ OBJETIVO**: Que cuando alguien busque "preparaci√≥n oposiciones online", piense inmediatamente en **iLoveTest** como el est√°ndar de oro con IA personal.





### **Innovaciones T√©cnicas Revolucionarias:**
- **üÜï Sistema de hashes SHA-256** para detectar cambios autom√°ticamente
- **üÜï Verificaci√≥n programada** de actualizaciones BOE
- **üÜï Arquitectura h√≠brida** que combina velocidad + an√°lisis profundo
- **üÜï Constraints √∫nicos** que previenen duplicados para siempre

### **Potencial de Monetizaci√≥n:**
- **Base s√≥lida** para features premium
- **Ventaja competitiva** sostenible a largo plazo
- **Escalabilidad** a m√∫ltiples oposiciones sin esfuerzo adicional
- **ROI medible** basado en datos hist√≥ricos reales
- **üÜï Diferenciaci√≥n t√©cnica** imposible de replicar f√°cilmente
- **üÜï Valor agregado** con integridad autom√°tica de contenido

### **Posicionamiento Estrat√©gico:**
**Tu sistema iLoveTest est√° posicionado para dominar el mercado de oposiciones online con una ventaja competitiva t√©cnica y de contenido que ser√° muy dif√≠cil de igualar por la competencia.** 

La combinaci√≥n de:
- **Tecnolog√≠a m√°s avanzada** (21 tablas + 19 funciones + control de versiones)
- **Arquitectura m√°s escalable** (h√≠brida + sin duplicados + reutilizaci√≥n)


