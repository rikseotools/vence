#!/bin/sh
# .husky/pre-commit
# Hook para ejecutar tests antes de commit

echo "ğŸ§ª Ejecutando tests antes del commit..."

# Ejecutar tests con coverage
npm run test:ci

# Capturar cÃ³digo de salida
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
  echo "âŒ Tests fallaron. Commit cancelado."
  echo ""
  echo "ğŸ’¡ Para solucionar:"
  echo "   1. Revisa los tests que fallan con: npm test"
  echo "   2. Corrige los problemas"
  echo "   3. Intenta el commit nuevamente"
  echo ""
  exit 1
fi

echo "âœ… Todos los tests pasaron. Continuando con el commit..."