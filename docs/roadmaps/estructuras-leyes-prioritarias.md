# ğŸ›ï¸ Roadmap: Estructuras de Leyes Prioritarias

## ğŸ¯ **Objetivo**
Crear estructuras de tÃ­tulos/capÃ­tulos para las 8 leyes mÃ¡s importantes que tienen muchas preguntas pero carecen de organizaciÃ³n por secciones.

---

## ğŸ“Š **Leyes Seleccionadas** *(Total: 360+ preguntas sin estructura)*

### **ğŸ¥‡ ALTA PRIORIDAD**
| Ley | ArtÃ­culos | Preguntas | BOE URL | Prioridad |
|-----|-----------|-----------|---------|-----------|
| **Ley 47/2003** - General Presupuestaria | 49 | **103** | âœ… | ğŸ”¥ CrÃ­tica |
| **RDL 5/2015** - Estatuto BÃ¡sico Empleado PÃºblico | 132 | **198** | âŒ | ğŸ”¥ CrÃ­tica |
| **LO 3/2018** - LOPDGDD | 22 | **68** | âœ… | ğŸ”¥ CrÃ­tica |
| **Reglamento UE 2016/679** - RGPD | 35 | **108** | âŒ | ğŸ”¥ CrÃ­tica |

### **ğŸ¥ˆ MEDIA PRIORIDAD**
| Ley | ArtÃ­culos | Preguntas | BOE URL | Prioridad |
|-----|-----------|-----------|---------|-----------|
| **LO 3/2007** - Igualdad mujeres/hombres | 21 | **31** | âœ… | ğŸŸ¡ Alta |
| **LO 3/1981** - Defensor del Pueblo | 15 | **33** | âœ… | ğŸŸ¡ Alta |
| **Ley 29/1998** - JurisdicciÃ³n Contencioso-administrativa | 21 | **25** | âœ… | ğŸŸ¡ Alta |
| **LO 1/2004** - Violencia de GÃ©nero | 13 | **23** | âœ… | ğŸŸ¡ Alta |

**Total impacto:** 308 artÃ­culos organizados | 589 preguntas mejoradas

---

## ğŸ“… **Cronograma por Fases**

### **ğŸ”¥ FASE 1: Leyes CrÃ­ticas** *(4-5 horas)*
**Orden: Impacto vs. Complejidad**

#### **1.1 LO 3/2018 - LOPDGDD** *(45 min)*
- âœ… **22 artÃ­culos, 68 preguntas, CON BOE**
- **Estructura esperada:** ~4-5 tÃ­tulos
- **MetodologÃ­a:** Buscar "TÃTULO" en BOE
- **Complejidad:** BAJA (pocos artÃ­culos, estructura clara)

#### **1.2 Ley 29/1998 - JurisdicciÃ³n Contencioso-administrativa** *(45 min)*
- âœ… **21 artÃ­culos, 25 preguntas, CON BOE**
- **Estructura esperada:** ~3-4 tÃ­tulos
- **MetodologÃ­a:** Buscar "TÃTULO" en BOE
- **Complejidad:** BAJA (similar a LO 3/2018)

#### **1.3 Ley 47/2003 - General Presupuestaria** *(1.5 horas)*
- âœ… **49 artÃ­culos, 103 preguntas, CON BOE**
- **Estructura esperada:** ~6-8 tÃ­tulos
- **MetodologÃ­a:** Buscar "TÃTULO" en BOE
- **Complejidad:** MEDIA (mÃ¡s artÃ­culos, mÃ¡s preguntas)

#### **1.4 RDL 5/2015 - Estatuto BÃ¡sico Empleado PÃºblico** *(2 horas)*
- âŒ **132 artÃ­culos, 198 preguntas, SIN BOE**
- **AcciÃ³n previa:** Buscar URL BOE oficial
- **Estructura esperada:** ~8-12 tÃ­tulos
- **Complejidad:** ALTA (muchos artÃ­culos, sin BOE directo)

### **ğŸŸ¡ FASE 2: Leyes Importantes** *(3-4 horas)*
**Orden: Menor complejidad primero**

#### **2.1 LO 1/2004 - Violencia de GÃ©nero** *(30 min)*
- âœ… **13 artÃ­culos, 23 preguntas, CON BOE**
- **Estructura esperada:** ~2-3 tÃ­tulos
- **Complejidad:** MUY BAJA

#### **2.2 LO 3/1981 - Defensor del Pueblo** *(45 min)*
- âœ… **15 artÃ­culos, 33 preguntas, CON BOE**
- **Estructura esperada:** ~3-4 tÃ­tulos
- **Complejidad:** BAJA

#### **2.3 LO 3/2007 - Igualdad mujeres/hombres** *(1 hora)*
- âœ… **21 artÃ­culos, 31 preguntas, CON BOE**
- **Estructura esperada:** ~4-5 tÃ­tulos
- **Complejidad:** BAJA-MEDIA

#### **2.4 Reglamento UE 2016/679 - RGPD** *(1.5 horas)*
- âŒ **35 artÃ­culos, 108 preguntas, SIN BOE**
- **AcciÃ³n previa:** Buscar fuente oficial UE
- **Estructura esperada:** ~6-8 capÃ­tulos
- **Complejidad:** MEDIA (normativa UE, no BOE espaÃ±ol)

---

## ğŸ› ï¸ **MetodologÃ­a de Trabajo**

### **ğŸ“‹ Proceso estÃ¡ndar por ley:**

#### **Paso 1: InvestigaciÃ³n** *(5-10 min)*
```bash
1. Verificar BOE URL oficial
2. Abrir BOE en navegador
3. Buscar palabra "TÃTULO" en pÃ¡gina
4. Contar tÃ­tulos/capÃ­tulos existentes
```

#### **Paso 2: ExtracciÃ³n con metodologÃ­a TÃTULO** *(10-20 min)*
```bash
1. Para cada "TÃTULO" encontrado:
   - Anotar artÃ­culo ANTES del tÃ­tulo
   - Anotar artÃ­culo DESPUÃ‰S del tÃ­tulo
   - Determinar rango exacto
2. Verificar continuidad (sin gaps)
3. Identificar nombres oficiales completos
```

#### **Paso 3: Script de inserciÃ³n** *(10-15 min)*
```javascript
// Crear script usando template:
// scripts/add-[ley-nombre]-structure.js

function get[Ley]Structure() {
  return [
    {
      section_type: 'titulo',
      section_number: 'I',
      title: 'TÃ­tulo I. [Nombre oficial]',
      description: '[DescripciÃ³n]',
      article_range_start: X,
      article_range_end: Y,
      slug: '[ley]-titulo-i-[slug]',
      order_position: 1
    }
    // ... mÃ¡s tÃ­tulos
  ]
}
```

#### **Paso 4: EjecuciÃ³n y verificaciÃ³n** *(5-10 min)*
```bash
1. Ejecutar script de inserciÃ³n
2. Verificar en BD con query
3. Probar filtros en UI
4. Confirmar funcionamiento correcto
```

---

## ğŸ¯ **Templates de Scripts**

### **Template BOE (con URL)**
```javascript
// scripts/add-[ley]-structure.js
import { createClient } from '@supabase/supabase-js'

const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.SUPABASE_SERVICE_ROLE_KEY
)

function get[Ley]Structure() {
  // Estructura extraÃ­da con metodologÃ­a TÃTULO
  return [
    // ... tÃ­tulos con rangos exactos
  ]
}

async function insert[Ley]Structure() {
  try {
    console.log('ğŸ›ï¸ === CREANDO ESTRUCTURA [LEY] ===')
    
    const { data: law, error: lawError } = await supabase
      .from('laws')
      .select('id, name')
      .eq('short_name', '[LEY_SHORT_NAME]')
      .single()
    
    if (lawError || !law) {
      throw new Error('[LEY] no encontrada')
    }
    
    // Eliminar estructura anterior si existe
    await supabase.from('law_sections').delete().eq('law_id', law.id)
    console.log('ğŸ—‘ï¸ Estructura anterior eliminada')
    
    // Insertar nueva estructura
    const structure = get[Ley]Structure()
    
    for (const section of structure) {
      const { error: insertError } = await supabase
        .from('law_sections')
        .insert({ law_id: law.id, ...section, is_active: true })
      
      if (insertError) {
        throw new Error(`Error: ${insertError.message}`)
      }
      
      console.log('âœ…', section.title, `(Arts. ${section.article_range_start}-${section.article_range_end})`)
    }
    
    console.log(`\nğŸ‰ ESTRUCTURA [LEY] CREADA EXITOSAMENTE`)
    console.log('ğŸ“Š Total tÃ­tulos:', structure.length)
    
  } catch (error) {
    console.error('âŒ Error:', error.message)
  }
}

insert[Ley]Structure()
```

### **Template Sin BOE (requiere investigaciÃ³n)**
```javascript
// Mismo template pero aÃ±adir:
// 1. Buscar BOE URL oficial primero
// 2. Comentar fuente utilizada
// 3. Proceso de verificaciÃ³n adicional
```

---

## ğŸ“Š **URLs BOE conocidas**

### **âœ… Con BOE URL confirmada:**
- **LO 3/2018:** `https://www.boe.es/buscar/act.php?id=BOE-A-2018-16673`
- **Ley 29/1998:** `https://www.boe.es/buscar/act.php?id=BOE-A-1998-16718`
- **Ley 47/2003:** `https://www.boe.es/buscar/act.php?id=BOE-A-2003-21614`
- **LO 3/2007:** `https://www.boe.es/buscar/act.php?id=BOE-A-2007-6115`
- **LO 3/1981:** `https://www.boe.es/buscar/act.php?id=BOE-A-1981-9375`
- **LO 1/2004:** `https://www.boe.es/buscar/act.php?id=BOE-A-2004-21760`

### **âŒ Requieren bÃºsqueda:**
- **RDL 5/2015** - Estatuto BÃ¡sico Empleado PÃºblico
- **Reglamento UE 2016/679** - RGPD (fuente oficial UE)

---

## ğŸ” **Verificaciones de Calidad**

### **Por cada ley completada:**
- [ ] **Rangos continuos** - Sin gaps entre tÃ­tulos
- [ ] **Slugs Ãºnicos** - Prefijo por ley para evitar duplicados
- [ ] **TÃ­tulos oficiales** - Texto exacto del BOE
- [ ] **ArtÃ­culos existentes** - Verificar que coinciden con BD
- [ ] **UI funcional** - Modal "Filtrar por TÃ­tulos" aparece
- [ ] **Performance** - Consultas rÃ¡pidas sin impacto

### **VerificaciÃ³n global final:**
```sql
-- Verificar todas las estructuras creadas
SELECT 
  l.short_name,
  COUNT(ls.id) as titulos_creados,
  MIN(ls.article_range_start) as primer_articulo,
  MAX(ls.article_range_end) as ultimo_articulo
FROM laws l
JOIN law_sections ls ON l.id = ls.law_id
WHERE l.short_name IN (
  'Ley 47/2003', 'RDL 5/2015', 'LO 3/2018', 'Reglamento UE 2016/679',
  'LO 3/2007', 'LO 3/1981', 'Ley 29/1998', 'LO 1/2004'
)
GROUP BY l.id, l.short_name
ORDER BY titulos_creados DESC;
```

---

## ğŸš€ **Impacto Esperado**

### **ğŸ“ˆ Mejoras en UX:**
- **Modal "Filtrar por TÃ­tulos"** aparece en 8 leyes adicionales
- **NavegaciÃ³n especÃ­fica** por secciones de cada ley
- **Tests mÃ¡s organizados** por Ã¡reas temÃ¡ticas
- **Estudio dirigido** a tÃ­tulos especÃ­ficos

### **ğŸ“Š MÃ©tricas de Ã©xito:**
- **100% leyes prioritarias** con estructura
- **589 preguntas** mejor organizadas
- **308 artÃ­culos** navegables por tÃ­tulos
- **8 filtros nuevos** en configurador de tests

### **â±ï¸ Tiempo total estimado:**
- **Fase 1 (crÃ­ticas):** 4-5 horas
- **Fase 2 (importantes):** 3-4 horas
- **Total proyecto:** 7-9 horas

---

## ğŸ¯ **Orden de EjecuciÃ³n Recomendado**

### **Primera sesiÃ³n (2-3 horas):**
1. LO 3/2018 - LOPDGDD
2. Ley 29/1998 - JurisdicciÃ³n Contencioso-administrativa  
3. LO 1/2004 - Violencia de GÃ©nero

### **Segunda sesiÃ³n (2-3 horas):**
4. LO 3/1981 - Defensor del Pueblo
5. LO 3/2007 - Igualdad mujeres/hombres
6. Ley 47/2003 - General Presupuestaria

### **Tercera sesiÃ³n (3-4 horas):**
7. RDL 5/2015 - Estatuto BÃ¡sico Empleado PÃºblico
8. Reglamento UE 2016/679 - RGPD

---

## âœ… **Checklist de Progreso**

### **ğŸ”¥ Fase 1 - CrÃ­ticas:**
- [ ] LO 3/2018 - LOPDGDD
- [ ] Ley 29/1998 - JurisdicciÃ³n Contencioso-administrativa
- [ ] Ley 47/2003 - General Presupuestaria  
- [ ] RDL 5/2015 - Estatuto BÃ¡sico Empleado PÃºblico

### **ğŸŸ¡ Fase 2 - Importantes:**
- [ ] LO 1/2004 - Violencia de GÃ©nero
- [ ] LO 3/1981 - Defensor del Pueblo
- [ ] LO 3/2007 - Igualdad mujeres/hombres
- [ ] Reglamento UE 2016/679 - RGPD

### **ğŸ“Š Verificaciones finales:**
- [ ] Todas las estructuras funcionan correctamente
- [ ] Modal "Filtrar por TÃ­tulos" aparece en las 8 leyes
- [ ] Performance mantenida o mejorada
- [ ] Tests de filtrado funcionan correctamente

---

*ğŸ“ Roadmap creado: 28/10/2025*
*ğŸ¯ Ready para ejecuciÃ³n por fases*
*âš¡ Enfoque: MÃ¡ximo impacto con metodologÃ­a probada*